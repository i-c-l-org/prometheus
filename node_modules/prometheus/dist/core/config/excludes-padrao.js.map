{"version":3,"file":"excludes-padrao.js","sourceRoot":"","sources":["../../../src/core/config/excludes-padrao.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT-0\n/**\n * Configuração centralizada dos padrões de exclusão do Prometheus\n *\n * Esta configuração define os padrões padrão de exclusão usados pelo sistema\n * de análise quando nenhum outro filtro é especificado.\n *\n * Precedência de configuração:\n * 1. Flags --include/--exclude (mais alta prioridade)\n * 2. prometheus.config.json (configuração do projeto)\n * 3. Este arquivo (padrões do sistema)\n * 4. Fallback hardcoded (mais baixa prioridade)\n */\n\nimport type { ConfigExcludesPadrao } from '@';\n\n// Re-exporta o tipo para compatibilidade\nexport type { ConfigExcludesPadrao };\n\n/**\n * Configuração padrão dos padrões de exclusão\n *\n * Estes são os padrões recomendados pelo Prometheus para diferentes tipos de projeto.\n * Eles podem ser sobrescritos pelo usuário via prometheus.config.json\n */\nexport const EXCLUDES_PADRAO: ConfigExcludesPadrao = {\n  padroesSistema: [\n    'node_modules',\n    '**/node_modules/**',\n    'dist/**',\n    '**/dist/**',\n    'build/**',\n    '**/build/**',\n    '**/*.log',\n    '**/*.lock',\n    'package.json',\n    'package-lock.json',\n    'yarn.lock',\n    'pnpm-lock.yaml',\n    '**/.git/**',\n    '.pnpm/**',\n    'prometheus/**',\n    '**/.prometheus/**',\n    'preview-prometheus/**',\n    'prometheus/PREVIEW*',\n    'PREVIEW*',\n    'tests/fixtures/**',\n    'THIRD-PARTY-NOTICES.txt',\n    '**/THIRD-PARTY-NOTICES.txt',\n    '**/*LICENSE*',\n    '**/*NOTICE*',\n    '**/*CHANGELOG*',\n    '**/*.min.js',\n    '**/*.min.css',\n    '**/bundle.*',\n    '**/*generated*',\n    '**/*autogenerated*',\n  ],\n\n  nodeJs: [\n    'node_modules/**',\n    '**/node_modules/**',\n    'npm-debug.log*',\n    'yarn-debug.log*',\n    'yarn-error.log*',\n    '.npm',\n    '.yarn',\n    'coverage/**',\n    '**/coverage/**',\n    '.nyc_output',\n    'dist/**',\n    '**/dist/**',\n    'build/**',\n    '**/build/**',\n  ],\n\n  typeScript: [\n    'dist/**',\n    '**/dist/**',\n    'build/**',\n    '**/build/**',\n    '*.tsbuildinfo',\n    '**/*.tsbuildinfo',\n    '.tsbuildinfo',\n    'out/**',\n    '**/out/**',\n  ],\n\n  python: [\n    '__pycache__/**',\n    '**/__pycache__/**',\n    '*.pyc',\n    '**/*.pyc',\n    '*.pyo',\n    '**/*.pyo',\n    '*.pyd',\n    '**/*.pyd',\n    '.Python',\n    'env/**',\n    'venv/**',\n    '.env/**',\n    'pip-log.txt',\n    'pip-delete-this-directory.txt',\n    '.tox/**',\n    '.coverage',\n    'htmlcov/**',\n    '.pytest_cache/**',\n    '.mypy_cache/**',\n  ],\n\n  java: [\n    'target/**',\n    '**/target/**',\n    'build/**',\n    '**/build/**',\n    '*.class',\n    '**/*.class',\n    '*.jar',\n    '**/*.jar',\n    '*.war',\n    '**/*.war',\n    '*.ear',\n    '**/*.ear',\n    '.gradle/**',\n    'gradle-app.setting',\n    '!gradle-wrapper.jar',\n    '.idea/**',\n    '*.iml',\n    '**/*.iml',\n  ],\n\n  dotnet: [\n    'bin/**',\n    '**/bin/**',\n    'obj/**',\n    '**/obj/**',\n    '*.dll',\n    '**/*.dll',\n    '*.exe',\n    '**/*.exe',\n    '*.pdb',\n    '**/*.pdb',\n    '.vs/**',\n    '**/.vs/**',\n    '*.user',\n    '**/*.user',\n    '*.suo',\n    '**/*.suo',\n    '*.cache',\n    '**/*.cache',\n  ],\n\n  ferramentasDev: [\n    '.vscode/**',\n    '.idea/**',\n    '*.swp',\n    '**/*.swp',\n    '*.swo',\n    '**/*.swo',\n    '*~',\n    '**/*~',\n    '.DS_Store',\n    '**/.DS_Store',\n    'Thumbs.db',\n    '**/Thumbs.db',\n  ],\n\n  controleVersao: [\n    '.git/**',\n    '**/.git/**',\n    '.svn/**',\n    '**/.svn/**',\n    '.hg/**',\n    '**/.hg/**',\n    '.bzr/**',\n    '**/.bzr/**',\n  ],\n\n  temporarios: [\n    '*.tmp',\n    '**/*.tmp',\n    '*.temp',\n    '**/*.temp',\n    '*.bak',\n    '**/*.bak',\n    '.tmp/**',\n    '**/.tmp/**',\n    'tmp/**',\n    '**/tmp/**',\n    'temp/**',\n    '**/temp/**',\n  ],\n\n  documentacao: [\n    'docs/**',\n    '**/docs/**',\n    '*.md',\n    '**/*.md',\n    'README*',\n    '**/README*',\n    'CHANGELOG*',\n    '**/CHANGELOG*',\n    'LICENSE*',\n    '**/LICENSE*',\n  ],\n\n  metadata: {\n    versao: '1.0.0',\n    ultimaAtualizacao: '2025-08-29',\n    descricao: 'Configuração padrão dos padrões de exclusão do Prometheus',\n  },\n};\n\n/**\n * Função para obter os padrões de exclusão recomendados baseado no tipo de projeto\n *\n * @param tipoProjeto Tipo de projeto detectado ou 'generico' para padrões gerais\n * @returns Array de padrões de exclusão recomendados\n */\n\nexport function getExcludesRecomendados(\n  tipoProjeto: string = 'generico',\n): string[] {\n  const base = [...EXCLUDES_PADRAO.padroesSistema];\n\n  switch (tipoProjeto.toLowerCase()) {\n    case 'nodejs':\n    case 'javascript':\n    case 'typescript':\n      return [\n        ...base,\n        ...EXCLUDES_PADRAO.nodeJs,\n        ...EXCLUDES_PADRAO.typeScript,\n      ];\n\n    case 'python':\n      return [...base, ...EXCLUDES_PADRAO.python];\n\n    case 'java':\n    case 'kotlin':\n      return [...base, ...EXCLUDES_PADRAO.java];\n\n    case 'dotnet':\n    case 'csharp':\n    case 'c#':\n      return [...base, ...EXCLUDES_PADRAO.dotnet];\n\n    case 'generico':\n    default:\n      return [\n        ...base,\n        ...EXCLUDES_PADRAO.ferramentasDev,\n        ...EXCLUDES_PADRAO.controleVersao,\n        ...EXCLUDES_PADRAO.temporarios,\n      ];\n  }\n}\n\n/**\n * Função para validar se um padrão de exclusão é seguro\n *\n * @param padrao Padrão a ser validado\n * @returns true se o padrão é considerado seguro\n */\n\nexport function isPadraoExclusaoSeguro(padrao: string): boolean {\n  const padroesPerigosos = [\n    '**/*', // Exclui tudo\n    '*', // Exclui tudo no nível atual\n    '*/**/*', // Exclui tudo recursivamente\n    '**', // Exclui tudo\n    '', // Padrão vazio\n  ];\n\n  // Verifica se o padrão contém caracteres perigosos\n  if (padroesPerigosos.includes(padrao.trim())) {\n    return false;\n  }\n\n  // Verifica se o padrão é muito genérico (muitos asteriscos consecutivos)\n  if (padrao.includes('***') || padrao.includes('****')) {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Função para mesclar configurações de exclusão com precedência\n *\n * Precedência (do mais alto para o mais baixo):\n * 1. Configuração do usuário via prometheus.config.json\n * 2. Padrões recomendados baseados no tipo de projeto\n * 3. Padrões do sistema\n *\n * @param configUsuario Configuração do usuário (pode ser null/undefined)\n * @param tipoProjeto Tipo de projeto para padrões recomendados\n * @returns Array consolidado de padrões de exclusão\n */\n\nexport function mesclarConfigExcludes(\n  configUsuario: string[] | null | undefined,\n  tipoProjeto: string = 'generico',\n): string[] {\n  // Se o usuário definiu configuração própria, usa ela\n  if (\n    configUsuario &&\n    Array.isArray(configUsuario) &&\n    configUsuario.length > 0\n  ) {\n    // Valida os padrões do usuário\n    const padroesValidos = configUsuario.filter(isPadraoExclusaoSeguro);\n\n    if (padroesValidos.length !== configUsuario.length) {\n      console.warn(\n        `⚠️ Alguns padrões de exclusão foram considerados inseguros e foram ignorados: ${configUsuario\n          .filter((p) => !isPadraoExclusaoSeguro(p))\n          .join(', ')}`,\n      );\n    }\n\n    return Array.from(new Set(padroesValidos));\n  }\n\n  // Caso contrário, usa os padrões recomendados\n  return getExcludesRecomendados(tipoProjeto);\n}\n"]}