{"version":3,"file":"filters.js","sourceRoot":"","sources":["../../../src/core/parsing/filters.ts"],"names":[],"mappings":"AAUA,MAAM,UAAU,2BAA2B,CAAC,WAAoD,EAAE,OAAkC;IAClI,IAAI,CAAC,OAAO,EAAE,CAAC;QACb,OAAO,WAA2B,CAAC;IACrC,CAAC;IACD,MAAM,SAAS,GAAG,WAAW,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE;QAChD,MAAM,IAAI,GAAI,UAAyB,CAAC,IAAI,IAAI,EAAE,CAAC;QACnD,MAAM,OAAO,GAAG,UAAU,CAAC,OAAO,IAAI,EAAE,CAAC;QACzC,MAAM,KAAK,GAAG,UAAU,CAAC,KAAK,IAAI,EAAE,CAAC;QACrC,MAAM,QAAQ,GAAI,UAAyB,CAAC,QAAQ,IAAI,EAAE,CAAC;QAG3D,IAAI,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC;YACxF,OAAO,KAAK,CAAC;QACf,CAAC;QAGD,IAAI,OAAO,CAAC,kBAAkB,IAAI,OAAO,CAAC,kBAAkB,CAAC,KAAK,CAAC,EAAE,CAAC;YACpE,OAAO,KAAK,CAAC;QACf,CAAC;QAGD,IAAI,OAAO,CAAC,cAAc,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;YAEzC,MAAM,KAAK,GAAG,IAAI,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;YAC3E,OAAO,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC7B,CAAC,CAAC,EAAE,CAAC;YACH,OAAO,KAAK,CAAC;QACf,CAAC;QAGD,IAAI,OAAO,CAAC,qBAAqB,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;YAChD,MAAM,QAAQ,GAAG,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC;YAChD,MAAM,KAAK,GAAG,IAAI,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;YAC3E,OAAO,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC9B,CAAC,CAAC,EAAE,CAAC;YACH,OAAO,KAAK,CAAC;QACf,CAAC;QACD,OAAO,IAAI,CAAC;IACd,CAAC,CAAC,CAAC;IACH,OAAO,SAAyB,CAAC;AACnC,CAAC","sourcesContent":["// SPDX-License-Identifier: MIT\nimport type { FiltrosConfig, Ocorrencia, OcorrenciaParseErro } from '@';\n\n// Re-exporta o tipo para compatibilidade\nexport type { FiltrosConfig };\n\n/**\n * Aplica supressão às ocorrências baseado na configuração.\n * IMPORTANTE: Isso é para filtrar SAÍDA/RELATÓRIOS, não varredura de arquivos.\n */\nexport function aplicarSupressaoOcorrencias(ocorrencias: Array<OcorrenciaParseErro | Ocorrencia>, filtros: FiltrosConfig | undefined): Ocorrencia[] {\n  if (!filtros) {\n    return ocorrencias as Ocorrencia[];\n  }\n  const filtradas = ocorrencias.filter(ocorrencia => {\n    const tipo = (ocorrencia as Ocorrencia).tipo || '';\n    const relPath = ocorrencia.relPath || '';\n    const nivel = ocorrencia.nivel || '';\n    const mensagem = (ocorrencia as Ocorrencia).mensagem || '';\n\n    // Suprime por tipo/regra (verifica tanto o tipo quanto a mensagem)\n    if (filtros.suppressRules?.some(rule => tipo.includes(rule) || mensagem.includes(rule))) {\n      return false;\n    }\n\n    // Suprime por severidade\n    if (filtros.suppressBySeverity && filtros.suppressBySeverity[nivel]) {\n      return false;\n    }\n\n    // Suprime por caminho (glob patterns)\n    if (filtros.suppressByPath?.some(pattern => {\n      // Implementação simples de glob match\n      const regex = new RegExp(pattern.replace(/\\*/g, '.*').replace(/\\?/g, '.'));\n      return regex.test(relPath);\n    })) {\n      return false;\n    }\n\n    // Suprime por padrão de arquivo\n    if (filtros.suppressByFilePattern?.some(pattern => {\n      const fileNome = relPath.split('/').pop() || '';\n      const regex = new RegExp(pattern.replace(/\\*/g, '.*').replace(/\\?/g, '.'));\n      return regex.test(fileNome);\n    })) {\n      return false;\n    }\n    return true;\n  });\n  return filtradas as Ocorrencia[];\n}"]}