{"version":3,"file":"relatorio-templates.js","sourceRoot":"","sources":["../../../../src/core/messages/relatorios/relatorio-templates.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\n/**\n * Templates reutilizáveis para geração de relatórios Markdown\n * Funções que geram seções completas de MD com formatação consistente\n */\nimport { formatMs } from '@core/config/format.js';\nimport { i18n } from '@shared/helpers/i18n.js';\n\nimport type { GuardianInfo, MetadadosRelatorioEstendido, ProblemaAgrupado } from '@';\n\nimport { RelatorioMensagens } from './relatorio-messages.js';\n\n// Re-exporta o tipo para compatibilidade\nexport type { MetadadosRelatorioEstendido };\n\n/**\n * Gera o cabeçalho padrão do relatório Markdown\n */\nexport function gerarHeaderRelatorio(metadados: MetadadosRelatorioEstendido): string[] {\n  const lines: string[] = [];\n  const {\n    principal\n  } = RelatorioMensagens;\n  lines.push(`# ${principal.titulo}`);\n  lines.push('');\n  lines.push(`**${principal.secoes.metadados.data}:** ${metadados.dataISO}  `);\n  lines.push(`**${principal.secoes.metadados.duracao}:** ${formatMs(metadados.duracao)}  `);\n  lines.push(`**${principal.secoes.metadados.arquivos}:** ${metadados.totalArquivos}  `);\n  lines.push(`**${principal.secoes.metadados.ocorrencias}:** ${metadados.totalOcorrencias}  `);\n  lines.push('');\n  lines.push(RelatorioMensagens.comum.separadores.secao);\n  lines.push('');\n  lines.push('');\n\n  // Se houver manifest\n  if (metadados.manifestFile && metadados.relatoriosDir) {\n    lines.push(`**${principal.secoes.metadados.arquivoManifest}:** \\`${metadados.manifestFile}\\`  `);\n    lines.push('');\n    lines.push(`> ${principal.secoes.metadados.notaManifest}`);\n    lines.push('');\n    lines.push(RelatorioMensagens.comum.separadores.secao);\n    lines.push('');\n    lines.push('');\n  }\n  return lines;\n}\n\n/**\n * Gera a seção Guardian do relatório\n */\nexport function gerarSecaoGuardian(guardian: GuardianInfo): string[] {\n  const lines: string[] = [];\n  const {\n    guardian: msg\n  } = RelatorioMensagens.principal.secoes;\n  lines.push(`## ${msg.titulo}`);\n  lines.push('');\n  lines.push(`  - **${msg.status}:** ${guardian.status}`);\n  lines.push(`  - **${msg.timestamp}:** ${guardian.timestamp}`);\n  lines.push(`  - **${msg.totalArquivos}:** ${guardian.totalArquivos}`);\n  lines.push('');\n  lines.push(RelatorioMensagens.comum.separadores.secao);\n  lines.push('');\n  lines.push('');\n  return lines;\n}\n\n/**\n * Gera tabela de resumo por tipo\n */\nexport function gerarTabelaResumoTipos(tiposContagem: Record<string, number>, limite = 10): string[] {\n  const lines: string[] = [];\n  const {\n    resumoTipos\n  } = RelatorioMensagens.principal.secoes;\n  lines.push(`## ${resumoTipos.titulo}`);\n  lines.push('');\n  lines.push(`| ${resumoTipos.tipo} | ${resumoTipos.quantidade} |`);\n  lines.push('|-------------------|----------|');\n  const sorted = Object.entries(tiposContagem).sort(([, a], [, b]) => b - a).slice(0, limite);\n  for (const [tipo, count] of sorted) {\n    lines.push(`| ${tipo.padEnd(17)} | ${String(count).padStart(8)} |`);\n  }\n  lines.push('');\n  lines.push(RelatorioMensagens.comum.separadores.secao);\n  lines.push('');\n  lines.push('');\n  return lines;\n}\n\n/**\n * Gera tabela de ocorrências\n */\nfunction escapeMarkdownTableCell(value: string): string {\n  return value.replace(/\\\\/g, '\\\\\\\\').replace(/\\|/g, '\\\\|');\n}\nexport function gerarTabelaOcorrencias<T extends {\n  relPath?: string;\n  linha?: number;\n  nivel?: string;\n  mensagem?: string;\n}>(ocorrencias: T[]): string[] {\n  const lines: string[] = [];\n  const {\n    ocorrencias: msg\n  } = RelatorioMensagens.principal.secoes;\n  lines.push(`## ${msg.titulo}`);\n  lines.push('');\n  lines.push(`| ${msg.colunas.arquivo} | ${msg.colunas.linha} | ${msg.colunas.nivel}  | ${msg.colunas.mensagem} |`);\n  lines.push('|---------|-------|--------|----------|');\n  for (const o of ocorrencias) {\n    const arquivo = String(o.relPath || '');\n    const linha = o.linha ? String(o.linha) : '';\n    const nivel = String(o.nivel || '');\n    const mensagem = escapeMarkdownTableCell(String(o.mensagem || ''));\n    lines.push(`| ${arquivo} | ${linha} | ${nivel} | ${mensagem} |`);\n  }\n  lines.push('');\n  return lines;\n}\n\n/**\n * Gera seção de problemas agrupados (para filtro inteligente)\n */\nexport function gerarSecaoProblemasAgrupados(titulo: string, problemas: ProblemaAgrupado[], mostrarExemplos = true): string[] {\n  const lines: string[] = [];\n  const {\n    labels\n  } = RelatorioMensagens.resumo;\n  lines.push(`## ${titulo}`);\n  lines.push('');\n  if (problemas.length === 0) {\n    lines.push(`> ${RelatorioMensagens.comum.vazios.nenhumResultado}`);\n    lines.push('');\n    return lines;\n  }\n  for (const prob of problemas) {\n    lines.push(`### ${prob.icone} ${prob.titulo}`);\n    lines.push('');\n    lines.push(`**${labels.quantidade}:** ${prob.quantidade}  `);\n    lines.push(`**${i18n({ 'pt-BR': 'Resumo:', en: 'Summary:' })}** ${prob.resumo}  `);\n    if (prob.acaoSugerida) {\n      lines.push(`**${labels.acaoSugerida}:** ${prob.acaoSugerida}  `);\n    }\n    lines.push('');\n\n    // Mostrar até 3 exemplos\n    if (mostrarExemplos && prob.ocorrencias.length > 0) {\n      lines.push(`**${labels.exemplos}:**`);\n      const exemplos = prob.ocorrencias.slice(0, 3);\n      for (const ex of exemplos) {\n        const local = ex.relPath ? `${ex.relPath}${ex.linha ? `:${ex.linha}` : ''}` : '';\n        const msg = ex.mensagem ? ` - ${ex.mensagem}` : '';\n        lines.push(`  - \\`${local}\\`${msg}`);\n      }\n      if (prob.ocorrencias.length > 3) {\n        const count = prob.ocorrencias.length - 3;\n        lines.push(`  - _${i18n({ 'pt-BR': `...e mais ${count} ocorrências`, en: `...and ${count} more occurrences` })}_`);\n      }\n      lines.push('');\n    }\n    lines.push(RelatorioMensagens.comum.separadores.subsecao);\n    lines.push('');\n  }\n  return lines;\n}\n\n/**\n * Gera tabela genérica de duas colunas\n */\nexport function gerarTabelaDuasColunas(dados: Array<[string, string | number]>, cabecalhos: [string, string]): string[] {\n  const lines: string[] = [];\n  lines.push(`| ${cabecalhos[0]} | ${cabecalhos[1]} |`);\n  lines.push('|------------------|----------|');\n  for (const [col1, col2] of dados) {\n    lines.push(`| ${col1.padEnd(16)} | ${String(col2).padStart(8)} |`);\n  }\n  lines.push('');\n  return lines;\n}\n\n/**\n * Gera seção de estatísticas\n */\nexport function gerarSecaoEstatisticas(stats: Record<string, string | number>): string[] {\n  const lines: string[] = [];\n  const {\n    estatisticas\n  } = RelatorioMensagens.principal.secoes;\n  lines.push(`## ${estatisticas.titulo}`);\n  lines.push('');\n  for (const [chave, valor] of Object.entries(stats)) {\n    lines.push(`  - **${chave}:** ${valor}`);\n  }\n  lines.push('');\n  return lines;\n}\n\n/**\n * Gera footer do relatório\n */\nexport function gerarFooterRelatorio(timestampISO?: string): string[] {\n  const lines: string[] = [];\n  lines.push(RelatorioMensagens.comum.separadores.secao);\n  lines.push('');\n  lines.push(`_${i18n({ 'pt-BR': 'Gerado por Prometheus CLI', en: 'Generated by Prometheus CLI' })}_`);\n  if (timestampISO) {\n    lines.push(`_${timestampISO}_`);\n  }\n  lines.push('');\n  return lines;\n}\n\n/**\n * Helper para escrever arquivo MD completo\n */\nexport async function escreverRelatorioMarkdown(outputCaminho: string, lines: string[]): Promise<void> {\n  const {\n    salvarEstado\n  } = await import('@shared/persistence/persistencia.js');\n  await salvarEstado(outputCaminho, lines.join('\\n'));\n}"]}