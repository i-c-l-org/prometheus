{"version":3,"file":"relatorio-reestruturar.js","sourceRoot":"","sources":["../../src/relatorios/relatorio-reestruturar.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT-0\nimport { RelatorioMensagens } from '@core/messages/index.js';\nimport { salvarEstado } from '@shared/persistence/persistencia.js';\n\nimport type { MovimentoEstrutural, OpcoesRelatorioReestruturar } from '@';\n\nexport async function gerarRelatorioReestruturarMarkdown(caminho: string, movimentos: MovimentoEstrutural[], opcoes?: OpcoesRelatorioReestruturar): Promise<void> {\n  const dataISO = new Date().toISOString();\n  const total = movimentos.length;\n  const simulado = opcoes?.simulado;\n  const origem = opcoes?.origem ?? 'desconhecido';\n  const preset = opcoes?.preset ?? 'prometheus';\n  const conflitos = opcoes?.conflitos ?? 0;\n  const linhas: string[] = [];\n  linhas.push(`# ${RelatorioMensagens.reestruturar.titulo}`);\n  linhas.push('');\n  linhas.push(`**${RelatorioMensagens.reestruturar.secoes.metadados.data}:** ${dataISO}  `);\n  linhas.push(`**${RelatorioMensagens.reestruturar.secoes.metadados.execucao}:** ${simulado ? RelatorioMensagens.reestruturar.secoes.metadados.simulacao : RelatorioMensagens.reestruturar.secoes.metadados.real}  `);\n  linhas.push(`**${RelatorioMensagens.reestruturar.secoes.metadados.origemPlano}:** ${origem}  `);\n  linhas.push(`**${RelatorioMensagens.reestruturar.secoes.metadados.preset}:** ${preset}  `);\n  linhas.push(`**${RelatorioMensagens.reestruturar.secoes.movimentos.total}:** ${total}  `);\n  linhas.push(`**${RelatorioMensagens.reestruturar.secoes.conflitos.total}:** ${conflitos}  `);\n  linhas.push('');\n  linhas.push('---');\n  linhas.push('');\n  linhas.push(`## ${RelatorioMensagens.reestruturar.secoes.movimentos.titulo}`);\n  if (!total) {\n    linhas.push(RelatorioMensagens.reestruturar.secoes.movimentos.vazio);\n  } else {\n    const cols = RelatorioMensagens.reestruturar.secoes.movimentos.colunas;\n    linhas.push(`| ${cols.origem} | ${cols.destino} |`);\n    linhas.push('|----|------|');\n    for (const m of movimentos) {\n      linhas.push(`| ${m.de} | ${m.para} |`);\n    }\n  }\n  await salvarEstado(caminho, linhas.join('\\n'));\n}\nexport async function gerarRelatorioReestruturarJson(caminho: string, movimentos: MovimentoEstrutural[], opcoes?: OpcoesRelatorioReestruturar): Promise<void> {\n  const json = {\n    simulado: Boolean(opcoes?.simulado),\n    origem: opcoes?.origem ?? 'desconhecido',\n    preset: opcoes?.preset ?? 'prometheus',\n    conflitos: opcoes?.conflitos ?? 0,\n    totalMovimentos: movimentos.length,\n    movimentos,\n    timestamp: Date.now()\n  };\n  await salvarEstado(caminho, json);\n}"]}