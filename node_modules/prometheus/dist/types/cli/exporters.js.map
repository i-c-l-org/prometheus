{"version":3,"file":"exporters.js","sourceRoot":"","sources":["../../../src/types/cli/exporters.ts"],"names":[],"mappings":"","sourcesContent":["// SPDX-License-Identifier: MIT-0\n/**\n * Tipos para exportadores de relatórios (JSON, Markdown, Sharded)\n */\n\nimport type { Ocorrencia } from '@';\n\nimport type { ArquetipoResult } from '../../cli/diagnostico/handlers/arquetipo-handler.js';\nimport type { AutoFixResult } from '../../cli/diagnostico/handlers/auto-fix-handler.js';\nimport type { GuardianResult } from '../../cli/diagnostico/handlers/guardian-handler.js';\n\n/* ================================\n   JSON EXPORTER TYPES\n   ================================ */\n\n/**\n * Estrutura completa do relatório JSON\n */\nexport interface RelatorioJson {\n  /** Metadata do relatório */\n  metadata: {\n    /** Timestamp ISO 8601 */\n    timestamp: string;\n    /** Versão do schema */\n    schemaVersion: string;\n    /** Modo de execução */\n    modo: 'compact' | 'full' | 'executive' | 'quick';\n    /** Flags ativas */\n    flags: string[];\n    /** Configuração de filtros */\n    filtros?: {\n      include?: string[];\n      exclude?: string[];\n      globalExclude?: string[];\n    };\n    /** Versão do Prometheus */\n    prometheusVersion?: string;\n    /** Nome do projeto */\n    projectNome?: string;\n  };\n\n  /** Estatísticas gerais */\n  stats: {\n    /** Total de arquivos analisados */\n    arquivosAnalisados: number;\n    /** Arquivos com problemas */\n    arquivosComProblemas: number;\n    /** Total de ocorrências */\n    totalOcorrencias: number;\n    /** Breakdown por nível */\n    porNivel: {\n      erro: number;\n      aviso: number;\n      info: number;\n    };\n    /** Breakdown por categoria */\n    porCategoria: Record<string, number>;\n    /** Tempo de execução em ms */\n    tempoExecucao?: number;\n    /** Breakdown por regra (tipo) */\n    byRule?: Record<string, number>;\n  };\n\n  /** Resultado do Guardian (se executado) */\n  guardian?: GuardianResult;\n\n  /** Resultado da detecção de arquetipos (se executado) */\n  arquetipos?: ArquetipoResult;\n\n  /** Resultado do auto-fix (se executado) */\n  autoFix?: AutoFixResult;\n\n  /** Lista de ocorrências */\n  ocorrencias: Array<{\n    arquivo: string;\n    linha?: number;\n    coluna?: number;\n    nivel: 'erro' | 'aviso' | 'info';\n    tipo: string;\n    mensagem: string;\n    contexto?: string;\n  }>;\n\n  /** Linguagens detectadas */\n  linguagens?: {\n    total: number;\n    extensoes: Record<string, number>;\n  };\n\n  /** Sugestões contextuais */\n  sugestoes?: string[];\n}\n\n/**\n * Options para exportação JSON\n */\nexport interface JsonExportOptions {\n  /** Escapar caracteres não-ASCII como \\uXXXX */\n  escapeAscii: boolean;\n\n  /** Incluir detalhes completos das ocorrências */\n  includeDetails: boolean;\n\n  /** Incluir contexto de código nas ocorrências */\n  includeContext: boolean;\n\n  /** Compactar JSON (sem indentação) */\n  compact: boolean;\n\n  /** Limitar número de ocorrências */\n  maxOcorrencias?: number;\n  /** Lista de tipos de ocorrência a omitir no exportador (ex.: ['interface-inline-exportada']) */\n  omitTypes?: string[];\n}\n\n/* ================================\n   MARKDOWN EXPORTER TYPES\n   ================================ */\n\n/**\n * Options para exportação Markdown\n */\nexport interface MarkdownExportOptions {\n  /** Incluir índice (table of contents) */\n  includeToc: boolean;\n\n  /** Incluir seção de estatísticas */\n  includeStats: boolean;\n\n  /** Incluir seção do Guardian */\n  includeGuardian: boolean;\n\n  /** Incluir seção de arquetipos */\n  includeArquetipos: boolean;\n\n  /** Incluir seção de auto-fix */\n  includeAutoFix: boolean;\n\n  /** Incluir tabela de ocorrências */\n  includeOcorrencias: boolean;\n\n  /** Agrupar ocorrências por arquivo */\n  agruparPorArquivo: boolean;\n\n  /** Limitar número de ocorrências */\n  maxOcorrencias?: number;\n\n  /** Título do relatório */\n  titulo?: string;\n\n  /** Subtítulo/descrição */\n  subtitulo?: string;\n}\n\n/**\n * Dados para geração do relatório Markdown\n */\nexport interface DadosRelatorioMarkdown {\n  metadata?: {\n    timestamp: string;\n    modo: string;\n    flags: string[];\n  };\n  stats?: {\n    arquivosAnalisados: number;\n    arquivosComProblemas: number;\n    totalOcorrencias: number;\n    porNivel: {\n      erro: number;\n      aviso: number;\n      info: number;\n    };\n    porCategoria: Record<string, number>;\n    tempoExecucao?: number;\n  };\n  guardian?: GuardianResult;\n  arquetipos?: ArquetipoResult;\n  autoFix?: AutoFixResult;\n  ocorrencias?: Ocorrencia[];\n  linguagens?: {\n    total: number;\n    extensoes: Record<string, number>;\n  };\n  sugestoes?: string[];\n}\n\n/* ================================\n   SHARDED EXPORTER TYPES\n   ================================ */\n\n/**\n * Options para fragmentação\n */\nexport interface ShardingOptions {\n  /** Formato dos shards: 'json' | 'markdown' */\n  formato: 'json' | 'markdown';\n\n  /** Número máximo de ocorrências por shard */\n  ocorrenciasPorShard: number;\n\n  /** Diretório de saída */\n  outputDir: string;\n\n  /** Prefixo dos arquivos */\n  prefixo: string;\n\n  /** Incluir índice consolidado */\n  incluirIndice: boolean;\n\n  /** Incluir metadados em cada shard */\n  incluirMetadataEmShards: boolean;\n}\n\n/**\n * Informações sobre um shard gerado\n */\nexport interface ShardInfo {\n  /** Nome do arquivo */\n  arquivo: string;\n\n  /** Caminho completo */\n  caminho: string;\n\n  /** Índice do shard (0-based) */\n  indice: number;\n\n  /** Número de ocorrências neste shard */\n  ocorrencias: number;\n\n  /** Range de linhas (se aplicável) */\n  range?: {\n    inicio: number;\n    fim: number;\n  };\n}\n\n/**\n * Resultado da fragmentação\n */\nexport interface ResultadoSharding {\n  /** Sucesso da operação */\n  sucesso: boolean;\n\n  /** Informações sobre os shards gerados */\n  shards: ShardInfo[];\n\n  /** Arquivo de índice (se gerado) */\n  indice?: string;\n\n  /** Total de ocorrências fragmentadas */\n  totalOcorrencias: number;\n\n  /** Estatísticas */\n  stats: {\n    shardsGerados: number;\n    tamanhoMedio: number;\n    tamanhoTotal: number;\n  };\n}\n\n/* ================================\n   SVG OTIMIZAÇÃO EXPORTER TYPES\n   ================================ */\n\n/**\n * Candidato à otimização de SVG (relatório de otimização).\n */\nexport interface SvgCandidate {\n  relPath: string;\n  dir: string;\n  originalBytes: number;\n  optimizedBytes: number;\n  savedBytes: number;\n  mudancas: string[];\n  temViewBox: boolean;\n}\n\n/**\n * Resultado da exportação do relatório de otimização SVG.\n */\nexport interface SvgExportResult {\n  outputCaminho: string;\n  totalArquivos: number;\n  totalEconomiaBytes: number;\n}\n\n/**\n * Estatísticas por diretório no relatório SVG.\n */\nexport interface SvgDirectoryStats {\n  count: number;\n  totalSaved: number;\n  exemplos: SvgCandidate[];\n}"]}