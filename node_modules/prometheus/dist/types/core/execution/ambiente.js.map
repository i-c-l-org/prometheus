{"version":3,"file":"ambiente.js","sourceRoot":"","sources":["../../../../src/types/core/execution/ambiente.ts"],"names":[],"mappings":"","sourcesContent":["// SPDX-License-Identifier: MIT-0\n\nimport type { Dirent } from 'node:fs';\n\nimport type { FileEntryWithAst, Ocorrencia } from '@';\n\nimport type { GuardianResult } from '../../guardian/resultado.js';\n\nexport interface AmbienteExecucao {\n  arquivosValidosSet: Set<string>;\n  guardian: GuardianResult;\n}\n\nexport type ReportNivel = 'info' | 'aviso' | 'erro' | 'sucesso';\n\nexport interface ReportEvent {\n  /** Código estável para i18n/mapeamento de mensagens (ex.: ARQ_PADRAO) */\n  code?: string;\n  /** Tipo de ocorrência (ex.: analise-arquitetura) */\n  tipo: string;\n  nivel?: ReportNivel;\n  /** Mensagem final (quando já formatada) */\n  mensagem?: string;\n  /** Dados estruturados para formar a mensagem no reporter */\n  data?: Record<string, unknown>;\n  relPath: string;\n  linha?: number;\n  coluna?: number;\n  origem?: string;\n}\n\nexport type ReporterFn = (event: ReportEvent) => Ocorrencia | void;\n\nexport interface ContextoExecucao {\n  baseDir: string;\n  arquivos: FileEntryWithAst[];\n  ambiente?: AmbienteExecucao;\n  /**\n   * Canal opcional para reportar ocorrências de forma desacoplada de mensagens.\n   * Atenção: não deve ser serializado/replicado para Worker Threads (funções não são clonáveis).\n   */\n  report?: ReporterFn;\n}\n\nexport interface InquisicaoOptions {\n  includeContent?: boolean;\n  incluirMetadados?: boolean;\n  skipExec?: boolean;\n}\n\nexport interface ScanOptions {\n  includeContent?: boolean;\n  includeAst?: boolean;\n  filter?: (relPath: string, entry: Dirent) => boolean;\n  onProgress?: (msg: string) => void;\n}\n"]}