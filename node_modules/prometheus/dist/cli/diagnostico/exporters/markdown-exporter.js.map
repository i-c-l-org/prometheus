{"version":3,"file":"markdown-exporter.js","sourceRoot":"","sources":["../../../../src/cli/diagnostico/exporters/markdown-exporter.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT-0\n// @prometheus-disable PROBLEMA_PERFORMANCE\n// Justificativa: exporter que processa dados para markdown - loops s√£o esperados\n// SPDX-FileCopyrightText: 2025 Prometheus Contributors\n\n/**\n * @module cli/diagnostico/exporters/markdown-exporter\n * @description Exportador Markdown com formata√ß√£o rica e tabelas\n * @see docs/REFACTOR-CLI-DIAGNOSTICAR.md - Sprint 2\n */\n\nimport type {\n  DadosRelatorioMarkdown,\n  MarkdownExportOptions,\n  Ocorrencia,\n} from '@';\n\nimport type { ArquetipoResult } from '../handlers/arquetipo-handler.js';\nimport type { AutoFixResult } from '../handlers/auto-fix-handler.js';\nimport type { GuardianResult } from '../handlers/guardian-handler.js';\n\n// Re-export para compatibilidade\nexport type { DadosRelatorioMarkdown, MarkdownExportOptions };\n\n  /* -------------------------- Fun√ß√£o Principal -------------------------- */\n\n/**\n * Gera relat√≥rio Markdown formatado\n */\nexport function gerarRelatorioMarkdown(\n  dados: DadosRelatorioMarkdown,\n  options: Partial<MarkdownExportOptions> = {},\n): string {\n  const opts: MarkdownExportOptions = {\n    includeToc: options.includeToc ?? true,\n    includeStats: options.includeStats ?? true,\n    includeGuardian: options.includeGuardian ?? true,\n    includeArquetipos: options.includeArquetipos ?? true,\n    includeAutoFix: options.includeAutoFix ?? true,\n    includeOcorrencias: options.includeOcorrencias ?? true,\n    agruparPorArquivo: options.agruparPorArquivo ?? false,\n    maxOcorrencias: options.maxOcorrencias,\n    titulo: options.titulo ?? 'Relat√≥rio de Diagn√≥stico',\n    subtitulo: options.subtitulo,\n  };\n\n  const secoes: string[] = [];\n\n  // Cabe√ßalho\n  secoes.push(\n    gerarCabecalho(\n      opts.titulo ?? 'Relat√≥rio de Diagn√≥stico',\n      opts.subtitulo,\n      dados.metadata,\n    ),\n  );\n\n  // √çndice\n  if (opts.includeToc) {\n    secoes.push(gerarIndice(opts, dados));\n  }\n\n  // Estat√≠sticas\n  if (opts.includeStats && dados.stats) {\n    secoes.push(gerarSecaoStats(dados.stats, dados.linguagens));\n  }\n\n  // Guardian\n  if (opts.includeGuardian && dados.guardian?.executado) {\n    secoes.push(gerarSecaoGuardian(dados.guardian));\n  }\n\n  // Arquetipos\n  if (opts.includeArquetipos && dados.arquetipos?.executado) {\n    secoes.push(gerarSecaoArquetipos(dados.arquetipos));\n  }\n\n  // Auto-fix\n  if (opts.includeAutoFix && dados.autoFix?.executado) {\n    secoes.push(gerarSecaoAutoFix(dados.autoFix));\n  }\n\n  // Ocorr√™ncias\n  if (\n    opts.includeOcorrencias &&\n    dados.ocorrencias &&\n    dados.ocorrencias.length > 0\n  ) {\n    secoes.push(gerarSecaoOcorrencias(dados.ocorrencias, opts));\n  }\n\n  // Sugest√µes\n  if (dados.sugestoes && dados.sugestoes.length > 0) {\n    secoes.push(gerarSecaoSugestoes(dados.sugestoes));\n  }\n\n  // Rodap√©\n  secoes.push(gerarRodape());\n\n  return secoes.join('\\n\\n---\\n\\n');\n}\n\n  /* -------------------------- Se√ß√µes do Relat√≥rio -------------------------- */\n\nfunction gerarCabecalho(\n  titulo: string,\n  subtitulo?: string,\n  metadata?: DadosRelatorioMarkdown['metadata'],\n): string {\n  let md = `# ${titulo}\\n\\n`;\n\n  if (subtitulo) {\n    md += `> ${subtitulo}\\n\\n`;\n  }\n\n  if (metadata) {\n    md += `**Data**: ${new Date(metadata.timestamp).toLocaleString('pt-BR')}\\n`;\n    md += `**Modo**: ${metadata.modo}\\n`;\n    if (metadata.flags.length > 0) {\n      md += `**Flags**: \\`${metadata.flags.join('`, `')}\\`\\n`;\n    }\n  }\n\n  return md;\n}\n\nfunction gerarIndice(\n  opts: MarkdownExportOptions,\n  dados: DadosRelatorioMarkdown,\n): string {\n  const itens: string[] = [];\n\n  if (opts.includeStats && dados.stats) {\n    itens.push('- [üìä Estat√≠sticas](#-estat√≠sticas)');\n  }\n  if (opts.includeGuardian && dados.guardian?.executado) {\n    itens.push('- [üõ°Ô∏è Guardian](#Ô∏è-guardian)');\n  }\n  if (opts.includeArquetipos && dados.arquetipos?.executado) {\n    itens.push('- [üèóÔ∏è Arquetipos](#Ô∏è-arquetipos)');\n  }\n  if (opts.includeAutoFix && dados.autoFix?.executado) {\n    itens.push('- [üîß Auto-fix](#-auto-fix)');\n  }\n  if (\n    opts.includeOcorrencias &&\n    dados.ocorrencias &&\n    dados.ocorrencias.length > 0\n  ) {\n    itens.push('- [üîç Ocorr√™ncias](#-ocorr√™ncias)');\n  }\n  if (dados.sugestoes && dados.sugestoes.length > 0) {\n    itens.push('- [üí° Sugest√µes](#-sugest√µes)');\n  }\n\n  return `## √çndice\\n\\n${itens.join('\\n')}`;\n}\n\nfunction gerarSecaoStats(\n  stats: NonNullable<DadosRelatorioMarkdown['stats']>,\n  linguagens?: DadosRelatorioMarkdown['linguagens'],\n): string {\n  let md = '## üìä Estat√≠sticas\\n\\n';\n\n  // Tabela principal\n  md += '| M√©trica | Valor |\\n';\n  md += '|---------|-------|\\n';\n  md += `| Arquivos analisados | ${stats.arquivosAnalisados} |\\n`;\n  md += `| Arquivos com problemas | ${stats.arquivosComProblemas} |\\n`;\n  md += `| Total de ocorr√™ncias | ${stats.totalOcorrencias} |\\n`;\n\n  if (stats.tempoExecucao) {\n    const tempoSeg = (stats.tempoExecucao / 1000).toFixed(2);\n    md += `| Tempo de execu√ß√£o | ${tempoSeg}s |\\n`;\n  }\n\n  // Breakdown por n√≠vel\n  md += '\\n### Por N√≠vel\\n\\n';\n  md += '| N√≠vel | Quantidade |\\n';\n  md += '|-------|------------|\\n';\n  md += `| ‚ùå Erro | ${stats.porNivel.erro} |\\n`;\n  md += `| ‚ö†Ô∏è Aviso | ${stats.porNivel.aviso} |\\n`;\n  md += `| ‚ÑπÔ∏è Info | ${stats.porNivel.info} |\\n`;\n\n  // Breakdown por categoria\n  if (Object.keys(stats.porCategoria).length > 0) {\n    md += '\\n### Por Categoria\\n\\n';\n    md += '| Categoria | Quantidade |\\n';\n    md += '|-----------|------------|\\n';\n\n    const categorias = Object.entries(stats.porCategoria)\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 10); // Top 10\n\n    for (const [categoria, count] of categorias) {\n      md += `| ${categoria} | ${count} |\\n`;\n    }\n  }\n\n  // Linguagens\n  if (linguagens && Object.keys(linguagens.extensoes).length > 0) {\n    md += '\\n### Linguagens Detectadas\\n\\n';\n    md += '| Extens√£o | Arquivos |\\n';\n    md += '|----------|----------|\\n';\n\n    const extensoes = Object.entries(linguagens.extensoes)\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 10); // Top 10\n\n    for (const [ext, count] of extensoes) {\n      md += `| .${ext} | ${count} |\\n`;\n    }\n  }\n\n  return md;\n}\n\nfunction gerarSecaoGuardian(guardian: GuardianResult): string {\n  let md = '## üõ°Ô∏è Guardian\\n\\n';\n\n  md += `**Status**: ${guardian.status ?? 'desconhecido'}\\n`;\n  md += `**Problemas**: ${guardian.temProblemas ? '‚ùå Detectados' : '‚úÖ Nenhum'}\\n\\n`;\n\n  if (guardian.resultado?.detalhes && guardian.resultado.detalhes.length > 0) {\n    md += `### Detalhes\\n\\n`;\n    for (const detalhe of guardian.resultado.detalhes) {\n      md += `- ${detalhe}\\n`;\n    }\n    md += '\\n';\n  }\n\n  if (guardian.drift && guardian.drift > 0) {\n    md += `### Drift Detectado\\n\\n`;\n    md += `- Mudan√ßas: ${guardian.drift}\\n`;\n  }\n\n  return md;\n}\n\nfunction gerarSecaoArquetipos(arquetipos: ArquetipoResult): string {\n  let md = '## üèóÔ∏è Arquetipos\\n\\n';\n\n  if (arquetipos.principal) {\n    md += `**Arqu√©tipo Principal**: ${arquetipos.principal.tipo}\\n`;\n    md += `**Confian√ßa**: ${(arquetipos.principal.confianca * 100).toFixed(1)}%\\n\\n`;\n  }\n\n  if (arquetipos.arquetipos && arquetipos.arquetipos.length > 1) {\n    md += '### Outros Candidatos\\n\\n';\n    md += '| Arqu√©tipo | Confian√ßa | Caracter√≠sticas |\\n';\n    md += '|-----------|-----------|------------------|\\n';\n\n    for (const arq of arquetipos.arquetipos.slice(1, 6)) {\n      const caracteristicas = arq.caracteristicas?.slice(0, 3).join(', ') ?? '';\n      md += `| ${arq.tipo} | ${(arq.confianca * 100).toFixed(1)}% | ${caracteristicas} |\\n`;\n    }\n  }\n\n  if (arquetipos.salvo) {\n    md += '\\n‚úÖ Arqu√©tipo salvo em `prometheus.repo.arquetipo.json`\\n';\n  }\n\n  return md;\n}\n\nfunction gerarSecaoAutoFix(autoFix: AutoFixResult): string {\n  let md = '## üîß Auto-fix\\n\\n';\n\n  md += `**Modo**: ${autoFix.mode}\\n`;\n  md += `**Dry-run**: ${autoFix.dryRun ? 'Sim' : 'N√£o'}\\n\\n`;\n\n  md += '### Estat√≠sticas\\n\\n';\n  md += '| M√©trica | Valor |\\n';\n  md += '|---------|-------|\\n';\n  md += `| Arquivos analisados | ${autoFix.stats.arquivosAnalisados} |\\n`;\n  md += `| Arquivos modificados | ${autoFix.stats.arquivosModificados} |\\n`;\n  md += `| Corre√ß√µes aplicadas | ${autoFix.stats.correcoesAplicadas} |\\n`;\n  md += `| Corre√ß√µes sugeridas | ${autoFix.stats.correcoesSugeridas} |\\n`;\n  md += `| Corre√ß√µes puladas | ${autoFix.stats.correcoesPuladas} |\\n`;\n\n  if (\n    autoFix.correcoesPorTipo &&\n    Object.keys(autoFix.correcoesPorTipo).length > 0\n  ) {\n    md += '\\n### Por Tipo\\n\\n';\n    md += '| Tipo | Quantidade |\\n';\n    md += '|------|------------|\\n';\n\n    for (const [tipo, count] of Object.entries(autoFix.correcoesPorTipo)) {\n      md += `| ${tipo} | ${count} |\\n`;\n    }\n  }\n\n  return md;\n}\n\nfunction gerarSecaoOcorrencias(\n  ocorrencias: Ocorrencia[],\n  opts: MarkdownExportOptions,\n): string {\n  let md = '## üîç Ocorr√™ncias\\n\\n';\n\n  // Limitar se necess√°rio\n  let lista = ocorrencias;\n  if (opts.maxOcorrencias && lista.length > opts.maxOcorrencias) {\n    lista = lista.slice(0, opts.maxOcorrencias);\n    md += `> Mostrando ${opts.maxOcorrencias} de ${ocorrencias.length} ocorr√™ncias\\n\\n`;\n  }\n\n  if (opts.agruparPorArquivo) {\n    md += gerarOcorrenciasPorArquivo(lista);\n  } else {\n    md += gerarTabelaOcorrencias(lista);\n  }\n\n  return md;\n}\n\nfunction gerarTabelaOcorrencias(ocorrencias: Ocorrencia[]): string {\n  let md = '| Arquivo | Linha | N√≠vel | Tipo | Mensagem |\\n';\n  md += '|---------|-------|-------|------|----------|\\n';\n\n  for (const ocorrencia of ocorrencias) {\n    const arquivo = ocorrencia.relPath || 'desconhecido';\n    const linha = ocorrencia.linha ?? '-';\n    const nivel = getNivelIcon(ocorrencia.nivel || 'info');\n    const tipo = ocorrencia.tipo || 'outros';\n    const rawMensagem = ocorrencia.mensagem;\n    const mensagemEscapada = rawMensagem\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\\|/g, '\\\\|');\n    const mensagem = mensagemEscapada.slice(0, 80);\n\n    md += `| ${arquivo} | ${linha} | ${nivel} | ${tipo} | ${mensagem} |\\n`;\n  }\n\n  return md;\n}\n\nfunction gerarOcorrenciasPorArquivo(ocorrencias: Ocorrencia[]): string {\n  const porArquivo = new Map<string, Ocorrencia[]>();\n\n  for (const ocorrencia of ocorrencias) {\n    const arquivo = ocorrencia.relPath || 'desconhecido';\n    if (!porArquivo.has(arquivo)) {\n      porArquivo.set(arquivo, []);\n    }\n    const listaArquivo = porArquivo.get(arquivo);\n    if (listaArquivo) {\n      listaArquivo.push(ocorrencia);\n    }\n  }\n\n  let md = '';\n\n  for (const [arquivo, lista] of porArquivo) {\n    md += `### üìÑ ${arquivo}\\n\\n`;\n\n    for (const ocorrencia of lista) {\n      const nivel = getNivelIcon(ocorrencia.nivel || 'info');\n      const linha = ocorrencia.linha ? `:${ocorrencia.linha}` : '';\n      md += `- ${nivel} **${ocorrencia.tipo}**${linha}: ${ocorrencia.mensagem}\\n`;\n    }\n\n    md += '\\n';\n  }\n\n  return md;\n}\n\nfunction gerarSecaoSugestoes(sugestoes: string[]): string {\n  let md = '## üí° Sugest√µes\\n\\n';\n\n  for (const sugestao of sugestoes) {\n    md += `- ${sugestao}\\n`;\n  }\n\n  return md;\n}\n\nfunction gerarRodape(): string {\n  return `---\\n\\n*Gerado por Prometheus v0.2.0 em ${new Date().toLocaleString('pt-BR')}*`;\n}\n\n  /* -------------------------- Helpers -------------------------- */\n\nfunction getNivelIcon(nivel: string): string {\n  switch (nivel) {\n    case 'erro':\n      return '‚ùå';\n    case 'aviso':\n      return '‚ö†Ô∏è';\n    case 'info':\n      return '‚ÑπÔ∏è';\n    default:\n      return '‚Ä¢';\n  }\n}\n\n/**\n * Escapa caracteres especiais do Markdown\n */\nexport function escaparMarkdown(texto: string): string {\n  return texto\n    .replace(/\\\\/g, '\\\\\\\\')\n    .replace(/\\*/g, '\\\\*')\n    .replace(/_/g, '\\\\_')\n    .replace(/\\[/g, '\\\\[')\n    .replace(/\\]/g, '\\\\]')\n    .replace(/\\(/g, '\\\\(')\n    .replace(/\\)/g, '\\\\)')\n    .replace(/`/g, '\\\\`');\n}\n"]}