{"version":3,"file":"diagnostico-projeto.js","sourceRoot":"","sources":["../../../src/analistas/arquitetos/diagnostico-projeto.ts"],"names":[],"mappings":"AAIA,MAAM,SAAS,GAAG;IAChB,MAAM,EAAE,GAAG;IACX,SAAS,EAAE,IAAI;IACf,QAAQ,EAAE,IAAI;IACd,OAAO,EAAE,IAAI;IACb,GAAG,EAAE,IAAI;IACT,GAAG,EAAE,IAAI;IACT,GAAG,EAAE,GAAG;CACA,CAAC;AAEX,MAAM,UAAU,mBAAmB,CAAC,MAAqB;IACvD,MAAM,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC;SACrC,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,KAAK,KAAK,IAAI,CAAC;SACrC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC,KAA4B,CAAC,CAAC;IAElD,IAAI,IAAI,GAA+B,cAAc,CAAC;IACtD,IAAI,SAAS,GAAW,SAAS,CAAC,MAAM,CAAC;IAEzC,IAAI,aAAa,IAAI,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,CAAC;QAClD,IAAI,GAAG,WAAW,CAAC;QACnB,SAAS,GAAG,SAAS,CAAC,SAAS,CAAC;IAClC,CAAC;SAAM,IAAI,YAAY,IAAI,MAAM,IAAI,MAAM,CAAC,UAAU,EAAE,CAAC;QACvD,IAAI,GAAG,UAAU,CAAC;QAClB,SAAS,GAAG,SAAS,CAAC,QAAQ,CAAC;IACjC,CAAC;SAAM,IAAI,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC;QAC7B,IAAI,GAAG,SAAS,CAAC;QACjB,SAAS,GAAG,SAAS,CAAC,OAAO,CAAC;IAChC,CAAC;SAAM,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;QACzB,IAAI,GAAG,KAAK,CAAC;QACb,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC;IAC5B,CAAC;SAAM,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;QACzB,IAAI,GAAG,KAAK,CAAC;QACb,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC;IAC5B,CAAC;SAAM,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;QACzB,IAAI,GAAG,KAAK,CAAC;QACb,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC;IAC5B,CAAC;IAGD,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,cAAc,EAAE,SAAS,EAAE,CAAC;AAChE,CAAC;AAED,SAAS,SAAS,CAAC,CAAgB;IAEjC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC;AACjC,CAAC;AAED,SAAS,KAAK,CAAC,CAAgB;IAC7B,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,cAAc,IAAI,CAAC,CAAC,UAAU,CAAC,CAAC;AAC1D,CAAC;AAED,SAAS,KAAK,CAAC,CAAgB;IAC7B,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,KAAK,CAAC,CAAC,CAAC;AAClE,CAAC;AAED,SAAS,KAAK,CAAC,CAAgB;IAC7B,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;AACpB,CAAC","sourcesContent":["// SPDX-License-Identifier: MIT\nimport type { DiagnosticoProjeto, SinaisProjeto } from '@';\n\n// Níveis de confiança para detecção de tipos de projeto\nconst CONFIANCA = {\n  PADRAO: 0.3,\n  FULLSTACK: 0.95,\n  MONOREPO: 0.99,\n  LANDING: 0.92,\n  API: 0.88,\n  CLI: 0.85,\n  LIB: 0.8,\n} as const;\n\nexport function diagnosticarProjeto(sinais: SinaisProjeto): DiagnosticoProjeto {\n  const positivos = Object.entries(sinais)\n    .filter(([, valor]) => valor === true)\n    .map(([chave]) => chave as keyof SinaisProjeto);\n\n  let tipo: DiagnosticoProjeto['tipo'] = 'desconhecido';\n  let confianca: number = CONFIANCA.PADRAO;\n\n  if ('ehFullstack' in sinais && sinais.ehFullstack) {\n    tipo = 'fullstack';\n    confianca = CONFIANCA.FULLSTACK;\n  } else if ('ehMonorepo' in sinais && sinais.ehMonorepo) {\n    tipo = 'monorepo';\n    confianca = CONFIANCA.MONOREPO;\n  } else if (ehLanding(sinais)) {\n    tipo = 'landing';\n    confianca = CONFIANCA.LANDING;\n  } else if (ehApi(sinais)) {\n    tipo = 'api';\n    confianca = CONFIANCA.API;\n  } else if (ehCli(sinais)) {\n    tipo = 'cli';\n    confianca = CONFIANCA.CLI;\n  } else if (ehLib(sinais)) {\n    tipo = 'lib';\n    confianca = CONFIANCA.LIB;\n  }\n\n  // Mantém valor de confiança original (0..1) sem arredondar para evitar perda de precisão\n  return { tipo, sinais: positivos, confiabilidade: confianca };\n}\n\nfunction ehLanding(s: SinaisProjeto): boolean {\n  // Considera landing se temPages for true, mesmo sem components/controllers\n  return !!(s.temPages === true);\n}\n\nfunction ehApi(s: SinaisProjeto): boolean {\n  return !!(s.temApi ?? s.temControllers ?? s.temExpress);\n}\n\nfunction ehLib(s: SinaisProjeto): boolean {\n  return !!(s.temSrc && !s.temComponents && !(s.temApi ?? false));\n}\n\nfunction ehCli(s: SinaisProjeto): boolean {\n  return !!s.temCli;\n}\n"]}