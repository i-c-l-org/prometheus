{"version":3,"file":"detector-dependencias.js","sourceRoot":"","sources":["../../../src/analistas/detectores/detector-dependencias.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT-0\nimport path from 'node:path';\n\nimport type { NodePath } from '@babel/traverse';\nimport type * as t from '@babel/types';\nimport { config } from '@core/config/config.js';\nimport { traverse } from '@core/config/traverse.js';\nimport { DetectorDependenciasMensagens } from '@core/messages/analistas/detector-dependencias-messages.js';\n\nimport type { ContextoExecucao, Ocorrencia, TecnicaAplicarResultado } from '@';\n\nexport const grafoDependencias = new Map<string, Set<string>>();\n\n/**\n * Registro global de imports identificados como usados via registro dinâmico.\n * Chave: relPath do arquivo, Valor: Set de nomes de imports considerados usados.\n * Outros detectores podem consultar antes de reportar \"import não usado\".\n */\nexport const importsUsadosDinamicamente = new Map<string, Set<string>>();\n\n/**\n * Normaliza o caminho de import para uma chave consistente.\n */\n\nfunction normalizarPosix(p: string): string {\n  return path.posix.normalize((p || '').replace(/\\\\/g, '/'));\n}\nfunction ehImportSomenteTipo(node: t.ImportDeclaration): boolean {\n  const kind = (node as unknown as {\n    importKind?: string;\n  }).importKind;\n  if (kind === 'type') return true;\n  // Caso: import { type A } from './x'\n  const specifiers = node.specifiers || [];\n  if (specifiers.length === 0) return false; // import side-effect sempre é runtime\n  return specifiers.every(s => {\n    const sk = (s as unknown as {\n      importKind?: string;\n    }).importKind;\n    return sk === 'type';\n  });\n}\nfunction resolverArquivoExistente(caminho: string, arquivosExistentes: Set<string>): string {\n  const alvo = normalizarPosix(caminho);\n  if (arquivosExistentes.has(alvo)) return alvo;\n  const ext = path.posix.extname(alvo);\n  const base = ext ? alvo.slice(0, -ext.length) : alvo;\n\n  // Padrão TS ESM: importar \"./x.js\" em .ts, mas o arquivo real é \"./x.ts\"\n  if (ext === '.js' || ext === '.mjs' || ext === '.cjs') {\n    const candidates = [`${base}.ts`, `${base}.tsx`, `${base}.js`, `${base}.mjs`, `${base}.cjs`];\n    for (const c of candidates) {\n      const n = normalizarPosix(c);\n      if (arquivosExistentes.has(n)) return n;\n    }\n  }\n  if (ext === '.jsx') {\n    const candidates = [`${base}.tsx`, `${base}.ts`, `${base}.jsx`];\n    for (const c of candidates) {\n      const n = normalizarPosix(c);\n      if (arquivosExistentes.has(n)) return n;\n    }\n  }\n\n  // Sem extensão: tenta variações comuns e index.*\n  if (!ext) {\n    const candidates = [`${alvo}.ts`, `${alvo}.tsx`, `${alvo}.js`, `${alvo}.jsx`, `${alvo}.mjs`, `${alvo}.cjs`, `${alvo}.d.ts`, `${alvo}/index.ts`, `${alvo}/index.tsx`, `${alvo}/index.js`, `${alvo}/index.mjs`, `${alvo}/index.cjs`];\n    for (const c of candidates) {\n      const n = normalizarPosix(c);\n      if (arquivosExistentes.has(n)) return n;\n    }\n  }\n  return alvo;\n}\nfunction resolverModulo(mod: string, relPath: string, arquivosExistentes?: Set<string>): {\n  key: string;\n  existe: boolean;\n} {\n  // Externo (node_modules / builtin): mantém como está\n  if (!mod.startsWith('.') && !mod.startsWith('/')) {\n    return {\n      key: mod,\n      existe: true\n    };\n  }\n\n  // Import absoluto: trata como caminho normalizado\n  if (mod.startsWith('/')) {\n    const absNorm = normalizarPosix(mod);\n    if (!arquivosExistentes) return {\n      key: absNorm,\n      existe: true\n    };\n    const resolved = resolverArquivoExistente(absNorm, arquivosExistentes);\n    return {\n      key: resolved,\n      existe: arquivosExistentes.has(resolved)\n    };\n  }\n\n  // Relativo\n  const fromDir = normalizarPosix(path.posix.dirname(normalizarPosix(relPath)));\n  const joined = normalizarPosix(path.posix.join(fromDir, mod));\n  if (!arquivosExistentes) return {\n    key: joined,\n    existe: true\n  };\n  const resolved = resolverArquivoExistente(joined, arquivosExistentes);\n  return {\n    key: resolved,\n    existe: arquivosExistentes.has(resolved)\n  };\n}\nfunction verificarCicloConfirmado(ciclo: string[], grafo: Map<string, Set<string>>, arquivosExistentes?: Set<string>): boolean {\n  if (ciclo.length < 2) return false;\n  if (!arquivosExistentes) return true; // sem contexto suficiente: não bloqueia\n\n  // 1) nós existem no conjunto de arquivos\n  for (const no of ciclo) {\n    const n = normalizarPosix(no);\n    if (!arquivosExistentes.has(n)) return false;\n  }\n\n  // 2) arestas existem no grafo (forma normalizada)\n  for (let i = 0; i < ciclo.length - 1; i++) {\n    const de = normalizarPosix(ciclo[i]);\n    const para = normalizarPosix(ciclo[i + 1]);\n    const deps = grafo.get(de);\n    if (!deps) return false;\n    const depsNorm = new Set(Array.from(deps).map(d => normalizarPosix(d)));\n    if (!depsNorm.has(para)) return false;\n  }\n  return true;\n}\n\n/**\n * Detecta ciclos complexos no grafo de dependências usando DFS aprimorado\n *\n * Melhorias para reduzir falsos positivos:\n * - Normaliza caminhos antes de comparar\n * - Resolve caminhos relativos para absolutos\n * - Ignora dependências de tipo (type-only imports)\n * - Valida que o ciclo é real (todos os nós existem no grafo)\n * - Retorna caminho completo e limpo do ciclo\n *\n * @param inicio - Arquivo inicial para busca\n * @param grafo - Grafo de dependências completo\n * @param maxProfundidade - Profundidade máxima de busca (evita loops infinitos)\n * @returns Array com caminho do ciclo, ou vazio se não houver ciclo\n */\nfunction detectarCicloComplexo(inicio: string, grafo: Map<string, Set<string>>, maxProfundidade = 5): string[] {\n  const visitados = new Set<string>();\n  const pilha = new Set<string>();\n  const caminho: string[] = [];\n\n  // Normaliza o caminho inicial\n  const inicioNormalizado = path.normalize(inicio).replace(/\\\\/g, '/');\n\n  // Helper para resolver caminho relativo a partir de um arquivo\n  function resolverCaminho(from: string, to: string): string {\n    if (to.startsWith('.')) {\n      const fromDir = path.dirname(from);\n      const resolved = path.join(fromDir, to);\n      return path.normalize(resolved).replace(/\\\\/g, '/');\n    }\n    return path.normalize(to).replace(/\\\\/g, '/');\n  }\n\n  // Helper para encontrar dependências no grafo mesmo com paths diferentes\n  function buscarDependencias(arquivo: string): Set<string> | undefined {\n    const normalizado = path.normalize(arquivo).replace(/\\\\/g, '/');\n\n    // Tenta buscar diretamente\n    if (grafo.has(arquivo)) return grafo.get(arquivo);\n    if (grafo.has(normalizado)) return grafo.get(normalizado);\n\n    // Tenta encontrar chave equivalente no grafo\n    for (const [chave, deps] of grafo.entries()) {\n      if (path.normalize(chave).replace(/\\\\/g, '/') === normalizado) {\n        return deps;\n      }\n    }\n    return undefined;\n  }\n  function dfs(atual: string, profundidade: number): boolean {\n    if (profundidade > maxProfundidade) return false;\n\n    // Normaliza o caminho atual para comparação consistente\n    const atualNormalizado = path.normalize(atual).replace(/\\\\/g, '/');\n    if (pilha.has(atualNormalizado)) {\n      // Ciclo encontrado - verificar se é real\n      const indiceCiclo = caminho.findIndex(p => path.normalize(p).replace(/\\\\/g, '/') === atualNormalizado);\n      if (indiceCiclo >= 0) {\n        // Adiciona o nó atual para fechar o ciclo\n        caminho.push(atualNormalizado);\n        return true;\n      }\n      return false;\n    }\n    if (visitados.has(atualNormalizado)) return false;\n    visitados.add(atualNormalizado);\n    pilha.add(atualNormalizado);\n    caminho.push(atualNormalizado);\n    const dependencias = buscarDependencias(atual);\n    if (dependencias) {\n      for (const dep of dependencias) {\n        // Ignora dependências externas (node_modules)\n        if (!dep.startsWith('.') && !dep.startsWith('/') && !dep.startsWith('src')) continue;\n\n        // Resolve e normaliza a dependência\n        const depResolvida = resolverCaminho(atualNormalizado, dep);\n        if (dfs(depResolvida, profundidade + 1)) {\n          return true;\n        }\n      }\n    }\n    pilha.delete(atualNormalizado);\n    caminho.pop();\n    return false;\n  }\n  if (dfs(inicioNormalizado, 0)) {\n    // Extrai apenas a parte cíclica do caminho\n    const ultimoNo = caminho[caminho.length - 1];\n    const indiceCiclo = caminho.findIndex(p => path.normalize(p).replace(/\\\\/g, '/') === ultimoNo);\n    if (indiceCiclo >= 0) {\n      const cicloCompleto = caminho.slice(indiceCiclo);\n\n      // Valida que todos os nós do ciclo existem no grafo\n      const cicloValido = cicloCompleto.every(no => {\n        const normalizado = path.normalize(no).replace(/\\\\/g, '/');\n        return grafo.has(no) || grafo.has(normalizado) || Array.from(grafo.keys()).some(k => path.normalize(k).replace(/\\\\/g, '/') === normalizado);\n      });\n      return cicloValido ? cicloCompleto : [];\n    }\n  }\n  return [];\n}\n\n/**\n * Verifica se um import é usado em padrões de registro dinâmico\n * (ex: registry.register, app.use, plugin.registerPlugin, client.on)\n *\n * Cobertura expandida para Discord.js, Express, Fastify, e outros frameworks:\n * - registry.register(handler) | register(handler)\n * - app.use(middleware) | router.use(handler)\n * - client.on('event', handler)\n * - app.get/post(path, handler)\n *\n * @public Exportada para reuso em outros detectores\n */\nexport function isUsadoEmRegistroDinamico(src: string, importName: string): boolean {\n  // Padrões comuns de registro dinâmico (escapar ponto literal com \\\\.)\n  const padroesRegistro = [\n  // Genéricos\n  `register\\\\(\\\\s*${importName}`, `\\\\.register\\\\(\\\\s*${importName}`, `use\\\\(\\\\s*${importName}`, `\\\\.use\\\\(\\\\s*${importName}`, `registerPlugin\\\\(\\\\s*${importName}`, `addPlugin\\\\(\\\\s*${importName}`, `apply\\\\(\\\\s*${importName}`, `\\\\.apply\\\\(\\\\s*${importName}`, `load\\\\(\\\\s*${importName}`, `\\\\.load\\\\(\\\\s*${importName}`,\n  // Discord.js event handlers\n  `\\\\.on\\\\(\\\\s*[^,]+,\\\\s*${importName}\\\\s*\\\\)`, `\\\\.once\\\\(\\\\s*[^,]+,\\\\s*${importName}\\\\s*\\\\)`,\n  // Express/Fastify routes (app.get/post/put/delete)\n  `\\\\.(?:get|post|put|delete|patch|options|head)\\\\(\\\\s*[^,]+,\\\\s*${importName}\\\\s*\\\\)`,\n  // Array spread/push pattern: [...handlers, importName] | handlers.push(importName)\n  `\\\\[\\\\s*[^\\\\]]*${importName}[^\\\\]]*\\\\]`, `\\\\.push\\\\(\\\\s*${importName}\\\\s*\\\\)`,\n  // NestJS patterns\n  `providers\\\\s*:\\\\s*\\\\[[^\\\\]]*${importName}[^\\\\]]*\\\\]`, `controllers\\\\s*:\\\\s*\\\\[[^\\\\]]*${importName}[^\\\\]]*\\\\]`, `imports\\\\s*:\\\\s*\\\\[[^\\\\]]*${importName}[^\\\\]]*\\\\]`, `exports\\\\s*:\\\\s*\\\\[[^\\\\]]*${importName}[^\\\\]]*\\\\]`,\n  // Vue/React component registration\n  `components\\\\s*:\\\\s*\\\\{[^}]*${importName}[^}]*\\\\}`,\n  // Redux/Zustand\n  `combineReducers\\\\s*\\\\(\\\\s*\\\\{[^}]*${importName}[^}]*\\\\}`,\n  // Generic object assignment where import is value\n  `:\\\\s*${importName}\\\\s*[,}]`];\n  return padroesRegistro.some(padrao => new RegExp(padrao).test(src));\n}\n\n/**\n * Analisa dependências do arquivo (import/require), detecta padrões problemáticos e atualiza grafo global.\n * Retorna ocorrências para imports/require suspeitos, mistos, circulares, etc.\n */\nexport const detectorDependencias = {\n  nome: 'detector-dependencias',\n  test(relPath: string): boolean {\n    return relPath.endsWith('.ts') || relPath.endsWith('.js');\n  },\n  aplicar(src: string, relPath: string, ast: NodePath | null, _fullPath?: string, contexto?: ContextoExecucao): TecnicaAplicarResultado {\n    if (!ast) return [];\n    const ocorrencias: Ocorrencia[] = [];\n    const tiposImport: Set<'import' | 'require'> = new Set();\n    const arquivosExistentes = contexto ? new Set(contexto.arquivos.map(f => f.relPath)) : undefined;\n    // Conjunto de dependências (criado sob demanda quando houver refs)\n    let depsSet: Set<string> | undefined = grafoDependencias.get(relPath);\n\n    // Rastreia imports para detectar uso dinâmico\n    const importsDeclarados = new Set<string>();\n\n    // Detecta padrões problemáticos\n    traverse(ast.node, {\n      ImportDeclaration(p: NodePath<t.ImportDeclaration>) {\n        const somenteTipo = ehImportSomenteTipo(p.node);\n        if (!somenteTipo) tiposImport.add('import');\n        const val = p.node.source.value;\n\n        // Import type-only não participa do grafo nem de validações runtime\n        if (somenteTipo) {\n          // Ainda rastreia nomes para evitar ruído em heurísticas posteriores\n          const specifiers = p.node.specifiers || [];\n          for (const s of specifiers) {\n            if (s.type === 'ImportDefaultSpecifier' || s.type === 'ImportSpecifier') {\n              importsDeclarados.add(s.local.name);\n            } else if (s.type === 'ImportNamespaceSpecifier') {\n              importsDeclarados.add(s.local.name);\n            }\n          }\n          return;\n        }\n        const resolved = resolverModulo(val, relPath, arquivosExistentes);\n\n        // Alimenta grafo\n        if (!depsSet) {\n          depsSet = new Set<string>();\n          grafoDependencias.set(relPath, depsSet);\n        }\n        depsSet.add(resolved.key);\n        // Import externo\n        if (!val.startsWith('.') && !val.startsWith('/')) {\n          ocorrencias.push({\n            tipo: 'info',\n            mensagem: DetectorDependenciasMensagens.importDependenciaExterna(val),\n            relPath,\n            linha: p.node.loc?.start.line,\n            coluna: p.node.loc?.start.column\n          });\n        }\n        // Import relativo longo\n        if (val.startsWith('.') && val.split('../').length > 3) {\n          ocorrencias.push({\n            tipo: 'aviso',\n            mensagem: DetectorDependenciasMensagens.importRelativoLongo(val),\n            relPath,\n            linha: p.node.loc?.start.line,\n            coluna: p.node.loc?.start.column\n          });\n        }\n        // Import de .js em projeto TS\n        if (relPath.endsWith('.ts') && val.endsWith('.js') && !resolved.key.endsWith('.ts')) {\n          ocorrencias.push({\n            tipo: 'aviso',\n            mensagem: DetectorDependenciasMensagens.importJsEmTs(val),\n            relPath,\n            linha: p.node.loc?.start.line,\n            coluna: p.node.loc?.start.column\n          });\n        }\n        // Import de arquivo inexistente (só para caminhos relativos)\n        if (val.startsWith('.')) {\n          if (arquivosExistentes && !resolved.existe) {\n            ocorrencias.push({\n              tipo: 'erro',\n              mensagem: DetectorDependenciasMensagens.importArquivoInexistente(val),\n              relPath,\n              linha: p.node.loc?.start.line,\n              coluna: p.node.loc?.start.column\n            });\n          }\n        }\n        // Rastrear import names para heurística de uso dinâmico\n        const specifiers = p.node.specifiers || [];\n        for (const s of specifiers) {\n          if (s.type === 'ImportDefaultSpecifier' || s.type === 'ImportSpecifier') {\n            importsDeclarados.add(s.local.name);\n          } else if (s.type === 'ImportNamespaceSpecifier') {\n            importsDeclarados.add(s.local.name);\n          }\n        }\n      },\n      CallExpression(p: NodePath<t.CallExpression>) {\n        const {\n          callee,\n          arguments: args\n        } = p.node;\n        if (callee.type === 'Identifier' && callee.name === 'require' && args[0]?.type === 'StringLiteral') {\n          tiposImport.add('require');\n          const val = args[0].value;\n          const resolved = resolverModulo(val, relPath, arquivosExistentes);\n          // Alimenta grafo\n          if (!depsSet) {\n            depsSet = new Set<string>();\n            grafoDependencias.set(relPath, depsSet);\n          }\n          depsSet.add(resolved.key);\n          // Require externo\n          if (!val.startsWith('.') && !val.startsWith('/')) {\n            ocorrencias.push({\n              tipo: 'info',\n              mensagem: DetectorDependenciasMensagens.requireDependenciaExterna(val),\n              relPath,\n              linha: p.node.loc?.start.line,\n              coluna: p.node.loc?.start.column\n            });\n          }\n          // Require relativo longo\n          if (val.startsWith('.') && val.split('../').length > 3) {\n            ocorrencias.push({\n              tipo: 'aviso',\n              mensagem: DetectorDependenciasMensagens.requireRelativoLongo(val),\n              relPath,\n              linha: p.node.loc?.start.line,\n              coluna: p.node.loc?.start.column\n            });\n          }\n          // Require de .js em projeto TS\n          if (relPath.endsWith('.ts') && val.endsWith('.js') && !resolved.key.endsWith('.ts')) {\n            ocorrencias.push({\n              tipo: 'aviso',\n              mensagem: DetectorDependenciasMensagens.requireJsEmTs(val),\n              relPath,\n              linha: p.node.loc?.start.line,\n              coluna: p.node.loc?.start.column\n            });\n          }\n          // Require de arquivo inexistente (só para caminhos relativos)\n          if (val.startsWith('.')) {\n            if (arquivosExistentes && !resolved.existe) {\n              ocorrencias.push({\n                tipo: 'erro',\n                mensagem: DetectorDependenciasMensagens.requireArquivoInexistente(val),\n                relPath,\n                linha: p.node.loc?.start.line,\n                coluna: p.node.loc?.start.column\n              });\n            }\n          }\n        }\n      }\n    });\n\n    // Heurística: marcar imports como usados quando aparecem em registros dinâmicos comuns\n    if (importsDeclarados.size > 0) {\n      // Inicializa registro para este arquivo\n      let usadosDinamicos = importsUsadosDinamicamente.get(relPath);\n      for (const nome of Array.from(importsDeclarados)) {\n        const usado = isUsadoEmRegistroDinamico(src, nome);\n        if (usado) {\n          // Registra no mapa global para consulta por outros detectores\n          if (!usadosDinamicos) {\n            usadosDinamicos = new Set<string>();\n            importsUsadosDinamicamente.set(relPath, usadosDinamicos);\n          }\n          usadosDinamicos.add(nome);\n\n          // Emite info apenas em modo verbose (não polui relatórios normais)\n          if (config.VERBOSE) {\n            ocorrencias.push({\n              tipo: 'info',\n              mensagem: DetectorDependenciasMensagens.importUsadoRegistroDinamico(nome),\n              relPath\n            });\n          }\n        }\n      }\n    }\n\n    // Mistura de require/import\n    if (tiposImport.size > 1) {\n      ocorrencias.push({\n        tipo: 'aviso',\n        mensagem: DetectorDependenciasMensagens.usoMistoRequireImport,\n        relPath\n      });\n    }\n\n    // Detecta import circular simples (arquivo importa a si mesmo)\n    if (grafoDependencias.get(relPath)?.has(relPath)) {\n      ocorrencias.push({\n        tipo: 'alerta',\n        mensagem: DetectorDependenciasMensagens.importCircularSelf,\n        relPath\n      });\n    }\n\n    // Detecta ciclos mais complexos (A -> B -> C -> A)\n    const maxDepth = typeof (config as unknown as Record<string, unknown>).DEPENDENCIAS_MAX_PROFUNDIDADE === 'number' ? (config as unknown as {\n      DEPENDENCIAS_MAX_PROFUNDIDADE: number;\n    }).DEPENDENCIAS_MAX_PROFUNDIDADE : 5;\n    const ciclo = detectarCicloComplexo(relPath, grafoDependencias, maxDepth);\n    if (ciclo.length > 1) {\n      const verifyCycles = Boolean((config as unknown as Record<string, unknown>)['SPECIAL_VERIFY_CYCLES']);\n      if (verifyCycles && !verificarCicloConfirmado(ciclo, grafoDependencias, arquivosExistentes)) {\n        return Array.isArray(ocorrencias) ? ocorrencias : [];\n      }\n\n      // Apenas reporta se ciclo tem mais de 1 nó (evita falsos positivos)\n      // Remove caminhos base para deixar mais legível\n      const caminhoLimpo = ciclo.map(p => {\n        const relativo = path.relative(process.cwd(), p) || p;\n        return relativo.replace(/\\\\/g, '/');\n      });\n      const caminhoCompleto = caminhoLimpo.join(' → ');\n      ocorrencias.push({\n        tipo: 'alerta',\n        mensagem: DetectorDependenciasMensagens.dependenciaCircular(ciclo.length, caminhoCompleto),\n        relPath,\n        // Adiciona contexto extra para debugging\n        contexto: `Ciclo completo: ${caminhoCompleto}`\n      });\n    }\n    return Array.isArray(ocorrencias) ? ocorrencias : [];\n  }\n};"]}