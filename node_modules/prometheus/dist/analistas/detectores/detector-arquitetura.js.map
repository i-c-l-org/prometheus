{"version":3,"file":"detector-arquitetura.js","sourceRoot":"","sources":["../../../src/analistas/detectores/detector-arquitetura.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\nimport type { NodePath } from '@babel/traverse';\nimport type { ExportNamedDeclaration, ImportDeclaration, ImportDefaultSpecifier, ImportNamespaceSpecifier, ImportSpecifier, Node } from '@babel/types';\nimport { traverse } from '@core/config/traverse.js';\nimport * as path from 'path';\n\nimport type { AnaliseArquitetural, Analista, ContextoExecucao, EstatisticasArquivo, ExportInfo, ImportInfo, Ocorrencia, ReportEvent } from '@';\nimport { criarOcorrencia } from '@';\n\nexport const analistaArquitetura: Analista = {\n  nome: 'arquitetura',\n  categoria: 'estrutura',\n  descricao: 'Analisa padrões arquiteturais e detecta violações de design',\n  test: (relPath: string): boolean => {\n    return /\\.(js|jsx|ts|tsx|mjs|cjs)$/.test(relPath);\n  },\n  aplicar: async (src: string, relPath: string, ast: NodePath<Node> | null, fullCaminho?: string, contexto?: ContextoExecucao): Promise<Ocorrencia[]> => {\n    if (!ast || !src || !contexto) {\n      return [];\n    }\n    try {\n      // Analisar arquivo atual\n      const estatisticasArquivo = analisarArquivo(ast, relPath, src);\n\n      // Analisar todo o contexto para entender a arquitetura\n      let analiseCompleta: AnaliseArquitetural | undefined;\n      const ocorrencias: Ocorrencia[] = [];\n      try {\n        analiseCompleta = await analisarArquiteturaCompleta(contexto, estatisticasArquivo);\n      } catch (erro) {\n        // Em caso de falha na análise contextual, registre ocorrência e continue sem travar\n        if (typeof contexto.report === 'function') {\n          const ev: ReportEvent = {\n            code: 'ARQ_ERRO',\n            tipo: 'erro-analise',\n            nivel: 'aviso',\n            relPath,\n            linha: 1,\n            data: { erro },\n            origem: 'arquitetura'\n          };\n          try { contexto.report(ev); return []; } catch { }\n        }\n        const { DetectorArquiteturaMensagens } = await import(\n          '@core/messages/analistas/detector-arquitetura-messages.js'\n        );\n        return [criarOcorrencia({\n          tipo: 'erro-analise',\n          nivel: 'aviso',\n          mensagem: DetectorArquiteturaMensagens.erroAnalisarArquitetura(erro),\n          relPath,\n          linha: 1\n        })];\n      }\n\n      // Relatório principal da arquitetura\n      if (typeof contexto.report === 'function') {\n        const ev: ReportEvent = {\n          code: 'ARQ_PADRAO',\n          tipo: 'analise-arquitetura',\n          nivel: (analiseCompleta.violacoes?.length ?? 0) > 0 ? 'aviso' : 'info',\n          relPath,\n          linha: 1,\n          data: {\n            padraoIdentificado: analiseCompleta.padraoIdentificado,\n            confianca: analiseCompleta.confianca ?? 0\n          },\n          origem: 'arquitetura'\n        };\n        try { contexto.report(ev); } catch { /* fallback handled below */ }\n      } else {\n        const { DetectorArquiteturaMensagens } = await import(\n          '@core/messages/analistas/detector-arquitetura-messages.js'\n        );\n        ocorrencias.push(criarOcorrencia({\n          tipo: 'analise-arquitetura',\n          nivel: (analiseCompleta.violacoes?.length ?? 0) > 0 ? 'aviso' : 'info',\n          mensagem: DetectorArquiteturaMensagens.padraoArquitetural(analiseCompleta.padraoIdentificado, analiseCompleta.confianca ?? 0),\n          relPath,\n          linha: 1\n        }));\n      }\n\n      // Relatório de características\n      if ((analiseCompleta.caracteristicas?.length ?? 0) > 0) {\n        if (typeof contexto.report === 'function') {\n          const ev: ReportEvent = {\n            code: 'ARQ_CARACTERISTICAS',\n            tipo: 'caracteristicas-arquitetura',\n            nivel: 'info',\n            relPath,\n            linha: 1,\n            data: { caracteristicas: analiseCompleta.caracteristicas || [] },\n            origem: 'arquitetura'\n          };\n          try { contexto.report(ev); } catch { /* fallback handled below */ }\n        } else {\n          const { DetectorArquiteturaMensagens } = await import(\n            '@core/messages/analistas/detector-arquitetura-messages.js'\n          );\n          ocorrencias.push(criarOcorrencia({\n            tipo: 'caracteristicas-arquitetura',\n            nivel: 'info',\n            mensagem: DetectorArquiteturaMensagens.caracteristicas(analiseCompleta.caracteristicas || []),\n            relPath,\n            linha: 1\n          }));\n        }\n      }\n\n      // Relatório de violações\n      for (const violacao of (analiseCompleta.violacoes ?? []).slice(0, 3)) {\n        if (typeof contexto.report === 'function') {\n          const ev: ReportEvent = {\n            code: 'ARQ_VIOLACAO',\n            tipo: 'violacao-arquitetura',\n            nivel: 'aviso',\n            relPath,\n            linha: 1,\n            data: { violacao },\n            origem: 'arquitetura'\n          };\n          try { contexto.report(ev); } catch { /* fallback handled below */ }\n        } else {\n          const { DetectorArquiteturaMensagens } = await import(\n            '@core/messages/analistas/detector-arquitetura-messages.js'\n          );\n          ocorrencias.push(criarOcorrencia({\n            tipo: 'violacao-arquitetura',\n            nivel: 'aviso',\n            mensagem: DetectorArquiteturaMensagens.violacao(violacao),\n            relPath,\n            linha: 1\n          }));\n        }\n      }\n\n      // Métricas de qualidade\n      const metricas = analiseCompleta.metricas;\n      if (metricas && typeof metricas === 'object' && 'acoplamento' in metricas && 'coesao' in metricas) {\n        if ((metricas.acoplamento ?? 0) > 0.7 || (metricas.coesao ?? 1) < 0.3) {\n          if (typeof contexto.report === 'function') {\n            const ev: ReportEvent = {\n              code: 'ARQ_METRICAS',\n              tipo: 'metricas-arquitetura',\n              nivel: 'aviso',\n              relPath,\n              linha: 1,\n              data: {\n                acoplamento: metricas.acoplamento ?? 0,\n                coesao: metricas.coesao ?? 0\n              },\n              origem: 'arquitetura'\n            };\n            try { contexto.report(ev); } catch { /* fallback handled below */ }\n          } else {\n            const { DetectorArquiteturaMensagens } = await import(\n              '@core/messages/analistas/detector-arquitetura-messages.js'\n            );\n            ocorrencias.push(criarOcorrencia({\n              tipo: 'metricas-arquitetura',\n              nivel: 'aviso',\n              mensagem: DetectorArquiteturaMensagens.metricas(metricas.acoplamento ?? 0, metricas.coesao ?? 0),\n              relPath,\n              linha: 1\n            }));\n          }\n        }\n      }\n      return ocorrencias;\n    } catch (erro) {\n      if (typeof contexto.report === 'function') {\n        const ev: ReportEvent = {\n          code: 'ARQ_ERRO',\n          tipo: 'erro-analise',\n          nivel: 'aviso',\n          relPath,\n          linha: 1,\n          data: { erro },\n          origem: 'arquitetura'\n        };\n        try { contexto.report(ev); return []; } catch { }\n      }\n      const { DetectorArquiteturaMensagens } = await import(\n        '@core/messages/analistas/detector-arquitetura-messages.js'\n      );\n      return [criarOcorrencia({\n        tipo: 'erro-analise',\n        nivel: 'aviso',\n        mensagem: DetectorArquiteturaMensagens.erroAnalisarArquitetura(erro),\n        relPath,\n        linha: 1\n      })];\n    }\n  }\n};\nfunction analisarArquivo(ast: NodePath<Node>, relPath: string, _src: string): EstatisticasArquivo {\n  const imports: ImportInfo[] = [];\n  const exports: ExportInfo[] = [];\n  const dependenciasExternas: string[] = [];\n  const dependenciasInternas: string[] = [];\n  const aliases: Record<string, number> = {};\n  let complexidade = 0;\n  traverse(ast.node, {\n    ImportDeclaration(path: NodePath<ImportDeclaration>) {\n      const origem = path.node.source.value;\n      const items = path.node.specifiers.map((spec: ImportSpecifier | ImportDefaultSpecifier | ImportNamespaceSpecifier) => {\n        // Mixed import specifier types\n        if (spec.type === 'ImportDefaultSpecifier') return 'default';\n        if (spec.type === 'ImportNamespaceSpecifier') return '*';\n        return spec.local.name;\n      });\n      let tipo: ImportInfo['tipo'] = 'external';\n      if (origem.startsWith('@')) {\n        tipo = 'alias';\n        const alias = origem.split('/')[0];\n        aliases[alias] = (aliases[alias] || 0) + 1;\n        dependenciasInternas.push(origem);\n      } else if (origem.startsWith('.')) {\n        tipo = 'relative';\n        dependenciasInternas.push(origem);\n      } else {\n        dependenciasExternas.push(origem);\n      }\n      imports.push({\n        origem,\n        tipo,\n        items\n      });\n    },\n    ExportNamedDeclaration(path: NodePath<ExportNamedDeclaration>) {\n      if (path.node.declaration) {\n        // export const/function/class/etc\n        const decl = path.node.declaration; // ExportDeclaration node\n        if ('id' in decl && decl.id && 'name' in decl.id) {\n          exports.push({\n            nome: decl.id.name as string,\n            tipo: 'named'\n          });\n        } else if ('declarations' in decl && decl.declarations) {\n          // export const a = ..., b = ...\n          for (const declarator of decl.declarations) {\n            if (declarator.id && 'name' in declarator.id) {\n              exports.push({\n                nome: declarator.id.name as string,\n                tipo: 'named'\n              });\n            }\n          }\n        }\n      } else {\n        // export { a, b }\n        for (const spec of path.node.specifiers) {\n          // ExportSpecifier nodes\n          const name = 'exported' in spec && spec.exported.type === 'Identifier' && 'name' in spec.exported ? spec.exported.name as string : 'exported';\n          exports.push({\n            nome: name,\n            tipo: 'named'\n          });\n        }\n      }\n    },\n    ExportDefaultDeclaration() {\n      exports.push({\n        nome: 'default',\n        tipo: 'default'\n      });\n    },\n    // Calcular complexidade ciclomática básica\n    'IfStatement|WhileStatement|ForStatement|DoWhileStatement|SwitchCase|CatchClause'() {\n      complexidade++;\n    },\n    'ConditionalExpression|LogicalExpression'() {\n      complexidade++;\n    }\n  });\n  return {\n    caminho: relPath,\n    imports,\n    exports,\n    dependenciasExternas,\n    dependenciasInternas,\n    aliases,\n    complexidade: complexidade || 1\n  };\n}\nasync function analisarArquiteturaCompleta(contexto: ContextoExecucao, arquivoAtual: EstatisticasArquivo): Promise<AnaliseArquitetural> {\n  // Analisar todos os arquivos para entender a arquitetura geral\n  const todasEstatisticas: EstatisticasArquivo[] = [];\n  for (const arquivo of contexto.arquivos.slice(0, 50)) {\n    // Limitar para performance\n    if (arquivo.ast && arquivo.content && arquivo.relPath.match(/\\.(js|jsx|ts|tsx)$/)) {\n      // Verificar se o AST é do tipo correto (NodePath<Node>)\n      if ('parent' in arquivo.ast && 'node' in arquivo.ast) {\n        const stats = analisarArquivo(arquivo.ast as NodePath<Node>, arquivo.relPath, arquivo.content);\n        todasEstatisticas.push(stats);\n      }\n    }\n  }\n  todasEstatisticas.push(arquivoAtual);\n\n  // Detectar padrão arquitetural\n  const padraoDetectado = detectarPadraoArquitetural(todasEstatisticas);\n\n  // Calcular métricas\n  const metricas = calcularMetricas(todasEstatisticas);\n\n  // Detectar violações\n  const violacoes = detectarViolacoes(todasEstatisticas, padraoDetectado);\n\n  // Gerar características\n  const caracteristicas = gerarCaracteristicas(todasEstatisticas);\n  return {\n    padraoIdentificado: padraoDetectado.tipo,\n    confianca: padraoDetectado.confianca,\n    caracteristicas,\n    violacoes,\n    recomendacoes: [],\n    metricas,\n    imports: [],\n    // Propriedade obrigatória do tipo AnaliseArquitetural\n    exports: [],\n    // Propriedade obrigatória do tipo AnaliseArquitetural\n    stats: arquivoAtual // Propriedade obrigatória do tipo AnaliseArquitetural\n  };\n}\nfunction detectarPadraoArquitetural(estatisticas: EstatisticasArquivo[]): {\n  tipo: string;\n  confianca: number;\n} {\n  const aliases = new Set<string>();\n  let temNucleo = false;\n  let temAnalistas = false;\n  let _temCLI = false;\n  let temShared = false;\n  let temTipos = false;\n\n  // Analisar uso de aliases\n  for (const stats of estatisticas) {\n    if (stats.aliases) {\n      Object.keys(stats.aliases).forEach(alias => aliases.add(alias));\n      if (stats.aliases['@nucleo']) temNucleo = true;\n      if (stats.aliases['@analistas']) temAnalistas = true;\n      if (stats.aliases['@cli']) _temCLI = true;\n      if (stats.aliases['@shared']) temShared = true;\n      if (stats.aliases['@types']) temTipos = true;\n    }\n  }\n\n  // Detectar dependências circulares\n  const temDependenciasCirculares = detectarDependenciasCirculares(estatisticas);\n\n  // Regras de detecção\n  if (temNucleo && temAnalistas && !temDependenciasCirculares) {\n    if (temShared && temTipos) {\n      return {\n        tipo: 'Arquitetura Hexagonal com Clean Architecture',\n        confianca: 90\n      };\n    }\n    return {\n      tipo: 'Arquitetura Hexagonal (Ports and Adapters)',\n      confianca: 85\n    };\n  }\n  if (aliases.size >= 4 && temTipos) {\n    return {\n      tipo: 'Arquitetura Modular Bem Estruturada',\n      confianca: 80\n    };\n  }\n  if (aliases.size >= 2) {\n    return {\n      tipo: 'Arquitetura Modular',\n      confianca: 70\n    };\n  }\n  if (temDependenciasCirculares) {\n    return {\n      tipo: 'Arquitetura com Problemas de Acoplamento',\n      confianca: 60\n    };\n  }\n  return {\n    tipo: 'Arquitetura Simples ou Monolítica',\n    confianca: 50\n  };\n}\nfunction calcularMetricas(estatisticas: EstatisticasArquivo[]): AnaliseArquitetural['metricas'] {\n  if (estatisticas.length === 0) {\n    return {\n      modularidade: 0,\n      acoplamento: 0,\n      coesao: 0,\n      complexidadeMedia: 0\n    };\n  }\n\n  // Modularidade = uso de aliases / total de imports\n  const totalImports = estatisticas.reduce((sum, s) => {\n    if (Array.isArray(s.imports)) {\n      return sum + s.imports.length;\n    } else if (typeof s.imports === 'number') {\n      return sum + s.imports;\n    }\n    return sum;\n  }, 0);\n  const importsAlias = estatisticas.reduce((sum, s) => {\n    if (Array.isArray(s.imports)) {\n      return sum + s.imports.filter((i: ImportInfo) => i.tipo === 'alias').length;\n    }\n    return sum;\n  }, 0);\n  const modularidade = totalImports > 0 ? importsAlias / totalImports : 0;\n\n  // Acoplamento = dependências externas / total de dependências\n  const totalDeps = estatisticas.reduce((sum, s) => {\n    const externas = s.dependenciasExternas?.length ?? 0;\n    const internas = s.dependenciasInternas?.length ?? 0;\n    return sum + externas + internas;\n  }, 0);\n  const depsExternas = estatisticas.reduce((sum, s) => {\n    return sum + (s.dependenciasExternas?.length ?? 0);\n  }, 0);\n  const acoplamento = totalDeps > 0 ? depsExternas / totalDeps : 0;\n\n  // Coesão = exports / imports (simplificado)\n  const totalExports = estatisticas.reduce((sum, s) => {\n    if (Array.isArray(s.exports)) {\n      return sum + s.exports.length;\n    } else if (typeof s.exports === 'number') {\n      return sum + s.exports;\n    }\n    return sum;\n  }, 0);\n  const coesao = totalImports > 0 ? Math.min(totalExports / totalImports, 1) : 0;\n\n  // Complexidade média\n  const complexidadeMedia = estatisticas.reduce((sum, s) => sum + (s.complexidade ?? 0), 0) / estatisticas.length;\n  return {\n    modularidade: Math.max(0, Math.min(1, modularidade)),\n    acoplamento: Math.max(0, Math.min(1, acoplamento)),\n    coesao: Math.max(0, Math.min(1, coesao)),\n    complexidadeMedia\n  };\n}\nfunction detectarViolacoes(estatisticas: EstatisticasArquivo[], _padrao: {\n  tipo: string;\n  confianca: number;\n}): string[] {\n  const violacoes: string[] = [];\n\n  // Detectar imports relativos excessivos\n  const totalImports = estatisticas.reduce((sum, s) => {\n    if (Array.isArray(s.imports)) {\n      return sum + s.imports.length;\n    } else if (typeof s.imports === 'number') {\n      return sum + s.imports;\n    }\n    return sum;\n  }, 0);\n  const importsRelativos = estatisticas.reduce((sum, s) => {\n    if (Array.isArray(s.imports)) {\n      return sum + s.imports.filter((i: ImportInfo) => i.tipo === 'relative').length;\n    }\n    return sum;\n  }, 0);\n  if (totalImports > 0 && importsRelativos / totalImports > 0.3) {\n    violacoes.push('Uso excessivo de imports relativos (>30%)');\n  }\n\n  // Detectar arquivos com muitas dependências\n  for (const stats of estatisticas) {\n    const importsContagem = Array.isArray(stats.imports) ? stats.imports.length : typeof stats.imports === 'number' ? stats.imports : 0;\n    if (importsContagem > 20) {\n      const caminho = stats.caminho ?? 'arquivo-desconhecido';\n      violacoes.push(`Arquivo ${path.basename(caminho)} com muitas dependências (${importsContagem})`);\n    }\n  }\n  return violacoes;\n}\nfunction gerarCaracteristicas(estatisticas: EstatisticasArquivo[]): string[] {\n  const caracteristicas: string[] = [];\n  const aliases = new Set<string>();\n  estatisticas.forEach(s => {\n    if (s.aliases) {\n      Object.keys(s.aliases).forEach(a => aliases.add(a));\n    }\n  });\n  if (aliases.size > 0) {\n    caracteristicas.push(`Uso de ${aliases.size} aliases de importação`);\n  }\n  const mediaComplexidade = estatisticas.reduce((sum, s) => sum + (s.complexidade ?? 0), 0) / estatisticas.length;\n  caracteristicas.push(`Complexidade média: ${mediaComplexidade.toFixed(1)}`);\n  const totalExports = estatisticas.reduce((sum, s) => {\n    if (Array.isArray(s.exports)) {\n      return sum + s.exports.length;\n    } else if (typeof s.exports === 'number') {\n      return sum + s.exports;\n    }\n    return sum;\n  }, 0);\n  caracteristicas.push(`${totalExports} exports públicos`);\n  return caracteristicas;\n}\nfunction detectarDependenciasCirculares(estatisticas: EstatisticasArquivo[]): boolean {\n  // Simplificado: detectar se há imports bidirecionais\n  const dependencias = new Map<string, Set<string>>();\n  for (const stats of estatisticas) {\n    const caminho = stats.caminho ?? 'arquivo-desconhecido';\n    const deps = new Set<string>();\n    if (stats.dependenciasInternas) {\n      stats.dependenciasInternas.forEach(dep => deps.add(dep));\n    }\n    dependencias.set(caminho, deps);\n  }\n\n  // Verificar ciclos simples (A -> B -> A)\n  for (const [arquivo, deps] of dependencias) {\n    for (const dep of deps) {\n      const depsDoDepdep = dependencias.get(dep);\n      if (depsDoDepdep?.has(arquivo)) {\n        return true;\n      }\n    }\n  }\n  return false;\n}"]}