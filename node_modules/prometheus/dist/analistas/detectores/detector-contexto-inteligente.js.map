{"version":3,"file":"detector-contexto-inteligente.js","sourceRoot":"","sources":["../../../src/analistas/detectores/detector-contexto-inteligente.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\n/**\n * Sistema Inteligente de Detec√ß√£o de Arqu√©tipos por Contexto\n *\n * Combina m√∫ltiplas evid√™ncias para inferir corretamente o tipo de projeto:\n * - An√°lise de depend√™ncias (package.json)\n * - Padr√µes de c√≥digo (imports, exports, funcionalidades)\n * - Estrutura de arquivos e nomenclatura\n * - Configura√ß√µes espec√≠ficas de tecnologia\n * - Contexto de execu√ß√£o e entry points\n */\n\nimport type { NodePath } from '@babel/traverse';\nimport type { ExportDeclaration, ImportDeclaration, Program } from '@babel/types';\nimport { config } from '@core/config/config.js';\nimport { traverse } from '@core/config/traverse.js';\n\nimport type { ContextoExecucao, EvidenciaContexto, FileEntryWithAst, PackageJson, ReportEvent,ResultadoDeteccaoContextual } from '@';\n\n// Re-exporta os tipos para compatibilidade\nexport type { EvidenciaContexto, ResultadoDeteccaoContextual };\n\n/**\n * Padr√µes espec√≠ficos de detec√ß√£o por tecnologia\n */\nconst PADROES_TECNOLOGIA = {\n  'discord-bot': {\n    dependencias: ['discord.js', '@discordjs/builders', '@discordjs/rest'],\n    imports: ['discord.js', 'discord-api-types'],\n    exports: [],\n    estrutura: ['commands', 'events', 'handlers'],\n    configs: ['bot.js', 'bot.ts', 'config/bot'],\n    scripts: ['start:bot', 'dev:bot'],\n    codigoPatterns: [/Client\\(\\s*\\{[\\s\\S]*intents/i, /\\.login\\s*\\(\\s*process\\.env/i, /interaction\\.reply/i, /message\\.reply/i],\n    // Sinais que indicam que N√ÉO √© um bot Discord (√© uma CLI)\n    antiPatterns: [/new\\s+Command\\(/i,\n    // Commander.js\n    /program\\.parse/i,\n    // CLI parsing\n    /\\.option\\s*\\(/i,\n    // CLI options\n    /bin\\/index\\.(js|ts)/i // Binary entry point\n    ]\n  },\n  'telegram-bot': {\n    dependencias: ['telegraf', 'grammy', 'node-telegram-bot-api'],\n    imports: ['telegraf', 'grammy'],\n    exports: [],\n    estrutura: ['scenes', 'handlers', 'middleware'],\n    configs: ['bot.js', 'bot.ts'],\n    scripts: ['start:bot'],\n    codigoPatterns: [/new\\s+Telegraf/i, /bot\\.command/i, /ctx\\.reply/i, /\\.telegram\\.sendMessage/i],\n    // Sinais que indicam que N√ÉO √© um bot Telegram\n    antiPatterns: [/new\\s+Command\\(/i, /program\\.parse/i, /\\.option\\s*\\(/i, /bin\\/index\\.(js|ts)/i]\n  },\n  'express-api': {\n    dependencias: ['express', 'cors', 'helmet', 'joi', 'swagger', 'express-validator', 'multer', 'compression'],\n    imports: ['express', 'cors', 'helmet', 'body-parser', 'cookie-parser'],\n    exports: ['app', 'server', 'router'],\n    estrutura: ['routes', 'controllers', 'middleware', 'models', 'services', 'utils', 'config'],\n    configs: ['server.js', 'app.js', 'index.js', 'src/server.js', 'src/app.js'],\n    scripts: ['start', 'dev', 'serve', 'test'],\n    codigoPatterns: [/express\\(\\)/i, /app\\.use\\(/i, /app\\.(get|post|put|delete|patch)\\(/i, /res\\.(json|send|status|sendStatus)/i, /req\\.(body|params|query|headers)/i, /router\\.(get|post|put|delete)/i, /middleware/i, /cors\\(/i, /helmet\\(/i],\n    antiPatterns: []\n  },\n  'fastify-api': {\n    dependencias: ['fastify', '@fastify/cors', '@fastify/helmet', '@fastify/jwt', '@fastify/rate-limit', '@fastify/swagger'],\n    imports: ['fastify', '@fastify/cors', '@fastify/helmet'],\n    exports: ['app', 'server', 'fastify'],\n    estrutura: ['routes', 'plugins', 'handlers', 'schemas', 'services', 'utils'],\n    configs: ['server.js', 'app.js', 'index.js', 'src/server.js', 'src/app.js'],\n    scripts: ['start', 'dev', 'serve', 'test'],\n    codigoPatterns: [/fastify\\(\\)/i, /\\.register\\(/i, /reply\\.(send|code)/i, /\\.listen\\(\\s*\\d+/i, /fastify\\.(get|post|put|delete|patch)/i, /request\\.(body|params|query|headers)/i, /addHook/i, /setValidatorCompiler/i, /setSerializerCompiler/i],\n    antiPatterns: []\n  },\n  'cli-modular': {\n    dependencias: ['commander', 'yargs', 'inquirer', 'chalk', 'ora', 'prompts'],\n    imports: ['commander', 'yargs', 'inquirer'],\n    exports: [],\n    estrutura: ['cli', 'cli/commands', 'bin', 'commands'],\n    configs: ['cli.js', 'cli.ts', 'bin/', 'bin/index.js', 'bin/index.ts'],\n    scripts: ['build', 'start', 'dev'],\n    codigoPatterns: [/new\\s+Command\\(/i, /\\.command\\s*\\(/i, /\\.option\\s*\\(/i, /process\\.argv/i, /\\.parse\\s*\\(/i, /\\.action\\s*\\(/i, /\\.version\\s*\\(/i, /\\.description\\s*\\(/i],\n    // Sinais que indicam que N√ÉO √© um bot\n    antiPatterns: [/Client\\(\\s*\\{[\\s\\S]*intents/i,\n    // Discord client\n    /new\\s+Telegraf/i,\n    // Telegram bot\n    /bot\\.command/i,\n    // Bot commands\n    /interaction\\.reply/i,\n    // Discord interactions\n    /ctx\\.reply/i // Telegram context\n    ]\n  },\n  'electron-app': {\n    dependencias: ['electron', 'electron-builder', 'electron-updater'],\n    imports: ['electron'],\n    exports: [],\n    estrutura: ['src/main', 'src/renderer', 'src/preload'],\n    configs: ['main.js', 'main.ts', 'electron.js'],\n    scripts: ['electron', 'build:electron', 'pack'],\n    codigoPatterns: [/new\\s+BrowserWindow/i, /app\\.whenReady/i, /ipcMain\\.handle/i, /contextBridge\\.exposeInMainWorld/i],\n    antiPatterns: []\n  },\n  'next-fullstack': {\n    dependencias: ['next', 'react', 'react-dom', '@types/react', '@types/node', 'typescript'],\n    imports: ['next', 'react', 'next/router', 'next/link', 'next/head'],\n    exports: [],\n    estrutura: ['pages', 'app', 'api', 'components', 'lib', 'utils', 'styles', 'public', 'prisma'],\n    configs: ['next.config.js', 'next.config.ts', 'next.config.mjs', 'next-env.d.ts', 'tailwind.config.js'],\n    scripts: ['dev', 'build', 'start', 'lint', 'type-check'],\n    codigoPatterns: [/export\\s+default\\s+function.*Page/i, /getServerSideProps/i, /getStaticProps/i, /getStaticPaths/i, /NextApiRequest/i, /NextApiResponse/i, /useRouter/i, /next\\/head/i, /next\\/link/i, /export\\s+default\\s+function\\s+Page/i,\n    // App Router\n    /export\\s+default\\s+function\\s+Layout/i,\n    // App Router Layout\n    /export\\s+default\\s+function\\s+Loading/i,\n    // App Router Loading\n    /export\\s+default\\s+function\\s+Error/i,\n    // App Router Error\n    /export\\s+default\\s+function\\s+NotFound/i,\n    // App Router Not Found\n    /metadata\\s*=/i,\n    // App Router metadata\n    /generateStaticParams/i,\n    // App Router static generation\n    /generateMetadata/i // App Router metadata generation\n    ],\n    antiPatterns: []\n  },\n  'react-spa': {\n    dependencias: ['react', 'react-dom', 'react-router', 'vite'],\n    imports: ['react', 'react-dom'],\n    exports: [],\n    estrutura: ['src/components', 'src/pages', 'src/hooks'],\n    configs: ['vite.config.js', 'webpack.config.js'],\n    scripts: ['dev', 'build', 'preview'],\n    codigoPatterns: [/ReactDOM\\.render/i, /createRoot/i, /useState/i, /useEffect/i],\n    antiPatterns: []\n  },\n  'nest-api': {\n    dependencias: ['@nestjs/core', '@nestjs/common', '@nestjs/platform-express'],\n    imports: ['@nestjs/core', '@nestjs/common'],\n    exports: [],\n    estrutura: ['src/modules', 'src/controllers', 'src/services'],\n    configs: ['main.ts', 'app.module.ts'],\n    scripts: ['start', 'start:dev', 'build'],\n    codigoPatterns: [/@Controller\\(/i, /@Injectable\\(/i, /@Module\\(/i, /NestFactory\\.create/i],\n    antiPatterns: []\n  },\n  'koa-api': {\n    dependencias: ['koa', 'koa-router', 'koa-cors', 'koa-helmet', 'koa-bodyparser'],\n    imports: ['koa', 'koa-router', 'koa-cors', 'koa-helmet'],\n    exports: ['app', 'server'],\n    estrutura: ['routes', 'controllers', 'middleware', 'models', 'services'],\n    configs: ['server.js', 'app.js', 'index.js'],\n    scripts: ['start', 'dev', 'serve'],\n    codigoPatterns: [/new\\s+Koa\\(\\)/i, /app\\.use\\(/i, /router\\.(get|post|put|delete)/i, /ctx\\.(body|status|set)/i, /next\\(\\)/i, /middleware/i],\n    antiPatterns: []\n  },\n  'hapi-api': {\n    dependencias: ['@hapi/hapi', 'joi', 'boom'],\n    imports: ['@hapi/hapi', 'joi', 'boom'],\n    exports: ['server', 'routes'],\n    estrutura: ['routes', 'controllers', 'plugins', 'models'],\n    configs: ['server.js', 'index.js'],\n    scripts: ['start', 'dev', 'serve'],\n    codigoPatterns: [/Hapi\\.server/i, /server\\.route/i, /handler:\\s*async/i, /request\\.(payload|params|query)/i, /h\\.response/i, /Joi\\.object/i],\n    antiPatterns: []\n  },\n  'serverless-api': {\n    dependencias: ['serverless', 'serverless-offline', '@types/aws-lambda', 'aws-sdk'],\n    imports: ['aws-lambda', 'aws-sdk'],\n    exports: ['handler'],\n    estrutura: ['src/handlers', 'src/functions', 'src/lib'],\n    configs: ['serverless.yml', 'serverless.ts'],\n    scripts: ['deploy', 'offline', 'invoke'],\n    codigoPatterns: [/exports\\.handler/i, /APIGatewayProxyEvent/i, /APIGatewayProxyResult/i, /Context/i, /Callback/i, /async\\s+\\(event/i],\n    antiPatterns: []\n  },\n  'vue-spa': {\n    dependencias: ['vue', '@vue/cli-service', 'vue-router', 'vuex', 'pinia'],\n    imports: ['vue', 'vue-router', 'vuex', 'pinia'],\n    exports: [],\n    estrutura: ['src/components', 'src/views', 'src/router', 'src/store', 'src/composables', 'public'],\n    configs: ['vue.config.js', 'vue.config.ts'],\n    scripts: ['serve', 'build', 'lint'],\n    codigoPatterns: [/createApp\\(/i, /<template>/i, /<script>/i, /<style/i, /defineComponent/i, /setup\\(\\)/i, /ref\\(/i, /reactive\\(/i, /computed\\(/i, /watch\\(/i, /onMounted/i, /onUnmounted/i],\n    antiPatterns: []\n  },\n  'nuxt-app': {\n    dependencias: ['nuxt', 'nuxt3', '@nuxt/devtools', '@nuxtjs/tailwindcss'],\n    imports: ['nuxt', '@nuxt/kit'],\n    exports: [],\n    estrutura: ['pages', 'components', 'layouts', 'plugins', 'middleware', 'composables', 'server/api'],\n    configs: ['nuxt.config.js', 'nuxt.config.ts'],\n    scripts: ['dev', 'build', 'generate', 'preview'],\n    codigoPatterns: [/defineNuxtConfig/i, /useHead/i, /useState/i, /useFetch/i, /useAsyncData/i, /navigateTo/i, /<NuxtPage/i, /<NuxtLink/i, /definePageMeta/i, /server\\/api/i],\n    antiPatterns: []\n  },\n  'vite-vue': {\n    dependencias: ['vue', 'vite', '@vitejs/plugin-vue', 'vue-router', 'pinia'],\n    imports: ['vue', 'vite', '@vitejs/plugin-vue'],\n    exports: [],\n    estrutura: ['src/components', 'src/views', 'src/router', 'src/stores', 'src/composables', 'src/assets'],\n    configs: ['vite.config.js', 'vite.config.ts', 'index.html'],\n    scripts: ['dev', 'build', 'preview'],\n    codigoPatterns: [/createApp\\(/i, /<template>/i, /<script setup/i, /<style scoped/i, /defineComponent/i, /setup\\(\\)/i, /ref\\(/i, /reactive\\(/i, /computed\\(/i],\n    antiPatterns: []\n  }\n};\nfunction analisarDependencias(packageJson?: PackageJson): EvidenciaContexto[] {\n  const evidencias: EvidenciaContexto[] = [];\n  if (!packageJson) return evidencias;\n  const deps = {\n    ...(packageJson.dependencies as Record<string, string> || {}),\n    ...(packageJson.devDependencies as Record<string, string> || {})\n  };\n  if (config.VERBOSE) {\n    console.log('üîç Analisando depend√™ncias:', Object.keys(deps));\n  }\n  for (const [tecnologia, padroes] of Object.entries(PADROES_TECNOLOGIA)) {\n    for (const dep of padroes.dependencias) {\n      if (deps[dep]) {\n        evidencias.push({\n          tipo: 'dependencia',\n          valor: dep,\n          confianca: 0.8,\n          tecnologia,\n          localizacao: 'package.json'\n        });\n      }\n    }\n  }\n  return evidencias;\n}\nfunction analisarScripts(packageJson?: PackageJson): EvidenciaContexto[] {\n  const evidencias: EvidenciaContexto[] = [];\n  if (!packageJson) return evidencias;\n  const scripts = packageJson.scripts as Record<string, string> || {};\n  for (const [tecnologia, padroes] of Object.entries(PADROES_TECNOLOGIA)) {\n    for (const script of padroes.scripts) {\n      if (Object.keys(scripts).some(key => key.includes(script) || scripts[key]?.includes(script))) {\n        evidencias.push({\n          tipo: 'script',\n          valor: script,\n          confianca: 0.6,\n          tecnologia,\n          localizacao: 'package.json'\n        });\n      }\n    }\n  }\n  return evidencias;\n}\nfunction analisarEstrutura(estruturaDetectada: string[]): EvidenciaContexto[] {\n  const evidencias: EvidenciaContexto[] = [];\n  for (const [tecnologia, padroes] of Object.entries(PADROES_TECNOLOGIA)) {\n    for (const estrutura of padroes.estrutura) {\n      // Verifica√ß√£o mais rigorosa para evitar falsos positivos\n      const matchExato = estruturaDetectada.find(dir => {\n        // Match exato do caminho\n        if (dir === estrutura) return true;\n\n        // Match no final do caminho (ex: src/cli/commands matcheia 'commands')\n        if (dir.endsWith(`/${estrutura}`)) return true;\n\n        // Match no in√≠cio seguido de / (ex: commands/subdir matcheia 'commands')\n        if (dir.startsWith(`${estrutura}/`)) return true;\n\n        // Para padr√µes que incluem /, verificar match rigoroso de subcaminho\n        if (estrutura.includes('/')) {\n          // Normalizar separadores para compara√ß√£o\n          const estruturaNorm = estrutura.replace(/\\\\/g, '/');\n          const dirNorm = dir.replace(/\\\\/g, '/');\n\n          // Verificar se √© subcaminho exato\n          if (dirNorm === estruturaNorm) return true;\n          if (dirNorm.endsWith(`/${estruturaNorm}`)) return true;\n          if (dirNorm.startsWith(`${estruturaNorm}/`)) return true;\n        }\n        return false;\n      });\n      if (matchExato) {\n        evidencias.push({\n          tipo: 'estrutura',\n          valor: estrutura,\n          confianca: 0.7,\n          tecnologia,\n          localizacao: matchExato\n        });\n      }\n    }\n  }\n  return evidencias;\n}\nfunction analisarImportsExports(arquivos: FileEntryWithAst[]): EvidenciaContexto[] {\n  const evidencias: EvidenciaContexto[] = [];\n  for (const arquivo of arquivos) {\n    if (!arquivo.ast || !('node' in arquivo.ast) || !arquivo.ast.node || arquivo.ast.node.type !== 'Program') continue;\n    const programa = arquivo.ast.node as Program;\n    const imports: string[] = [];\n    const exports: string[] = [];\n    traverse(programa, {\n      ImportDeclaration(path: NodePath<ImportDeclaration>) {\n        const node = path.node;\n        if (typeof node.source.value === 'string') {\n          imports.push(node.source.value);\n        }\n      },\n      ExportDeclaration(path: NodePath<ExportDeclaration>) {\n        const node = path.node as ExportDeclaration;\n        // Analisa exports nomeados e padr√£o\n        if ('declaration' in node && node.declaration) {\n          if ('id' in node.declaration && node.declaration.id && 'name' in node.declaration.id) {\n            exports.push(node.declaration.id.name as string);\n          }\n        }\n      }\n    });\n\n    // Verifica evid√™ncias nos imports\n    for (const [tecnologia, padroes] of Object.entries(PADROES_TECNOLOGIA)) {\n      for (const importEsperado of padroes.imports) {\n        if (imports.some(imp => imp.includes(importEsperado))) {\n          evidencias.push({\n            tipo: 'import',\n            valor: importEsperado,\n            confianca: 0.9,\n            tecnologia,\n            localizacao: arquivo.relPath\n          });\n        }\n      }\n      for (const exportEsperado of padroes.exports) {\n        if (exports.some(exp => exp.includes(exportEsperado))) {\n          evidencias.push({\n            tipo: 'export',\n            valor: exportEsperado,\n            confianca: 0.8,\n            tecnologia,\n            localizacao: arquivo.relPath\n          });\n        }\n      }\n    }\n  }\n  return evidencias;\n}\nfunction analisarPadroesCodigo(arquivos: FileEntryWithAst[]): EvidenciaContexto[] {\n  const evidencias: EvidenciaContexto[] = [];\n  for (const arquivo of arquivos) {\n    if (!arquivo.content) continue;\n    for (const [tecnologia, padroes] of Object.entries(PADROES_TECNOLOGIA)) {\n      for (const pattern of padroes.codigoPatterns) {\n        if (pattern.test(arquivo.content)) {\n          evidencias.push({\n            tipo: 'codigo',\n            valor: pattern.source,\n            confianca: 0.85,\n            tecnologia,\n            localizacao: arquivo.relPath\n          });\n        }\n      }\n    }\n  }\n  return evidencias;\n}\n\n/**\n * Verifica se anti-patterns est√£o presentes no c√≥digo\n * Anti-patterns indicam que a tecnologia detectada est√° INCORRETA\n */\nfunction verificarAntiPatterns(arquivos: FileEntryWithAst[], tecnologia: string): boolean {\n  const padraoTecnologia = PADROES_TECNOLOGIA[tecnologia as keyof typeof PADROES_TECNOLOGIA];\n  if (!padraoTecnologia || !padraoTecnologia.antiPatterns) {\n    return false; // Sem anti-patterns definidos\n  }\n  for (const arquivo of arquivos) {\n    if (!arquivo.content) continue;\n\n    // Se encontrar qualquer anti-pattern, retorna true (detec√ß√£o incorreta)\n    for (const antiPadrao of padraoTecnologia.antiPatterns) {\n      if (antiPadrao.test(arquivo.content)) {\n        return true; // Anti-pattern encontrado!\n      }\n    }\n  }\n  return false; // Nenhum anti-pattern encontrado\n}\nfunction gerarSugestoesMelhoria(tecnologia: string, evidencias: EvidenciaContexto[]): string[] {\n  const sugestoes: string[] = [];\n  const _arquivosEncontrados = evidencias.map(e => e.localizacao).filter(Boolean);\n  switch (tecnologia) {\n    case 'discord-bot':\n      if (!evidencias.some(e => e.valor.includes('intents'))) {\n        sugestoes.push('üîß Configurar intents espec√≠ficos no Discord Client para melhor performance');\n      }\n      if (!evidencias.some(e => e.valor.includes('command'))) {\n        sugestoes.push('üìÅ Estruturar commands em pasta dedicada para organiza√ß√£o');\n      }\n      if (!evidencias.some(e => e.valor.includes('rate'))) {\n        sugestoes.push('‚ö° Implementar rate limiting para evitar banimento por spam');\n      }\n      break;\n    case 'express-api':\n      if (!evidencias.some(e => e.valor.includes('helmet'))) {\n        sugestoes.push('üõ°Ô∏è Adicionar helmet para headers de seguran√ßa');\n      }\n      if (!evidencias.some(e => e.valor.includes('cors'))) {\n        sugestoes.push('üåê Configurar CORS adequadamente para APIs');\n      }\n      if (!evidencias.some(e => e.valor.includes('joi') && e.valor.includes('swagger'))) {\n        sugestoes.push('üìã Implementar valida√ß√£o com Joi e documenta√ß√£o Swagger');\n      }\n      break;\n    case 'cli-modular':\n      if (!evidencias.some(e => e.valor.includes('help'))) {\n        sugestoes.push('‚ùì Implementar comando --help abrangente');\n      }\n      if (!evidencias.some(e => e.valor.includes('version'))) {\n        sugestoes.push('üì¶ Adicionar comando --version');\n      }\n      if (!evidencias.some(e => e.valor.includes('config'))) {\n        sugestoes.push('‚öôÔ∏è Considerar arquivo de configura√ß√£o para usu√°rios');\n      }\n      break;\n    case 'electron-app':\n      if (!evidencias.some(e => e.valor.includes('preload'))) {\n        sugestoes.push('üîí Implementar preload script para comunica√ß√£o segura');\n      }\n      if (!evidencias.some(e => e.valor.includes('contextIsolation'))) {\n        sugestoes.push('üõ°Ô∏è Habilitar context isolation para seguran√ßa');\n      }\n      if (!evidencias.some(e => e.valor.includes('updater'))) {\n        sugestoes.push('üîÑ Implementar auto-updater para atualiza√ß√µes autom√°ticas');\n      }\n      break;\n  }\n  return sugestoes;\n}\nfunction detectarProblemas(tecnologia: string, evidencias: EvidenciaContexto[], arquivos: FileEntryWithAst[]): string[] {\n  const problemas: string[] = [];\n  switch (tecnologia) {\n    case 'discord-bot':\n      // Verifica se token est√° hardcoded\n      for (const arquivo of arquivos) {\n        if (arquivo.content?.includes('token') && !arquivo.content.includes('process.env')) {\n          problemas.push(`üö® Poss√≠vel token hardcoded em ${arquivo.relPath}`);\n        }\n      }\n      break;\n    case 'express-api':\n      // Verifica middleware de seguran√ßa\n      const temHelmet = evidencias.some(e => e.valor.includes('helmet'));\n      const temCors = evidencias.some(e => e.valor.includes('cors'));\n      if (!temHelmet) {\n        problemas.push('‚ö†Ô∏è API sem helmet - vulner√°vel a ataques de header');\n      }\n      if (!temCors) {\n        problemas.push('‚ö†Ô∏è API sem CORS configurado - poss√≠veis problemas de origem');\n      }\n      break;\n    case 'electron-app':\n      // Verifica configura√ß√µes de seguran√ßa\n      for (const arquivo of arquivos) {\n        if (arquivo.content?.includes('nodeIntegration: true')) {\n          problemas.push(`üö® nodeIntegration habilitado em ${arquivo.relPath} - risco de seguran√ßa`);\n        }\n        if (arquivo.content?.includes('contextIsolation: false')) {\n          problemas.push(`üö® contextIsolation desabilitado em ${arquivo.relPath} - vulnerabilidade`);\n        }\n      }\n      break;\n  }\n  return problemas;\n}\nfunction calcularConfiancaTotal(evidencias: EvidenciaContexto[]): number {\n  if (evidencias.length === 0) return 0;\n  const pesosPorTipo = {\n    dependencia: 1.0,\n    import: 0.9,\n    codigo: 0.85,\n    export: 0.8,\n    estrutura: 0.7,\n    script: 0.6,\n    config: 0.5\n  };\n  let somaConfianca = 0;\n  let somaPesos = 0;\n  for (const evidencia of evidencias) {\n    const peso = pesosPorTipo[evidencia.tipo as keyof typeof pesosPorTipo] || 0.5;\n    somaConfianca += evidencia.confianca * peso;\n    somaPesos += peso;\n  }\n  return somaPesos > 0 ? somaConfianca / somaPesos : 0;\n}\nexport function detectarContextoInteligente(estruturaDetectada: string[], arquivos: FileEntryWithAst[], packageJson?: PackageJson, options?: {\n  quiet?: boolean;\n  contexto?: ContextoExecucao;\n}): ResultadoDeteccaoContextual[] {\n  // DEBUG: Log simples para verificar se est√° sendo chamado\n  if (!options?.quiet && config.VERBOSE) {\n    const mensagem = `üîç Package.json completo:${  JSON.stringify(packageJson, null, 2)}`;\n    const ev: ReportEvent = {\n      tipo: 'detector-contexto-inteligente-debug-package',\n      nivel: 'info',\n      mensagem,\n      relPath: ''\n    };\n    if (options?.contexto && typeof options.contexto.report === 'function') {\n      try { options.contexto.report(ev); } catch { /* ignore */ }\n    } else {\n      console.debug(mensagem);\n    }\n    if (packageJson?.dependencies?.vue) {\n      const m2 = `üîç Package.json tem Vue: ${packageJson.dependencies.vue}`;\n      const ev2: ReportEvent = { tipo: 'detector-contexto-inteligente-debug-vue', nivel: 'info', mensagem: m2, relPath: '' };\n      if (options?.contexto && typeof options.contexto.report === 'function') {\n        try { options.contexto.report(ev2); } catch { /* ignore */ }\n      } else {\n        console.debug(m2);\n      }\n    }\n  }\n  const todasEvidencias: EvidenciaContexto[] = [...analisarDependencias(packageJson), ...analisarScripts(packageJson), ...analisarEstrutura(estruturaDetectada), ...analisarImportsExports(arquivos), ...analisarPadroesCodigo(arquivos)];\n\n  // Agrupa evid√™ncias por tecnologia\n  const evidenciasPorTecnologia = new Map<string, EvidenciaContexto[]>();\n  for (const evidencia of todasEvidencias) {\n    const tec = evidencia.tecnologia || 'desconhecido';\n    if (!evidenciasPorTecnologia.has(tec)) {\n      evidenciasPorTecnologia.set(tec, []);\n    }\n    const tecEvidencias = evidenciasPorTecnologia.get(tec);\n    if (tecEvidencias) {\n      tecEvidencias.push(evidencia);\n    }\n  }\n\n  // Calcula resultados por tecnologia\n  const resultados: ResultadoDeteccaoContextual[] = [];\n  for (const [tecnologia, evidencias] of evidenciasPorTecnologia) {\n    let confiancaTotal = calcularConfiancaTotal(evidencias);\n\n    // Verifica√ß√£o de depend√™ncias obrigat√≥rias para evitar falsos positivos\n    const padraoTecnologia = PADROES_TECNOLOGIA[tecnologia as keyof typeof PADROES_TECNOLOGIA];\n    if (padraoTecnologia && padraoTecnologia.dependencias.length > 0) {\n      const temDependenciaObrigatoria = evidencias.some(e => e.tipo === 'dependencia' && padraoTecnologia.dependencias.includes(e.valor));\n\n      // Se n√£o tem nenhuma depend√™ncia obrigat√≥ria, penalizar severamente\n      if (!temDependenciaObrigatoria) {\n        confiancaTotal *= 0.1; // Reduz confian√ßa para 10%\n      }\n    }\n\n    // üö® VERIFICA√á√ÉO DE ANTI-PATTERNS: Se anti-patterns est√£o presentes, ELIMINAR detec√ß√£o\n    const temAntiPadrao = verificarAntiPatterns(arquivos, tecnologia);\n    if (temAntiPadrao) {\n      // Anti-pattern detectado = detec√ß√£o FALSA, eliminar confian√ßa\n      confiancaTotal = 0;\n      // Opcional: Adicionar evid√™ncia negativa\n      evidencias.push({\n        tipo: 'codigo',\n        valor: 'anti-pattern-detectado',\n        confianca: -1.0,\n        // Negativa\n        tecnologia,\n        localizacao: 'c√≥digo'\n      });\n    }\n    if (confiancaTotal > 0.3) {\n      // Threshold m√≠nimo para considerar\n      resultados.push({\n        tecnologia,\n        confiancaTotal,\n        evidencias,\n        sugestoesMelhoria: gerarSugestoesMelhoria(tecnologia, evidencias),\n        problemasDetectados: detectarProblemas(tecnologia, evidencias, arquivos)\n      });\n    }\n  }\n\n  // Ordena por confian√ßa decrescente\n  return resultados.sort((a, b) => b.confiancaTotal - a.confiancaTotal);\n}\nexport function inferirArquetipoInteligente(estruturaDetectada: string[], arquivos: FileEntryWithAst[], packageJson?: PackageJson, options?: {\n  quiet?: boolean;\n}): string {\n  const resultados = detectarContextoInteligente(estruturaDetectada, arquivos, packageJson, options);\n  if (resultados.length === 0) return 'generico';\n  const melhorResultado = resultados[0];\n\n  // Mapeia tecnologias para arqu√©tipos oficiais\n  const mapeamentoArquetipos: Record<string, string> = {\n    'discord-bot': 'bot',\n    'telegram-bot': 'bot',\n    'express-api': 'api-rest-express',\n    'fastify-api': 'api-rest-express',\n    'nest-api': 'api-rest-express',\n    'koa-api': 'api-rest-express',\n    'hapi-api': 'api-rest-express',\n    'serverless-api': 'api-rest-express',\n    'cli-modular': 'cli-modular',\n    'electron-app': 'electron',\n    'next-fullstack': 'fullstack',\n    'react-spa': 'landing-page',\n    'vue-spa': 'vue-spa',\n    'nuxt-app': 'vue-spa',\n    'vite-vue': 'vue-spa'\n  };\n  return mapeamentoArquetipos[melhorResultado.tecnologia || 'generico'] || 'generico';\n}"]}