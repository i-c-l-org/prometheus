{"version":3,"file":"analista-css.js","sourceRoot":"","sources":["../../../src/analistas/plugins/analista-css.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\nimport { AnalystOrigens, AnalystTipos, CssMensagens, SeverityNiveis } from '@core/messages/core/plugin-messages.js';\nimport { isLikelyIntentionalDuplicate, lintCssLikeStylelint } from '@shared/impar/stylelint.js';\nimport postcss, { type AtRule, type Container, type Declaration, type Root, type Rule, type Syntax } from 'postcss';\nimport postcssSass from 'postcss-sass';\nimport postcssScss from 'postcss-scss';\n\nimport { criarAnalista, criarOcorrencia } from '@';\n\nconst disableEnv = (globalThis as {\n  process?: {\n    env?: Record<string, string | undefined>;\n  };\n}).process?.env?.PROMETHEUS_DISABLE_PLUGIN_CSS === '1';\ntype Msg = ReturnType<typeof criarOcorrencia>;\nfunction warn(message: string, relPath: string, line?: number, nivelArg: (typeof SeverityNiveis)[keyof typeof SeverityNiveis] = SeverityNiveis.warning): Msg {\n  return criarOcorrencia({\n    relPath,\n    mensagem: message,\n    linha: line,\n    nivel: nivelArg,\n    origem: AnalystOrigens.css,\n    tipo: AnalystTipos.css\n  });\n}\nfunction collectCssIssues(src: string, relPath: string): Msg[] {\n  const ocorrencias: Msg[] = [];\n  const lines = src.split(/\\n/);\n\n  // Stack de blocos para não misturar propriedades de seletores/frames diferentes\n  const stack: Array<{\n    props: Record<string, {\n      line: number;\n      value: string;\n    }>;\n    context?: 'font-face';\n  }> = [];\n  lines.forEach((lineText, idx) => {\n    const line = idx + 1;\n    const trimmed = lineText.trim();\n\n    // Abre novos blocos antes de analisar propriedades da linha\n    const opens = (trimmed.match(/\\{/g) || []).length;\n    for (let i = 0; i < opens; i++) {\n      const ctx = /@font-face/i.test(trimmed) ? 'font-face' : undefined;\n      stack.push({\n        props: {},\n        context: ctx\n      });\n    }\n    const current = stack[stack.length - 1];\n    if (current) {\n      const propMatch = /^([a-zA-Z-]+)\\s*:\\s*([^;]+)?/.exec(trimmed);\n      if (propMatch) {\n        const prop = propMatch[1].toLowerCase();\n        const value = (propMatch[2] || '').trim();\n        const prev = current.props[prop];\n        if (prev) {\n          const ctx = current.context ? {\n            currentAtRule: current.context\n          } : undefined;\n          if (isLikelyIntentionalDuplicate(prop, prev.value, value, ctx)) {\n            // Duplicata legítima (fallback vendor, viewport, cor, etc)\n          } else if (prev.value === value) {\n            // Mesma propriedade, mesmo valor = erro claro\n            ocorrencias.push(warn(CssMensagens.duplicatePropertySame(prop), relPath, line));\n          } else {\n            // Valores diferentes sem padrão claro = possível erro\n            ocorrencias.push(warn(CssMensagens.duplicatePropertyDifferent(prop, prev.value, value), relPath, line));\n          }\n        } else {\n          current.props[prop] = {\n            line,\n            value\n          };\n        }\n      }\n    }\n\n    // !important\n    if (/!important/.test(trimmed)) {\n      ocorrencias.push(warn(CssMensagens.importantUsage, relPath, line));\n    }\n\n    // @import/http\n    if (/^@import\\s+[^;]*http:\\/\\//i.test(trimmed)) {\n      ocorrencias.push(warn(CssMensagens.httpImport, relPath, line));\n    }\n\n    // url(http:)\n    if (/url\\(\\s*['\"]?http:\\/\\//i.test(trimmed)) {\n      ocorrencias.push(warn(CssMensagens.httpUrl, relPath, line));\n    }\n\n    // Fecha blocos depois de processar a linha\n    const closes = (trimmed.match(/\\}/g) || []).length;\n    for (let i = 0; i < closes; i++) {\n      if (stack.length) stack.pop();\n    }\n  });\n  return ocorrencias;\n}\nfunction collectCssIssuesLikeStylelint(src: string, relPath: string): Msg[] | null {\n  const warnings = lintCssLikeStylelint({\n    code: src,\n    relPath\n  });\n  if (!warnings.length) return null;\n  return warnings.map(w => {\n    const nivel = w.severity === 'error' ? SeverityNiveis.error : SeverityNiveis.warning;\n    return warn(w.text, relPath, w.line, nivel);\n  });\n}\ntype CssRuleDecl = {\n  prop: string;\n  value: string;\n};\nfunction normalizeCssValue(value: string): string {\n  return value.replace(/\\s+/g, ' ').trim();\n}\nfunction canonicalizeDecls(decls: CssRuleDecl[]): {\n  signature: string;\n  count: number;\n} {\n  const map = new Map<string, string>();\n  decls.forEach(d => {\n    const prop = d.prop.trim().toLowerCase();\n    const value = normalizeCssValue(d.value);\n    if (!prop || !value) return;\n    // Mantém a última ocorrência; duplicatas já são tratadas em outra regra.\n    map.set(prop, value);\n  });\n  const sorted = [...map.entries()].sort((a, b) => a[0].localeCompare(b[0]));\n  return {\n    signature: sorted.map(([p, v]) => `${p}:${v}`).join(';'),\n    count: sorted.length\n  };\n}\nfunction splitSimpleSelectors(selectorText: string): string[] {\n  return selectorText.split(',').map(s => s.trim()).filter(Boolean).filter(s => /^(\\.[A-Za-z0-9_-]+|#[A-Za-z0-9_-]+)$/.test(s));\n}\nfunction parseWithPostCssRoots(src: string, relPath: string): Root[] | null {\n  const isScss = /\\.scss$/i.test(relPath);\n  const isSass = /\\.sass$/i.test(relPath);\n  const syntax: Syntax | undefined = isScss ? postcssScss : isSass ? postcssSass : undefined;\n  try {\n    // Importante: `postcss.parse(..., { syntax })` ignora `syntax`.\n    // Para aplicar parser SCSS/SASS corretamente, usamos `postcss().process`.\n    const result = postcss().process(src, {\n      from: relPath,\n      ...(syntax ? {\n        syntax\n      } : {})\n    });\n    const rootUnknown: unknown = result.root;\n    const rootAny = rootUnknown as {\n      type?: unknown;\n      nodes?: unknown[];\n    } | undefined;\n\n    // Alguns parsers podem retornar `Document` (com múltiplos roots internos)\n    if (rootAny && rootAny.type === 'document' && Array.isArray(rootAny.nodes)) {\n      const roots = rootAny.nodes.filter((n): n is Root => {\n        const t = (n as {\n          type?: unknown;\n        } | undefined)?.type;\n        return t === 'root';\n      });\n      return roots.length ? roots : null;\n    }\n\n    // Caso padrão: um único Root\n    return [result.root as unknown as Root];\n  } catch {\n    return null;\n  }\n}\nfunction getNodeLine(node: {\n  source?: {\n    start?: {\n      line?: number;\n    };\n  };\n} | undefined): number | undefined {\n  const line = node?.source?.start?.line;\n  return typeof line === 'number' && Number.isFinite(line) ? line : undefined;\n}\nfunction formatAtRuleContext(n: AtRule): string {\n  const name = String(n.name || '').toLowerCase();\n  const params = String(n.params || '').trim();\n  return `@${name}${params ? ` ${params}` : ''}`;\n}\nfunction normalizePropKey(prop: string): string {\n  // Propriedades CSS são case-insensitive; custom properties são case-sensitive.\n  return prop.startsWith('--') ? prop : prop.toLowerCase();\n}\n\n// Lista conhecida de propriedades CSS válidas (subset comum)\n// Em produção, considere usar uma biblioteca como css-tree ou mdn-data\nconst CONHECIDAS_CSS_PROPRIEDADES = new Set([\n// Layout\n'display', 'position', 'top', 'right', 'bottom', 'left', 'width', 'height', 'margin', 'margin-top', 'margin-right', 'margin-bottom', 'margin-left', 'padding', 'padding-top', 'padding-right', 'padding-bottom', 'padding-left', 'border', 'border-top', 'border-right', 'border-bottom', 'border-left', 'border-width', 'border-style', 'border-color', 'box-sizing', 'float', 'clear', 'overflow', 'overflow-x', 'overflow-y', 'z-index', 'visibility',\n// Flexbox\n'flex', 'flex-direction', 'flex-wrap', 'flex-flow', 'justify-content', 'align-items', 'align-content', 'align-self', 'flex-grow', 'flex-shrink', 'flex-basis', 'order',\n// Grid\n'grid', 'grid-template-columns', 'grid-template-rows', 'grid-template-areas', 'grid-column', 'grid-row', 'grid-area', 'gap', 'row-gap', 'column-gap',\n// Tipografia\n'font', 'font-family', 'font-size', 'font-weight', 'font-style', 'font-variant', 'line-height', 'letter-spacing', 'word-spacing', 'text-align', 'text-decoration', 'text-transform', 'text-indent', 'white-space', 'word-break', 'word-wrap', 'color', 'background', 'background-color', 'background-image', 'background-repeat', 'background-position', 'background-size',\n// Outros comuns\n'cursor', 'opacity', 'transform', 'transition', 'animation', 'list-style', 'vertical-align', 'text-overflow', 'box-shadow', 'border-radius', 'outline', 'content', 'counter-reset', 'counter-increment']);\nfunction isValidCssProperty(prop: string): boolean {\n  const normalized = prop.toLowerCase();\n  // Permite propriedades custom (--*) e vendor (-webkit-*, -moz-*, etc.)\n  if (normalized.startsWith('--') || normalized.startsWith('-')) {\n    return true;\n  }\n  return CONHECIDAS_CSS_PROPRIEDADES.has(normalized);\n}\nfunction detectCssHacks(value: string): string | null {\n  // Detecta hacks comuns de CSS\n  const hacks = [{\n    pattern: /\\\\9/,\n    name: 'backslash-9 hack'\n  }, {\n    pattern: /_property/,\n    name: 'underscore hack'\n  }, {\n    pattern: /\\*property/,\n    name: 'star hack'\n  }, {\n    pattern: /property\\\\\\0\\//,\n    name: 'null byte hack'\n  }, {\n    pattern: /expression\\(/,\n    name: 'IE expression'\n  }];\n  for (const hack of hacks) {\n    if (hack.pattern.test(value)) {\n      return hack.name;\n    }\n  }\n  return null;\n}\nfunction collectCssIssuesFromPostCssAst(root: Root, relPath: string): Msg[] {\n  const ocorrencias: Msg[] = [];\n  const seen = new Set<string>();\n  const pushOnce = (m: Msg) => {\n    const k = `${m.mensagem}|${m.relPath}|${m.linha ?? 0}`;\n    if (seen.has(k)) return;\n    seen.add(k);\n    ocorrencias.push(m);\n  };\n  type Hit = {\n    selector: string;\n    line?: number;\n  };\n  const byContextAndSignature = new Map<string, {\n    declCount: number;\n    hits: Hit[];\n  }>();\n  const visit = (container: Container, ctxAtRules: string[], ctxSelectors: string[]) => {\n    // 1) Duplicidade / !important / url(http:)\n    const props: Record<string, {\n      value: string;\n      line?: number;\n    }> = {};\n    const inFontFace = ctxAtRules.some(c => c.toLowerCase().startsWith('@font-face'));\n    container.nodes?.forEach(node => {\n      if (node.type === 'decl') {\n        const decl = node as Declaration;\n        const propRaw = String(decl.prop || '').trim();\n\n        // SCSS variável: \"$color: ...\" (não é propriedade CSS)\n        if (!propRaw || propRaw.startsWith('$')) {\n          return;\n        }\n        const propChave = normalizePropKey(propRaw);\n        const value = normalizeCssValue(`${String(decl.value || '')}${decl.important ? ' !important' : ''}`);\n        const line = getNodeLine(decl);\n        const prev = props[propChave];\n        if (prev) {\n          const ctx = inFontFace ? {\n            currentAtRule: 'font-face' as const\n          } : undefined;\n          if (isLikelyIntentionalDuplicate(propChave, prev.value, value, ctx)) {\n            // duplicata intencional\n          } else if (prev.value === value) {\n            pushOnce(warn(CssMensagens.duplicatePropertySame(propRaw), relPath, line));\n          } else {\n            pushOnce(warn(CssMensagens.duplicatePropertyDifferent(propRaw, prev.value, value), relPath, line));\n          }\n        }\n        props[propChave] = {\n          value,\n          line\n        };\n\n        // Validação de propriedade inválida\n        if (!isValidCssProperty(propRaw)) {\n          pushOnce(warn(CssMensagens.invalidProperty(propRaw), relPath, line));\n        }\n\n        // Detecta hacks CSS\n        const hack = detectCssHacks(String(decl.value || ''));\n        if (hack) {\n          pushOnce(warn(CssMensagens.cssHackDetected(hack), relPath, line));\n        }\n        if (decl.important) {\n          pushOnce(warn(CssMensagens.importantUsage, relPath, line));\n        }\n        if (/url\\(\\s*['\"]?http:\\/\\//i.test(String(decl.value || ''))) {\n          pushOnce(warn(CssMensagens.httpUrl, relPath, line));\n        }\n      }\n    });\n\n    // 2) Unificação/centralização (apenas em regras com seletores simples)\n    if (container.type === 'rule') {\n      const rule = container as Rule;\n      const selectorText = String(rule.selector || '');\n      const simpleSelectors = splitSimpleSelectors(selectorText);\n      if (simpleSelectors.length) {\n        const decls: CssRuleDecl[] = [];\n        rule.nodes?.forEach(n => {\n          if (n.type !== 'decl') return;\n          const d = n as Declaration;\n          const prop = String(d.prop || '').trim();\n          if (!prop || prop.startsWith('$')) return;\n          const value = `${String(d.value || '')}${d.important ? ' !important' : ''}`;\n          decls.push({\n            prop,\n            value\n          });\n        });\n\n        // Detecta regras vazias\n        if (decls.length === 0) {\n          pushOnce(warn(CssMensagens.emptyRule, relPath, getNodeLine(rule)));\n        }\n        const {\n          signature,\n          count\n        } = canonicalizeDecls(decls);\n        if (signature && count >= 3) {\n          const ctxChave = [...ctxAtRules, ...ctxSelectors].join('|');\n          const key = `${ctxChave}||${signature}`;\n          const entry = byContextAndSignature.get(key) ?? {\n            declCount: count,\n            hits: []\n          };\n          const line = getNodeLine(rule);\n          simpleSelectors.forEach(sel => entry.hits.push({\n            selector: sel,\n            line\n          }));\n          byContextAndSignature.set(key, entry);\n        }\n      } else if (selectorText.trim()) {\n        // Verifica seletor malformado (se não conseguiu dividir em seletores simples)\n        try {\n          // Tenta parsear o seletor com uma regex simples\n          const invalidChars = /[{}[\\]()]/;\n          if (invalidChars.test(selectorText)) {\n            pushOnce(warn(CssMensagens.malformedSelector(selectorText.trim()), relPath, getNodeLine(rule)));\n          }\n        } catch {\n          pushOnce(warn(CssMensagens.malformedSelector(selectorText.trim()), relPath, getNodeLine(rule)));\n        }\n      }\n    }\n\n    // 3) Descer recursivamente para filhos (@rules e regras aninhadas)\n    container.nodes?.forEach(node => {\n      if (node.type === 'atrule') {\n        const at = node as AtRule;\n        const name = String(at.name || '').toLowerCase();\n        const line = getNodeLine(at);\n\n        // @import http://...\n        if (name === 'import' && /^\\s*(url\\()?\\s*['\"]?http:\\/\\//i.test(String(at.params || ''))) {\n          pushOnce(warn(CssMensagens.httpImport, relPath, line));\n        }\n\n        // Alguns at-rules tem bloco e nós internos; outros são só linha.\n        if (at.nodes && at.nodes.length) {\n          visit(at, [...ctxAtRules, formatAtRuleContext(at)], ctxSelectors);\n        }\n        return;\n      }\n      if (node.type === 'rule') {\n        const r = node as Rule;\n        // Contexto de nesting (SCSS): para regras filhas, adiciona o seletor do container atual\n        // (não o seletor da regra filha), evitando misturar árvores de seletores diferentes.\n        const nextSelectors = container.type === 'rule' ? [...ctxSelectors, `sel ${String((container as Rule).selector || '').trim()}`] : ctxSelectors;\n        visit(r, ctxAtRules, nextSelectors);\n      }\n    });\n  };\n  visit(root, [], []);\n  for (const {\n    declCount,\n    hits\n  } of byContextAndSignature.values()) {\n    const selectors = [...new Set(hits.map(h => h.selector))];\n    if (selectors.length < 2) continue;\n    const line = hits.map(h => h.line).filter((n): n is number => typeof n === 'number' && Number.isFinite(n)).sort((a, b) => a - b)[0];\n    pushOnce(warn(CssMensagens.unifySelectors(selectors, declCount), relPath, line));\n    const ids = selectors.filter(s => s.startsWith('#'));\n    ids.slice(0, 3).forEach(idSel => {\n      pushOnce(warn(CssMensagens.idSelectorPreferClass(idSel), relPath, line, SeverityNiveis.info));\n    });\n  }\n  return ocorrencias;\n}\nexport const analistaCss = criarAnalista({\n  nome: 'analista-css',\n  categoria: 'estilo',\n  descricao: 'Lint de CSS do Prometheus (com fallback heurístico).',\n  global: false,\n  test: (relPath: string): boolean => /\\.(css|scss|sass)$/i.test(relPath),\n  aplicar: async (src, relPath): Promise<Msg[] | null> => {\n    if (disableEnv) return null;\n    const isCss = /\\.css$/i.test(relPath);\n    const roots = parseWithPostCssRoots(src, relPath);\n    const astIssues = roots ? roots.flatMap(r => collectCssIssuesFromPostCssAst(r, relPath)) : [];\n\n    // Mantém regras stylelint-like para CSS puro (pipeline atual do Prometheus).\n    const cssLint = isCss ? collectCssIssuesLikeStylelint(src, relPath) ?? [] : [];\n    const seen = new Set<string>();\n    const merged: Msg[] = [];\n    const pushOnce = (m: Msg) => {\n      const k = `${m.mensagem}|${m.relPath}|${m.linha ?? 0}`;\n      if (seen.has(k)) return;\n      seen.add(k);\n      merged.push(m);\n    };\n    cssLint.forEach(pushOnce);\n    astIssues.forEach(pushOnce);\n    if (merged.length) return merged;\n\n    // Fallback: heurístico (útil quando o parser não aceita casos extremos/arquivos quebrados)\n    const fallback = collectCssIssues(src, relPath);\n    return fallback.length ? fallback : null;\n  }\n});\nexport default analistaCss;"]}