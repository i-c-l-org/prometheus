{"version":3,"file":"flags-validator.js","sourceRoot":"","sources":["../../../src/cli/options/flags-validator.ts"],"names":[],"mappings":"AAcA,MAAM,OAAO,GAAsB;IACjC,IAAI,EAAE,SAAS;IACf,MAAM,EAAE;QACN,MAAM,EAAE,SAAS;QACjB,SAAS,EAAE,KAAK;QAChB,MAAM,EAAE,KAAK;QACb,UAAU,EAAE,KAAK;QACjB,SAAS,EAAE,YAAY;KACxB;IACD,OAAO,EAAE;QACP,OAAO,EAAE,EAAE;QACX,OAAO,EAAE,EAAE;QACX,YAAY,EAAE,KAAK;QACnB,kBAAkB,EAAE,KAAK;KAC1B;IACD,WAAW,EAAE;QACX,QAAQ,EAAE,KAAK;KAChB;IACD,OAAO,EAAE;QACP,OAAO,EAAE,KAAK;QACd,IAAI,EAAE,UAAU;QAChB,MAAM,EAAE,KAAK;KACd;IACD,QAAQ,EAAE;QACR,OAAO,EAAE,KAAK;QACd,QAAQ,EAAE,KAAK;QACf,YAAY,EAAE,KAAK;KACpB;IACD,SAAS,EAAE;QACT,KAAK,EAAE,MAAM;QACb,MAAM,EAAE,KAAK;KACd;IACD,OAAO,EAAE;QACP,eAAe,EAAE,KAAK;QACtB,cAAc,EAAE,KAAK;QACrB,eAAe,EAAE,KAAK;KACvB;CACF,CAAC;AAKF,MAAM,UAAU,yBAAyB,CAAC,IAAiB;IACzD,MAAM,MAAM,GAAa,EAAE,CAAC;IAC5B,MAAM,QAAQ,GAAa,EAAE,CAAC;IAC9B,MAAM,UAAU,GAAsB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;IAG1E,MAAM,WAAW,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,MAAM,EAAE,IAAI,CAAC,SAAS,IAAI,WAAW,EAAE,IAAI,CAAC,KAAK,IAAI,OAAO,CAAC,CAAC,MAAM,CAAC,OAAO,CAAa,CAAC;IAE5H,IAAK,IAA2C,CAAC,eAAe,CAAC,EAAE,CAAC;QACjE,UAAiD,CAAC,SAAS,CAAC,GAAG;YAC9D,GAAG,CAAC,UAAU,CAAC,OAAO,IAAI,EAAE,CAAC;YAG7B,aAAa,EAAE,IAAI;SAGpB,CAAC;IACJ,CAAC;IACD,IAAK,IAA2C,CAAC,cAAc,CAAC,EAAE,CAAC;QAChE,UAAiD,CAAC,SAAS,CAAC,GAAG;YAC9D,GAAG,CAAC,UAAU,CAAC,OAAO,IAAI,EAAE,CAAC;YAC7B,YAAY,EAAE,IAAI;SAGnB,CAAC;IACJ,CAAC;IACD,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAC3B,MAAM,CAAC,IAAI,CAAC,4CAA4C,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACrF,CAAC;SAAM,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;QACpC,UAAU,CAAC,IAAI,GAAG,WAAW,CAAC,CAAC,CAAiB,CAAC;IACnD,CAAC;IAGD,MAAM,cAAc,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,MAAM,EAAE,IAAI,CAAC,QAAQ,IAAI,UAAU,CAAC,CAAC,MAAM,CAAC,OAAO,CAAa,CAAC;IACtG,IAAI,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAC9B,MAAM,CAAC,IAAI,CAAC,+CAA+C,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC3F,CAAC;SAAM,IAAI,cAAc,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;QACvC,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,cAAc,CAAC,CAAC,CAAwB,CAAC;IACtE,CAAC;IAGD,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;QACnB,UAAU,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC;IACrC,CAAC;IAGD,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;QAChB,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;IAClC,CAAC;IACD,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,UAAU,CAAC,MAAM,CAAC,UAAU,GAAG,IAAI,CAAC;QACpC,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;IAClC,CAAC;IACD,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,UAAU,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;IAC9C,CAAC;IAGD,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAC5C,UAAU,CAAC,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;IAC5C,CAAC;IACD,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAC5C,UAAU,CAAC,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;IAC5C,CAAC;IACD,IAAK,IAA2C,CAAC,cAAc,CAAC,EAAE,CAAC;QACjE,UAAU,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,GAAG,UAAU,CAAC,OAAO,CAAC,OAAO,EAAE,aAAa,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,EAAE,iBAAiB,CAAC,CAAC;IACvI,CAAC;IACD,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;QACnB,UAAU,CAAC,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC;IACzC,CAAC;IACD,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;QACzB,UAAU,CAAC,OAAO,CAAC,kBAAkB,GAAG,IAAI,CAAC;IAC/C,CAAC;IAGD,IAAI,IAAI,CAAC,OAAO,IAAI,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAC1D,QAAQ,CAAC,IAAI,CAAC,4DAA4D,CAAC,CAAC;IAC9E,CAAC;SAAM,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;QACxB,UAAU,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,QAAQ,CAAC,CAAC;IAC1C,CAAC;IAGD,IAAI,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;QAC7B,UAAU,CAAC,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;IACpC,CAAC;IAGD,IAAI,gBAAyC,CAAC;IAC9C,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC1B,gBAAgB,GAAG,IAAI,CAAC,gBAA+B,CAAC;IAC1D,CAAC;SAAM,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;QACxB,gBAAgB,GAAG,IAAI,CAAC,OAAsB,CAAC;IACjD,CAAC;SAAM,IAAI,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;QACpD,gBAAgB,GAAG,cAAc,CAAC;IACpC,CAAC;SAAM,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;QAC9B,gBAAgB,GAAG,YAAY,CAAC;IAClC,CAAC;IACD,IAAI,gBAAgB,EAAE,CAAC;QACrB,MAAM,UAAU,GAAkB,CAAC,cAAc,EAAE,UAAU,EAAE,YAAY,CAAC,CAAC;QAC7E,IAAI,UAAU,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE,CAAC;YAC1C,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,gBAAgB,CAAC;QAC7C,CAAC;aAAM,CAAC;YACN,QAAQ,CAAC,IAAI,CAAC,8BAA8B,gBAAgB,sBAAsB,CAAC,CAAC;QACtF,CAAC;IACH,CAAC;IAGD,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;QAChB,UAAU,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;IACnC,CAAC;IAGD,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;QACxC,UAAU,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;IACrC,CAAC;IACD,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,UAAU,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;QACpC,UAAU,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;IACrC,CAAC;IACD,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC1B,UAAU,CAAC,QAAQ,CAAC,YAAY,GAAG,IAAI,CAAC;QACxC,UAAU,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;IACrC,CAAC;IAID,IAAK,IAA2C,CAAC,MAAM,CAAC,EAAE,CAAC;QACxD,UAAiD,CAAC,aAAa,CAAC,GAAG;YAClE,QAAQ,EAAE,IAAI;SACf,CAAC;IACJ,CAAC;IACD,MAAM,gBAAgB,GAAG,CAAC,IAAI,CAAC,MAAM,IAAI,QAAQ,EAAE,IAAI,CAAC,KAAK,IAAI,OAAO,EAAE,IAAI,CAAC,OAAO,IAAI,SAAS,CAAC,CAAC,MAAM,CAAC,OAAO,CAAa,CAAC;IACjI,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAChC,QAAQ,CAAC,IAAI,CAAC,4BAA4B,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;IAC3F,CAAC;IACD,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;QAChB,UAAU,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;QACnC,UAAU,CAAC,SAAS,CAAC,KAAK,GAAG,OAAO,CAAC;IACvC,CAAC;SAAM,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;QACtB,UAAU,CAAC,SAAS,CAAC,KAAK,GAAG,MAAM,CAAC;IACtC,CAAC;SAAM,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;QACtC,UAAU,CAAC,SAAS,CAAC,KAAK,GAAG,OAAO,CAAC;IACvC,CAAC;SAAM,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;QACzB,MAAM,WAAW,GAA+C,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;QACnG,MAAM,KAAK,GAAG,IAAI,CAAC,QAA+C,CAAC;QACnE,IAAI,WAAW,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;YAChC,UAAU,CAAC,SAAS,CAAC,KAAK,GAAG,KAAK,CAAC;QACrC,CAAC;aAAM,CAAC;YACN,QAAQ,CAAC,IAAI,CAAC,0BAA0B,IAAI,CAAC,QAAQ,kBAAkB,CAAC,CAAC;QAC3E,CAAC;IACH,CAAC;IAGD,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;QACzB,UAAU,CAAC,OAAO,CAAC,eAAe,GAAG,IAAI,CAAC;IAC5C,CAAC;IACD,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,UAAU,CAAC,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC;IAC3C,CAAC;IACD,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;QACzB,UAAU,CAAC,OAAO,CAAC,eAAe,GAAG,IAAI,CAAC;QAC1C,UAAU,CAAC,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC;QACzC,QAAQ,CAAC,IAAI,CAAC,6DAA6D,CAAC,CAAC;IAC/E,CAAC;IAID,OAAO;QACL,KAAK,EAAE,MAAM,CAAC,MAAM,KAAK,CAAC;QAC1B,MAAM;QACN,QAAQ;QACR,UAAU;KACX,CAAC;AACJ,CAAC;AAKD,MAAM,UAAU,cAAc,CAAC,KAAwB;IACrD,MAAM,SAAS,GAAa,EAAE,CAAC;IAG/B,IAAI,KAAK,CAAC,IAAI,KAAK,SAAS,EAAE,CAAC;QAC7B,SAAS,CAAC,IAAI,CAAC,iEAAiE,CAAC,CAAC;IACpF,CAAC;SAAM,IAAI,KAAK,CAAC,IAAI,KAAK,WAAW,EAAE,CAAC;QACtC,SAAS,CAAC,IAAI,CAAC,wDAAwD,CAAC,CAAC;IAC3E,CAAC;IAGD,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,KAAK,MAAM,EAAE,CAAC;QAC3D,SAAS,CAAC,IAAI,CAAC,wDAAwD,CAAC,CAAC;IAC3E,CAAC;IAGD,IAAI,KAAK,CAAC,OAAO,CAAC,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;QACnD,SAAS,CAAC,IAAI,CAAC,uEAAuE,CAAC,CAAC;IAC1F,CAAC;IAGD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;QAC5B,SAAS,CAAC,IAAI,CAAC,qEAAqE,CAAC,CAAC;IACxF,CAAC;IAGD,IAAI,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;QACvC,SAAS,CAAC,IAAI,CAAC,kFAAkF,CAAC,CAAC;IACrG,CAAC;IACD,OAAO,SAAS,CAAC;AACnB,CAAC","sourcesContent":["// SPDX-License-Identifier: MIT-0\n/**\n * üéØ Valida√ß√£o e Normaliza√ß√£o de Flags do Comando Diagnosticar\n *\n * Sistema robusto para:\n * - Validar flags e detectar conflitos\n * - Normalizar aliases e atalhos\n * - Aplicar defaults inteligentes\n * - Gerar avisos e sugest√µes contextuais\n */\n\nimport type { FlagsBrutas, FlagsNormalizadas, ModoAutoFix, ModoOperacao, ResultadoValidacao } from '@'; /**\n                                                                                                        * Defaults seguros\n                                                                                                        */\nconst PADROES: FlagsNormalizadas = {\n  mode: 'compact',\n  output: {\n    format: 'console',\n    jsonAscii: false,\n    export: false,\n    exportFull: false,\n    exportDir: 'relatorios'\n  },\n  filters: {\n    include: [],\n    exclude: [],\n    includeTests: false,\n    includeNodeModules: false\n  },\n  performance: {\n    fastMode: false\n  },\n  autoFix: {\n    enabled: false,\n    mode: 'balanced',\n    dryRun: false\n  },\n  guardian: {\n    enabled: false,\n    fullScan: false,\n    saveBaseline: false\n  },\n  verbosity: {\n    level: 'info',\n    silent: false\n  },\n  special: {\n    listarAnalistas: false,\n    criarArquetipo: false,\n    salvarArquetipo: false\n  }\n};\n\n/**\n * Valida e normaliza flags do comando diagnosticar\n */\nexport function validateAndNormalizeFlags(opts: FlagsBrutas): ResultadoValidacao {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n  const normalized: FlagsNormalizadas = JSON.parse(JSON.stringify(PADROES));\n\n  /* -------------------------- 1. MODO DE OPERA√á√ÉO (mutuamente exclusivo) -------------------------- */\n  const modesAtivos = [opts.full && 'full', opts.executive && 'executive', opts.quick && 'quick'].filter(Boolean) as string[];\n  // Trust compiler: reduz falsos positivos quando TS/ESLint n√£o reportam erros\n  if ((opts as unknown as Record<string, unknown>)['trustCompiler']) {\n    (normalized as unknown as Record<string, unknown>)['special'] = {\n      ...(normalized.special || {}),\n      // sinaliza modo de confian√ßa do compilador para pipeline\n      // ser√° checado em processamento-diagnostico\n      trustCompiler: true\n    } as unknown as FlagsNormalizadas['special'] & {\n      trustCompiler: boolean;\n    };\n  }\n  if ((opts as unknown as Record<string, unknown>)['verifyCycles']) {\n    (normalized as unknown as Record<string, unknown>)['special'] = {\n      ...(normalized.special || {}),\n      verifyCycles: true\n    } as unknown as FlagsNormalizadas['special'] & {\n      verifyCycles: boolean;\n    };\n  }\n  if (modesAtivos.length > 1) {\n    errors.push(`Conflito: apenas um modo pode ser ativo (${modesAtivos.join(', ')})`);\n  } else if (modesAtivos.length === 1) {\n    normalized.mode = modesAtivos[0] as ModoOperacao;\n  }\n\n  /* -------------------------- 2. FORMATO DE SA√çDA -------------------------- */\n  const formatosAtivos = [opts.json && 'json', opts.markdown && 'markdown'].filter(Boolean) as string[];\n  if (formatosAtivos.length > 1) {\n    errors.push(`Conflito: apenas um formato pode ser ativo (${formatosAtivos.join(', ')})`);\n  } else if (formatosAtivos.length === 1) {\n    normalized.output.format = formatosAtivos[0] as 'json' | 'markdown';\n  }\n\n  // JSON ASCII escaping\n  if (opts.jsonAscii) {\n    normalized.output.jsonAscii = true;\n  }\n\n  // Export\n  if (opts.export) {\n    normalized.output.export = true;\n  }\n  if (opts.exportFull) {\n    normalized.output.exportFull = true;\n    normalized.output.export = true; // exportFull implica export\n  }\n  if (opts.exportTo) {\n    normalized.output.exportDir = opts.exportTo;\n  }\n\n  /* -------------------------- 3. FILTROS -------------------------- */\n  if (opts.include && opts.include.length > 0) {\n    normalized.filters.include = opts.include;\n  }\n  if (opts.exclude && opts.exclude.length > 0) {\n    normalized.filters.exclude = opts.exclude;\n  }\n  if ((opts as unknown as Record<string, unknown>)['excludeTests']) {\n    normalized.filters.exclude = [...normalized.filters.exclude, '**/*.test.*', '**/*.spec.*', 'tests/**', 'test/**', '**/__tests__/**'];\n  }\n  if (opts.withTests) {\n    normalized.filters.includeTests = true;\n  }\n  if (opts.withNodeModules) {\n    normalized.filters.includeNodeModules = true;\n  }\n\n  // onlySrc √© exclusivo com include customizado\n  if (opts.onlySrc && normalized.filters.include.length > 0) {\n    warnings.push('--only-src ser√° ignorado porque --include foi especificado');\n  } else if (opts.onlySrc) {\n    normalized.filters.include = ['src/**'];\n  }\n\n  /* -------------------------- 4. AUTO-FIX -------------------------- */\n  if (opts.fix || opts.autoFix) {\n    normalized.autoFix.enabled = true;\n  }\n\n  // Modo de auto-fix (prioridade: autoFixMode > fixMode > flags individuais)\n  let modoAutoCorrecao: ModoAutoFix | undefined;\n  if (opts.autoCorrecaoMode) {\n    modoAutoCorrecao = opts.autoCorrecaoMode as ModoAutoFix;\n  } else if (opts.fixMode) {\n    modoAutoCorrecao = opts.fixMode as ModoAutoFix;\n  } else if (opts.autoFixConservative || opts.fixSafe) {\n    modoAutoCorrecao = 'conservative';\n  } else if (opts.fixAggressive) {\n    modoAutoCorrecao = 'aggressive';\n  }\n  if (modoAutoCorrecao) {\n    const validModes: ModoAutoFix[] = ['conservative', 'balanced', 'aggressive'];\n    if (validModes.includes(modoAutoCorrecao)) {\n      normalized.autoFix.mode = modoAutoCorrecao;\n    } else {\n      warnings.push(`Modo de auto-fix inv√°lido: ${modoAutoCorrecao}. Usando 'balanced'.`);\n    }\n  }\n\n  // Dry run\n  if (opts.dryRun) {\n    normalized.autoFix.dryRun = true;\n  }\n\n  /* -------------------------- 5. GUARDIAN -------------------------- */\n  if (opts.guardian || opts.guardianCheck) {\n    normalized.guardian.enabled = true;\n  }\n  if (opts.guardianFull) {\n    normalized.guardian.fullScan = true;\n    normalized.guardian.enabled = true; // fullScan implica enabled\n  }\n  if (opts.guardianBaseline) {\n    normalized.guardian.saveBaseline = true;\n    normalized.guardian.enabled = true; // saveBaseline implica enabled\n  }\n\n  /* -------------------------- 6. VERBOSIDADE -------------------------- */\n  /* -------------------------- 7. PERFORMANCE -------------------------- */\n  if ((opts as unknown as Record<string, unknown>)['fast']) {\n    (normalized as unknown as Record<string, unknown>)['performance'] = {\n      fastMode: true\n    };\n  }\n  const verbosidadeAtiva = [opts.silent && 'silent', opts.quiet && 'quiet', opts.verbose && 'verbose'].filter(Boolean) as string[];\n  if (verbosidadeAtiva.length > 1) {\n    warnings.push(`Conflito de verbosidade: ${verbosidadeAtiva.join(', ')}. Usando √∫ltima.`);\n  }\n  if (opts.silent) {\n    normalized.verbosity.silent = true;\n    normalized.verbosity.level = 'error';\n  } else if (opts.quiet) {\n    normalized.verbosity.level = 'warn';\n  } else if (opts.verbose || opts.debug) {\n    normalized.verbosity.level = 'debug';\n  } else if (opts.logNivel) {\n    const validNiveis: Array<'error' | 'warn' | 'info' | 'debug'> = ['error', 'warn', 'info', 'debug'];\n    const level = opts.logNivel as 'error' | 'warn' | 'info' | 'debug';\n    if (validNiveis.includes(level)) {\n      normalized.verbosity.level = level;\n    } else {\n      warnings.push(`N√≠vel de log inv√°lido: ${opts.logNivel}. Usando 'info'.`);\n    }\n  }\n\n  /* -------------------------- 8. ESPECIAIS -------------------------- */\n  if (opts.listarAnalistas) {\n    normalized.special.listarAnalistas = true;\n  }\n  if (opts.criarArquetipo) {\n    normalized.special.criarArquetipo = true;\n  }\n  if (opts.salvarArquetipo) {\n    normalized.special.salvarArquetipo = true;\n    normalized.special.criarArquetipo = true; // salvar implica criar\n    warnings.push('--salvar-arquetipo implica --criar-arquetipo (ser√° ativado)');\n  }\n\n  /* -------------------------- RESULTADO -------------------------- */\n\n  return {\n    valid: errors.length === 0,\n    errors,\n    warnings,\n    normalized\n  };\n}\n\n/**\n * Gera sugest√µes contextuais baseadas nas flags ativas\n */\nexport function gerarSugestoes(flags: FlagsNormalizadas): string[] {\n  const sugestoes: string[] = [];\n\n  // Modo\n  if (flags.mode === 'compact') {\n    sugestoes.push('üí° Use --full para relat√≥rio detalhado com todas as informa√ß√µes');\n  } else if (flags.mode === 'executive') {\n    sugestoes.push('üëî Modo executivo: mostrando apenas problemas cr√≠ticos');\n  }\n\n  // Export\n  if (!flags.output.export && flags.output.format === 'json') {\n    sugestoes.push('üí° Combine --json com --export para salvar o relat√≥rio');\n  }\n\n  // Auto-fix\n  if (flags.autoFix.enabled && !flags.autoFix.dryRun) {\n    sugestoes.push('‚ö†Ô∏è  Auto-fix ativo! Use --dry-run para simular sem modificar arquivos');\n  }\n\n  // Guardian\n  if (!flags.guardian.enabled) {\n    sugestoes.push('üõ°Ô∏è  Guardian desativado. Use --guardian para verificar integridade');\n  }\n\n  // Filtros\n  if (flags.filters.include.length === 0) {\n    sugestoes.push('üìÇ Analisando todo o projeto. Use --include para focar em diret√≥rios espec√≠ficos');\n  }\n  return sugestoes;\n}"]}