{"version":3,"file":"ocorrencias.js","sourceRoot":"","sources":["../../../src/types/comum/ocorrencias.ts"],"names":[],"mappings":"AA+DA,MAAM,UAAU,eAAe,CAC7B,IAA4E;IAE5E,OAAO;QACL,KAAK,EAAE,MAAM;QACb,MAAM,EAAE,YAAY;QACpB,GAAG,IAAI;QACP,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;KAC/B,CAAC;AACJ,CAAC;AAID,MAAM,UAAU,sBAAsB,CAAC,IAKtC;IACC,OAAO;QACL,IAAI,EAAE,eAAe;QACrB,KAAK,EAAE,MAAM;QACb,MAAM,EAAE,YAAY;QACpB,GAAG,IAAI;QACP,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;KAC/B,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,wBAAwB,CAAC,IAYxC;IACC,OAAO;QACL,IAAI,EAAE,iBAAiB;QACvB,KAAK,EAAE,OAAO;QACd,MAAM,EAAE,YAAY;QACpB,GAAG,IAAI;QACP,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;KAC/B,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,mBAAmB,CAAC,IAQnC;IACC,OAAO;QACL,IAAI,EAAE,YAAY;QAClB,KAAK,EAAE,MAAM;QACb,MAAM,EAAE,YAAY;QACpB,GAAG,IAAI;QACP,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;KAC/B,CAAC;AACJ,CAAC","sourcesContent":["// SPDX-License-Identifier: MIT-0\n\nexport type OcorrenciaNivel = 'erro' | 'aviso' | 'info' | 'sucesso';\n\n// Versão base (compatível com núcleo)\nexport interface OcorrenciaBase {\n  mensagem: string;\n  relPath: string;\n  tipo?: string; // Opcional para compatibilidade com núcleo\n  nivel?: string | OcorrenciaNivel;\n  linha?: number;\n  coluna?: number;\n  origem?: string;\n  arquivo?: string;\n}\n\n// Versão estendida para analistas (tipo obrigatório)\nexport interface OcorrenciaAnalista extends OcorrenciaBase {\n  tipo: string; // Obrigatório para analistas\n  nivel?: OcorrenciaNivel;\n}\n\n// Tipos específicos de ocorrências\nexport interface OcorrenciaErroAnalista extends OcorrenciaAnalista {\n  tipo: 'ERRO_ANALISTA';\n  stack?: string;\n}\n\nexport interface OcorrenciaComplexidadeFuncao extends OcorrenciaAnalista {\n  tipo: 'FUNCAO_COMPLEXA';\n  linhas?: number;\n  parametros?: number;\n  aninhamento?: number;\n  limites?: {\n    maxLinhas?: number;\n    maxParametros?: number;\n    maxAninhamento?: number;\n  };\n}\n\nexport interface OcorrenciaParseErro extends OcorrenciaAnalista {\n  tipo: 'PARSE_ERRO';\n  detalhe?: string;\n  trecho?: string;\n}\n\nexport interface OcorrenciaGenerica extends OcorrenciaAnalista {\n  [k: string]: unknown;\n}\n\n// União de todos os tipos\nexport type Ocorrencia =\n  | OcorrenciaBase\n  | OcorrenciaAnalista\n  | OcorrenciaErroAnalista\n  | OcorrenciaComplexidadeFuncao\n  | OcorrenciaParseErro\n  | OcorrenciaGenerica;\n\nexport type SeveridadeTexto = 'info' | 'aviso' | 'risco' | 'critico';\n\n// Função para criar ocorrência (compatível com ambos os casos)\n\nexport function criarOcorrencia(\n  base: Pick<OcorrenciaBase, 'mensagem' | 'relPath'> & Partial<OcorrenciaBase>,\n): OcorrenciaBase {\n  return {\n    nivel: 'info',\n    origem: 'prometheus',\n    ...base,\n    mensagem: base.mensagem.trim(),\n  };\n}\n\n// Funções específicas\n\nexport function ocorrenciaErroAnalista(data: {\n  mensagem: string;\n  relPath: string;\n  stack?: string;\n  origem?: string;\n}): OcorrenciaErroAnalista {\n  return {\n    tipo: 'ERRO_ANALISTA',\n    nivel: 'erro',\n    origem: 'prometheus',\n    ...data,\n    mensagem: data.mensagem.trim(),\n  };\n}\n\nexport function ocorrenciaFuncaoComplexa(data: {\n  mensagem: string;\n  relPath: string;\n  linhas?: number;\n  parametros?: number;\n  aninhamento?: number;\n  limites?: {\n    maxLinhas?: number;\n    maxParametros?: number;\n    maxAninhamento?: number;\n  };\n  origem?: string;\n}): OcorrenciaComplexidadeFuncao {\n  return {\n    tipo: 'FUNCAO_COMPLEXA',\n    nivel: 'aviso',\n    origem: 'prometheus',\n    ...data,\n    mensagem: data.mensagem.trim(),\n  };\n}\n\nexport function ocorrenciaParseErro(data: {\n  mensagem: string;\n  relPath: string;\n  detalhe?: string;\n  trecho?: string;\n  origem?: string;\n  linha?: number;\n  coluna?: number;\n}): OcorrenciaParseErro {\n  return {\n    tipo: 'PARSE_ERRO',\n    nivel: 'erro',\n    origem: 'prometheus',\n    ...data,\n    mensagem: data.mensagem.trim(),\n  };\n}\n"]}