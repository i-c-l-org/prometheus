{"version":3,"file":"plugins.js","sourceRoot":"","sources":["../../../../src/types/core/parsing/plugins.ts"],"names":[],"mappings":"","sourcesContent":["// SPDX-License-Identifier: MIT\n\nimport type { File as BabelFile, Node } from '@babel/types';\n\n/**\n * AST genérico de diferentes parsers (Python, PHP, XML, HTML, CSS, etc)\n */\n\n// Tipos específicos para cada linguagem\nexport type PythonPhpAstNode = {\n  type: string;\n  body?: PythonPhpAstNode | PythonPhpAstNode[];\n  [key: string]: PythonPhpAstNode | PythonPhpAstNode[] | string | string[] | number | number[] | boolean | null | undefined;\n};\nexport type HtmlXmlNode = {\n  tagNome?: string;\n  name?: string;\n  type?: string;\n  children?: HtmlXmlNode[];\n  attribs?: Record<string, string>;\n  attributes?: Record<string, string | number | boolean>;\n  data?: string;\n  [key: string]: HtmlXmlNode | HtmlXmlNode[] | string | number | boolean | Record<string, unknown> | null | undefined;\n};\nexport type CssRule = {\n  type?: string;\n  selectors?: string[];\n  declarations?: Array<{\n    property: string;\n    value: string;\n  }>;\n  [key: string]: string | string[] | Array<Record<string, string>> | undefined;\n};\nexport type CssAst = {\n  type: 'StyleSheet';\n  stylesheet?: {\n    rules?: CssRule[];\n    parsingErrors?: Array<{\n      message: string;\n      line?: number;\n    }>;\n  };\n};\nexport type RawAst = Node // Babel AST\n| PythonPhpAstNode // Python/PHP AST-like\n| HtmlXmlNode // HTML/XML DOM\n| CssAst // CSS AST\n| Record<string, string | string[] | number | boolean | Record<string, unknown> | null | undefined>; // Fallback genérico\n\n// Alias para uso em parser.ts\nexport type ParserRawAst = RawAst;\n\n/**\n * Metadados do parsing\n */\nexport interface ParserMetadata {\n  parseTime?: number;\n  parserVersion?: string;\n  language?: string;\n  encoding?: string;\n  errors?: Array<{\n    line: number;\n    message: string;\n  }>;\n  warnings?: string[];\n  sourceType?: 'module' | 'script' | 'unambiguous';\n}\nexport interface ParserPlugin {\n  name: string;\n  version: string;\n  extensions: string[];\n  parse(codigo: string, opts?: ParserOptions): Promise<BabelFile | null> | BabelFile | null;\n  validate?(codigo: string): boolean;\n  dependencies?: string[];\n  config?: Record<string, unknown>;\n}\nexport interface ParserOptions {\n  plugins?: string[];\n  timeoutMs?: number;\n  pluginConfig?: Record<string, unknown>;\n  extension?: string;\n  sourceType?: 'module' | 'script' | 'unambiguous';\n  allowReturnOutsideFunction?: boolean;\n}\nexport interface BabelFileExtra extends BabelFile {\n  prometheusExtra?: {\n    lang: string;\n    rawAst: RawAst;\n    metadata?: ParserMetadata;\n  };\n}\nexport interface PluginConfig {\n  enabled: string[];\n  autoload: boolean;\n  registry?: string;\n  pluginConfigs?: Record<string, Record<string, unknown>>;\n}\nexport interface LanguageSupport {\n  enabled: boolean;\n  parser?: string;\n  plugin?: string;\n  config?: Record<string, unknown>;\n}"]}