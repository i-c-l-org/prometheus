{"version":3,"file":"registry.js","sourceRoot":"","sources":["../../../src/shared/plugins/registry.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,iBAAiB,EAAE,MAAM,0CAA0C,CAAC;AAC7E,OAAO,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,yBAAyB,CAAC;AAQvD,MAAM,OAAO,cAAc;IACjB,OAAO,GAAG,IAAI,GAAG,EAAwB,CAAC;IAC1C,YAAY,GAAG,IAAI,GAAG,EAAkB,CAAC;IACzC,MAAM,CAAe;IACrB,qBAAqB,GAAG,KAAK,CAAC;IAC9B,eAAe,CAAkC;IACjD,eAAe,GAAG,IAAI,GAAG,EAAiC,CAAC;IACnE,YAAY,MAAqB,EAAE,eAAiD;QAClF,IAAI,CAAC,MAAM,GAAG;YACZ,OAAO,EAAE,CAAC,MAAM,CAAC;YACjB,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,qBAAqB;YAC/B,GAAG,MAAM;SACV,CAAC;QACF,IAAI,CAAC,qBAAqB,GAAG,CAAC,CAAC,MAAM,EAAE,OAAO,CAAC;QAC/C,IAAI,CAAC,eAAe,GAAG,eAAe,IAAI,EAAE,CAAC;IAC/C,CAAC;IAKD,cAAc,CAAC,MAAoB;QACjC,OAAO,CAAC,iBAAiB,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC;QAGvD,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QAG5B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAGtC,KAAK,MAAM,GAAG,IAAI,MAAM,CAAC,UAAU,EAAE,CAAC;YACpC,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC;gBAC/B,MAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBAC5C,GAAG,CAAC,KAAK,CAAC,eAAe,GAAG,2BAA2B,QAAQ,wBAAwB,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;YACxG,CAAC;YACD,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;QAC1C,CAAC;QACD,GAAG,CAAC,KAAK,CAAC,YAAY,MAAM,CAAC,IAAI,8BAA8B,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACjG,CAAC;IAKD,KAAK,CAAC,UAAU,CAAC,IAAY;QAE3B,IAAI,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC;YAC3B,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACtC,IAAI,CAAC,MAAM,EAAE,CAAC;gBACZ,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,gCAAgC,CAAC,IAAI,CAAC,CAAC,CAAC;YAC5E,CAAC;YACD,OAAO,MAAM,CAAC;QAChB,CAAC;QAMD,IAAI,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC;YACnC,MAAM,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAC/C,IAAI,CAAC,OAAO,EAAE,CAAC;gBACb,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,uCAAuC,CAAC,IAAI,CAAC,CAAC,CAAC;YACnF,CAAC;YACD,OAAO,OAAO,CAAC;QACjB,CAAC;QAGD,MAAM,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC;QAC/C,IAAI,CAAC;YACH,MAAM,MAAM,GAAG,MAAM,cAAc,CAAC;YACpC,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAClC,OAAO,MAAM,CAAC;QAChB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAClC,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;IAKO,KAAK,CAAC,YAAY,CAAC,IAAY;QACrC,GAAG,CAAC,KAAK,CAAC,yBAAyB,IAAI,EAAE,CAAC,CAAC;QAC3C,IAAI,CAAC;YAEH,MAAM,aAAa,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,IAAI,IAAI,SAAS,CAAC;YAE/D,MAAM,SAAS,GAAoB,UAA8B,CAAC,MAAM,IAAI,CAAC,CAAC,CAAS,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YACvG,MAAM,YAAY,GAAG,MAAM,SAAS,CAAC,aAAa,CAAC,CAAC;YACpD,MAAM,MAAM,GAAkB,YAAwC,CAAC,OAAuB,IAAI,YAA4B,CAAC;YAG/H,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;YAC5B,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;YAC5B,OAAO,MAAM,CAAC;QAChB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,kBAAkB,CAAC,IAAI,EAAG,KAAe,CAAC,OAAO,CAAC,CAAC;YAC3D,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,4BAA4B,CAAC,IAAI,EAAG,KAAe,CAAC,OAAO,CAAC,CAAC,CAAC;QAClG,CAAC;IACH,CAAC;IAKD,KAAK,CAAC,qBAAqB,CAAC,SAAiB;QAC3C,MAAM,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACpD,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;gBACzB,OAAO,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;gBAEpC,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBACrD,IAAI,YAAY,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC;oBAC/D,IAAI,CAAC;wBACH,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;oBAC7C,CAAC;oBAAC,MAAM,CAAC;wBACP,OAAO,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;oBACvC,CAAC;gBACH,CAAC;YACH,CAAC;YACD,OAAO,IAAI,CAAC;QACd,CAAC;QAKD,IAAI,IAAI,CAAC,qBAAqB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE,CAAC;YAC5E,GAAG,CAAC,KAAK,CAAC,aAAa,UAAU,oCAAoC,SAAS,EAAE,CAAC,CAAC;YAClF,OAAO,IAAI,CAAC;QACd,CAAC;QAGD,MAAM,SAAS,GAAG,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QACzC,MAAM,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;QACpD,IAAI,WAAW,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;YACxC,GAAG,CAAC,KAAK,CAAC,0BAA0B,SAAS,oBAAoB,CAAC,CAAC;YACnE,OAAO,IAAI,CAAC;QACd,CAAC;QACD,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;IAC3C,CAAC;IAKO,eAAe,CAAC,SAAiB;QACvC,MAAM,MAAM,GAA2B;YACrC,MAAM,EAAE,MAAM;YAEd,OAAO,EAAE,MAAM;YAEf,MAAM,EAAE,MAAM;YACd,MAAM,EAAE,MAAM;YAEd,KAAK,EAAE,MAAM;YACb,MAAM,EAAE,MAAM;YACd,KAAK,EAAE,MAAM;YACb,MAAM,EAAE,MAAM;YACd,MAAM,EAAE,MAAM;YACd,MAAM,EAAE,MAAM;YACd,MAAM,EAAE,MAAM;YAEd,KAAK,EAAE,MAAM;SACd,CAAC;QACF,OAAO,MAAM,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC;IACnC,CAAC;IAKO,cAAc,CAAC,MAAoB;QACzC,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,OAAO,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE,CAAC;YACpD,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,CAAC;QAC7D,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,OAAO,IAAI,OAAO,MAAM,CAAC,OAAO,KAAK,QAAQ,EAAE,CAAC;YAC1D,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,yBAAyB,CAAC,CAAC;QAC/D,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,MAAM,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YACxE,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,qCAAqC,CAAC,CAAC;QAC3E,CAAC;QACD,IAAI,OAAO,MAAM,CAAC,KAAK,KAAK,UAAU,EAAE,CAAC;YACvC,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,gCAAgC,CAAC,CAAC;QACtE,CAAC;IACH,CAAC;IAKD,oBAAoB;QAClB,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC;IACzC,CAAC;IAKD,sBAAsB;QACpB,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,CAAC;IAC9C,CAAC;IAKD,QAAQ;QAMN,OAAO;YACL,kBAAkB,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI;YACrC,mBAAmB,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI;YAC3C,kBAAkB,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM;YAC9C,aAAa,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ;SACpC,CAAC;IACJ,CAAC;IAKD,YAAY,CAAC,SAAgC;QAC3C,IAAI,CAAC,MAAM,GAAG;YACZ,GAAG,IAAI,CAAC,MAAM;YACd,GAAG,SAAS;SACb,CAAC;QACF,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,EAAE,SAAS,CAAC,EAAE,CAAC;YAC/D,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QACpC,CAAC;QACD,GAAG,CAAC,KAAK,CAAC,wCAAwC,CAAC,CAAC;IACtD,CAAC;IAKD,qBAAqB,CAAC,UAA2C;QAC/D,IAAI,CAAC,eAAe,GAAG;YACrB,GAAG,IAAI,CAAC,eAAe;YACvB,GAAG,UAAU;SACd,CAAC;QACF,GAAG,CAAC,KAAK,CAAC,oCAAoC,CAAC,CAAC;IAClD,CAAC;IAKD,UAAU;QACR,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QACrB,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;QAC1B,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;QAC7B,GAAG,CAAC,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAC1C,CAAC;CACF;AAKD,IAAI,cAAc,GAA0B,IAAI,CAAC;AAMjD,MAAM,UAAU,iBAAiB;IAC/B,IAAI,CAAC,cAAc,EAAE,CAAC;QACpB,cAAc,GAAG,IAAI,cAAc,EAAE,CAAC;IACxC,CAAC;IACD,OAAO,cAAc,CAAC;AACxB,CAAC;AAMD,MAAM,UAAU,uBAAuB,CAAC,MAAqB,EAAE,eAAiD;IAC9G,cAAc,GAAG,IAAI,cAAc,CAAC,MAAM,EAAE,eAAe,CAAC,CAAC;AAC/D,CAAC;AAMD,MAAM,UAAU,mBAAmB;IACjC,cAAc,GAAG,IAAI,CAAC;AACxB,CAAC","sourcesContent":["// SPDX-License-Identifier: MIT\nimport { ExcecoesMensagens } from '@core/messages/core/excecoes-messages.js';\nimport { log, logCore } from '@core/messages/index.js';\n\nimport type { GlobalComImport, ImportDinamico, LanguageSupport, ParserPlugin, PluginConfig } from '@';\n\n/**\n * Registry centralizado para gerenciamento de plugins de parser\n * Suporta loading din√¢mico, cache e configura√ß√£o flex√≠vel\n */\nexport class PluginRegistry {\n  private plugins = new Map<string, ParserPlugin>();\n  private extensionMap = new Map<string, string>(); // extens√£o -> nome do plugin\n  private config: PluginConfig;\n  private userConfiguredEnabled = false;\n  private languageSupport: Record<string, LanguageSupport>;\n  private loadingPromises = new Map<string, Promise<ParserPlugin>>();\n  constructor(config?: PluginConfig, languageSupport?: Record<string, LanguageSupport>) {\n    this.config = {\n      enabled: ['core'],\n      autoload: true,\n      registry: '@prometheus/plugins',\n      ...config\n    };\n    this.userConfiguredEnabled = !!config?.enabled;\n    this.languageSupport = languageSupport || {};\n  }\n\n  /**\n   * Registra um plugin no registry\n   */\n  registerPlugin(plugin: ParserPlugin): void {\n    logCore.registrandoPlugin(plugin.name, plugin.version);\n\n    // Valida o plugin\n    this.validatePlugin(plugin);\n\n    // Registra o plugin\n    this.plugins.set(plugin.name, plugin);\n\n    // Mapeia extens√µes para o plugin\n    for (const ext of plugin.extensions) {\n      if (this.extensionMap.has(ext)) {\n        const existing = this.extensionMap.get(ext);\n        log.debug(`‚ö†Ô∏è Extens√£o ${ext} j√° mapeada para plugin ${existing}, sobrescrevendo com ${plugin.name}`);\n      }\n      this.extensionMap.set(ext, plugin.name);\n    }\n    log.debug(`‚úÖ Plugin ${plugin.name} registrado com extens√µes: ${plugin.extensions.join(', ')}`);\n  }\n\n  /**\n   * Carrega um plugin dinamicamente\n   */\n  async loadPlugin(name: string): Promise<ParserPlugin> {\n    // Se j√° est√° carregado, retorna\n    if (this.plugins.has(name)) {\n      const plugin = this.plugins.get(name);\n      if (!plugin) {\n        throw new Error(ExcecoesMensagens.pluginRegistradoNaoPodeSerObtido(name));\n      }\n      return plugin;\n    }\n\n    // Se j√° est√° sendo carregado, retorna a promise existente\n    // NOTE: este padr√£o evita condi√ß√µes de race onde m√∫ltiplos callers tentariam\n    // carregar o mesmo plugin simultaneamente ‚Äî a promise existente √© retornada\n    // e quaisquer erros s√£o propagados pela promise, evitando rejetions n√£o tratadas.\n    if (this.loadingPromises.has(name)) {\n      const promise = this.loadingPromises.get(name);\n      if (!promise) {\n        throw new Error(ExcecoesMensagens.pluginCarregandoPromiseNaoPodeSerObtida(name));\n      }\n      return promise;\n    }\n\n    // Cria nova promise de loading\n    const loadingPromise = this.doLoadPlugin(name);\n    this.loadingPromises.set(name, loadingPromise);\n    try {\n      const plugin = await loadingPromise;\n      this.loadingPromises.delete(name);\n      return plugin;\n    } catch (error) {\n      this.loadingPromises.delete(name);\n      throw error;\n    }\n  }\n\n  /**\n   * Implementa√ß√£o real do loading do plugin\n   */\n  private async doLoadPlugin(name: string): Promise<ParserPlugin> {\n    log.debug(`üì¶ Carregando plugin: ${name}`);\n    try {\n      // Tenta carregar do registry configurado\n      const pluginCaminho = `${this.config.registry}/${name}-plugin`;\n      // Usa import din√¢mico mock√°vel (globalThis.import pode ser substitu√≠do nos testes)\n      const dynImport: ImportDinamico = (globalThis as GlobalComImport).import || ((p: string) => import(p));\n      const pluginModule = await dynImport(pluginCaminho);\n      const plugin: ParserPlugin = (pluginModule as Record<string, unknown>).default as ParserPlugin || pluginModule as ParserPlugin;\n\n      // Valida e registra\n      this.validatePlugin(plugin);\n      this.registerPlugin(plugin);\n      return plugin;\n    } catch (error) {\n      logCore.erroCarregarPlugin(name, (error as Error).message);\n      throw new Error(ExcecoesMensagens.naoFoiPossivelCarregarPlugin(name, (error as Error).message));\n    }\n  }\n\n  /**\n   * Obt√©m plugin por extens√£o de arquivo\n   */\n  async getPluginForExtension(extension: string): Promise<ParserPlugin | null> {\n    const pluginNome = this.extensionMap.get(extension);\n    if (!pluginNome) {\n      if (this.config.autoload) {\n        logCore.tentandoAutoload(extension);\n        // Tenta inferir nome do plugin pela extens√£o\n        const inferredNome = this.inferPluginName(extension);\n        if (inferredNome && this.config.enabled.includes(inferredNome)) {\n          try {\n            return await this.loadPlugin(inferredNome);\n          } catch {\n            logCore.autoloadFalhou(inferredNome);\n          }\n        }\n      }\n      return null;\n    }\n\n    // Verifica se o plugin est√° habilitado\n    // Regra: se o usu√°rio N√ÉO configurou a lista 'enabled', tratamos todos os plugins registrados como habilitados por padr√£o.\n    // S√≥ aplicamos o gate includes() quando houve configura√ß√£o expl√≠cita de 'enabled'.\n    if (this.userConfiguredEnabled && !this.config.enabled.includes(pluginNome)) {\n      log.debug(`üö´ Plugin ${pluginNome} est√° desabilitado para extens√£o ${extension}`);\n      return null;\n    }\n\n    // Verifica suporte da linguagem\n    const langChave = extension.substring(1); // remove o ponto\n    const langSuporte = this.languageSupport[langChave];\n    if (langSuporte && !langSuporte.enabled) {\n      log.debug(`üö´ Suporte √† linguagem ${langChave} est√° desabilitado`);\n      return null;\n    }\n    return await this.loadPlugin(pluginNome);\n  }\n\n  /**\n   * Infere nome do plugin baseado na extens√£o\n   */\n  private inferPluginName(extension: string): string | null {\n    const extMap: Record<string, string> = {\n      '.xml': 'core',\n      // XML fica no core\n      '.html': 'core',\n      // HTML fica no core\n      '.htm': 'core',\n      '.css': 'core',\n      // CSS fica no core\n      '.js': 'core',\n      '.jsx': 'core',\n      '.ts': 'core',\n      '.tsx': 'core',\n      '.mjs': 'core',\n      '.cjs': 'core',\n      '.php': 'core',\n      // PHP fica no core\n      '.py': 'core' // Python fica no core\n    };\n    return extMap[extension] || null;\n  }\n\n  /**\n   * Valida um plugin antes do registro\n   */\n  private validatePlugin(plugin: ParserPlugin): void {\n    if (!plugin.name || typeof plugin.name !== 'string') {\n      throw new Error(ExcecoesMensagens.pluginDeveTerNomeValido);\n    }\n    if (!plugin.version || typeof plugin.version !== 'string') {\n      throw new Error(ExcecoesMensagens.pluginDeveTerVersaoValida);\n    }\n    if (!Array.isArray(plugin.extensions) || plugin.extensions.length === 0) {\n      throw new Error(ExcecoesMensagens.pluginDeveDefinirPeloMenosUmaExtensao);\n    }\n    if (typeof plugin.parse !== 'function') {\n      throw new Error(ExcecoesMensagens.pluginDeveImplementarMetodoParse);\n    }\n  }\n\n  /**\n   * Lista plugins registrados\n   */\n  getRegisteredPlugins(): string[] {\n    return Array.from(this.plugins.keys());\n  }\n\n  /**\n   * Lista extens√µes suportadas\n   */\n  getSupportedExtensions(): string[] {\n    return Array.from(this.extensionMap.keys());\n  }\n\n  /**\n   * Obt√©m estat√≠sticas do registry\n   */\n  getStats(): {\n    pluginsRegistrados: number;\n    extensoesSuportadas: number;\n    pluginsHabilitados: number;\n    autoloadAtivo: boolean;\n  } {\n    return {\n      pluginsRegistrados: this.plugins.size,\n      extensoesSuportadas: this.extensionMap.size,\n      pluginsHabilitados: this.config.enabled.length,\n      autoloadAtivo: this.config.autoload\n    };\n  }\n\n  /**\n   * Atualiza configura√ß√£o do registry\n   */\n  updateConfig(newConfig: Partial<PluginConfig>): void {\n    this.config = {\n      ...this.config,\n      ...newConfig\n    };\n    if (Object.prototype.hasOwnProperty.call(newConfig, 'enabled')) {\n      this.userConfiguredEnabled = true;\n    }\n    log.debug(`üîß Configura√ß√£o do registry atualizada`);\n  }\n\n  /**\n   * Atualiza suporte a linguagens\n   */\n  updateLanguageSupport(newSupport: Record<string, LanguageSupport>): void {\n    this.languageSupport = {\n      ...this.languageSupport,\n      ...newSupport\n    };\n    log.debug(`üåê Suporte a linguagens atualizado`);\n  }\n\n  /**\n   * Limpa cache de plugins (√∫til para testes)\n   */\n  clearCache(): void {\n    this.plugins.clear();\n    this.extensionMap.clear();\n    this.loadingPromises.clear();\n    log.debug(`üßπ Cache do registry limpo`);\n  }\n}\n\n/**\n * Inst√¢ncia global do registry (singleton)\n */\nlet globalRegistro: PluginRegistry | null = null;\n\n/**\n * Obt√©m a inst√¢ncia global do registry\n */\n\nexport function getGlobalRegistry(): PluginRegistry {\n  if (!globalRegistro) {\n    globalRegistro = new PluginRegistry();\n  }\n  return globalRegistro;\n}\n\n/**\n * Configura a inst√¢ncia global do registry\n */\n\nexport function configureGlobalRegistry(config?: PluginConfig, languageSupport?: Record<string, LanguageSupport>): void {\n  globalRegistro = new PluginRegistry(config, languageSupport);\n}\n\n/**\n * Reseta a inst√¢ncia global (√∫til para testes)\n */\n\nexport function resetGlobalRegistry(): void {\n  globalRegistro = null;\n}"]}