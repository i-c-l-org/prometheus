{"version":3,"file":"magic-constants-whitelist.js","sourceRoot":"","sources":["../../../src/shared/helpers/magic-constants-whitelist.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\n\n/**\n * Whitelist de magic constants conhecidos de frameworks populares.\n *\n * Esses valores são limitações documentadas de APIs externas e não devem\n * ser reportados como magic numbers, pois criar constantes para eles é verboso\n * e todos os desenvolvedores que usam essas APIs conhecem esses limites.\n */\n\nimport type { MagicConstantRule } from '@';\n\nexport type { MagicConstantRule };\n\n/**\n * Discord.js API limits (oficialmente documentados)\n * @see https://discord.com/developers/docs/resources/channel#embed-limits\n * @see https://discord.com/developers/docs/interactions/message-components#select-menus\n */\nexport const DISCORD_LIMITES: MagicConstantRule[] = [{\n  value: 10,\n  description: 'Máximo de fields em embed'\n}, {\n  value: 25,\n  description: 'Máximo de opções em SelectMenu'\n}, {\n  value: 90,\n  description: 'Máximo de caracteres em button label'\n}, {\n  value: 100,\n  description: 'Máximo de caracteres em select option label'\n}, {\n  value: 256,\n  description: 'Máximo de caracteres em embed field name'\n}, {\n  value: 1024,\n  description: 'Máximo de caracteres em embed field value'\n}, {\n  value: 2000,\n  description: 'Máximo de caracteres em mensagem'\n}, {\n  value: 4000,\n  description: 'Máximo de caracteres em embed description'\n}, {\n  value: 6000,\n  description: 'Máximo total de caracteres em embed'\n}];\n\n/**\n * HTTP Status Codes comuns\n */\nexport const HTTP_STATUS_CODIGOS: MagicConstantRule[] = [{\n  value: 200,\n  description: 'HTTP OK'\n}, {\n  value: 201,\n  description: 'HTTP Created'\n}, {\n  value: 204,\n  description: 'HTTP No Content'\n}, {\n  value: 400,\n  description: 'HTTP Bad Request'\n}, {\n  value: 401,\n  description: 'HTTP Unauthorized'\n}, {\n  value: 403,\n  description: 'HTTP Forbidden'\n}, {\n  value: 404,\n  description: 'HTTP Not Found'\n}, {\n  value: 500,\n  description: 'HTTP Internal Server Error'\n}, {\n  value: 502,\n  description: 'HTTP Bad Gateway'\n}, {\n  value: 503,\n  description: 'HTTP Service Unavailable'\n}];\n\n/**\n * Limites comuns de paginação e performance\n */\nexport const COMUM_LIMITES: MagicConstantRule[] = [{\n  value: 20,\n  description: 'Paginação padrão (20 items)'\n}, {\n  value: 50,\n  description: 'Paginação média (50 items)'\n}, {\n  value: 5000,\n  description: 'Limite comum de batch operations'\n}, {\n  value: 10000,\n  description: 'Limite de query results'\n}];\n\n/**\n * Valores matemáticos comuns (já cobertos no detector, mas listados para completude)\n */\nexport const MATH_CONSTANTES: MagicConstantRule[] = [{\n  value: -1,\n  description: 'Index not found'\n}, {\n  value: 0,\n  description: 'Zero/inicial'\n}, {\n  value: 1,\n  description: 'Um/incremento'\n}, {\n  value: 2,\n  description: 'Dois/par'\n}, {\n  value: 10,\n  description: 'Base decimal'\n}, {\n  value: 100,\n  description: 'Porcentagem'\n}, {\n  value: 1000,\n  description: 'Milhar/conversão ms→s'\n}];\n\n/**\n * Mapa de frameworks para suas whitelists\n */\nexport const FRAMEWORK_WHITELISTS: Record<string, MagicConstantRule[]> = {\n  'Discord.js': DISCORD_LIMITES,\n  Express: HTTP_STATUS_CODIGOS,\n  Fastify: HTTP_STATUS_CODIGOS,\n  'Next.js': HTTP_STATUS_CODIGOS,\n  React: [],\n  Vue: [],\n  Angular: [],\n  Stripe: [],\n  'AWS SDK': []\n};\n\n/**\n * Verifica se um valor numérico está na whitelist para os frameworks detectados\n */\nexport function isWhitelistedConstant(value: number, frameworks: string[], userWhitelist?: number[]): boolean {\n  // Verificar whitelist do usuário primeiro\n  if (userWhitelist && userWhitelist.includes(value)) {\n    return true;\n  }\n\n  // Verificar valores matemáticos comuns (sempre válidos)\n  if (MATH_CONSTANTES.some(rule => rule.value === value)) {\n    return true;\n  }\n\n  // Verificar limites comuns\n  if (COMUM_LIMITES.some(rule => rule.value === value)) {\n    return true;\n  }\n\n  // Verificar HTTP status codes (sempre válidos em projetos web)\n  if (HTTP_STATUS_CODIGOS.some(rule => rule.value === value)) {\n    return true;\n  }\n\n  // Verificar whitelists específicas de frameworks\n  for (const framework of frameworks) {\n    const whitelist = FRAMEWORK_WHITELISTS[framework];\n    if (whitelist && whitelist.some(rule => rule.value === value)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Obtém a descrição de um magic constant, se estiver na whitelist\n */\nexport function getConstantDescription(value: number, frameworks: string[]): string | undefined {\n  // Verificar todas as whitelists\n  const allRules = [...MATH_CONSTANTES, ...COMUM_LIMITES, ...HTTP_STATUS_CODIGOS, ...frameworks.flatMap(f => FRAMEWORK_WHITELISTS[f] || [])];\n  const rule = allRules.find(r => r.value === value);\n  return rule?.description;\n}"]}