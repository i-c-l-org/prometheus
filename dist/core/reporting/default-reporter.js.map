{"version":3,"file":"default-reporter.js","sourceRoot":"","sources":["../../../src/core/reporting/default-reporter.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT-0\nimport { DetectorArquiteturaMensagens } from '@core/messages/analistas/detector-arquitetura-messages.js';\n\nimport type { Ocorrencia, ReportEvent } from '@';\nimport { criarOcorrencia } from '@';\n\nexport function createDefaultReporter() {\n  return (event: ReportEvent): Ocorrencia => {\n    const {\n      code,\n      tipo,\n      nivel = 'info',\n      mensagem,\n      data,\n      relPath,\n      linha = 1,\n      coluna,\n      origem,\n    } = event;\n\n    // Se a mensagem já veio formatada, apenas encaminha\n    if (mensagem && typeof mensagem === 'string') {\n      return criarOcorrencia({\n        tipo,\n        nivel,\n        mensagem,\n        relPath,\n        linha,\n        coluna,\n        origem,\n      });\n    }\n\n    // Mapeamentos mínimos (incrementais) por code\n    if (code === 'ARQ_PADRAO') {\n      const padrao = String((data?.padraoIdentificado as unknown) ?? '');\n      const confianca = Number((data?.confianca as unknown) ?? 0);\n      return criarOcorrencia({\n        tipo,\n        nivel,\n        mensagem: DetectorArquiteturaMensagens.padraoArquitetural(\n          padrao,\n          confianca,\n        ),\n        relPath,\n        linha,\n        coluna,\n        origem,\n      });\n    }\n\n    if (code === 'ARQ_CARACTERISTICAS') {\n      const items = Array.isArray(data?.caracteristicas)\n        ? (data?.caracteristicas as unknown as string[])\n        : [];\n      return criarOcorrencia({\n        tipo,\n        nivel,\n        mensagem: DetectorArquiteturaMensagens.caracteristicas(items),\n        relPath,\n        linha,\n        coluna,\n        origem,\n      });\n    }\n\n    if (code === 'ARQ_VIOLACAO') {\n      const violacao = String((data?.violacao as unknown) ?? '');\n      return criarOcorrencia({\n        tipo,\n        nivel,\n        mensagem: DetectorArquiteturaMensagens.violacao(violacao),\n        relPath,\n        linha,\n        coluna,\n        origem,\n      });\n    }\n\n    if (code === 'ARQ_METRICAS') {\n      const acoplamento = Number((data?.acoplamento as unknown) ?? 0);\n      const coesao = Number((data?.coesao as unknown) ?? 0);\n      return criarOcorrencia({\n        tipo,\n        nivel,\n        mensagem: DetectorArquiteturaMensagens.metricas(acoplamento, coesao),\n        relPath,\n        linha,\n        coluna,\n        origem,\n      });\n    }\n\n    if (code === 'ARQ_ERRO') {\n      return criarOcorrencia({\n        tipo,\n        nivel,\n        mensagem: DetectorArquiteturaMensagens.erroAnalisarArquitetura(data?.erro),\n        relPath,\n        linha,\n        coluna,\n        origem,\n      });\n    }\n\n    // Fallback: mantém sinal útil mesmo sem template\n    const fallbackMsg = code\n      ? `${code}${data ? ` ${JSON.stringify(data)}` : ''}`\n      : data\n        ? JSON.stringify(data)\n        : 'Ocorrência reportada';\n\n    return criarOcorrencia({\n      tipo,\n      nivel,\n      mensagem: fallbackMsg,\n      relPath,\n      linha,\n      coluna,\n      origem,\n    });\n  };\n}\n\n"]}