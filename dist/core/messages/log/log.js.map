{"version":3,"file":"log.js","sourceRoot":"","sources":["../../../../src/core/messages/log/log.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\n// @prometheus-disable PROBLEMA_PERFORMANCE\n// Justificativa: sistema de log que processa mensagens - loops são esperados\nimport type tty from 'node:tty';\n\nimport chalk from '@core/config/chalk-safe.js';\nimport { config } from '@core/config/config.js';\nimport { isJsonMode } from '@shared/helpers/json-mode.js';\n\nimport type { FormatOptions, Nivel, StyleFn } from '@';\n// Reexport para testes configurarem flags sem importar cosmos diretamente\nexport { config } from '@core/config/config.js';\nexport const LOG_SIMBOLOS = {\n  // Prefixos de níveis de severidade com cores ANSI\n  info: '[INFO]',\n  sucesso: '[OK]',\n  erro: '[ERRO]',\n  aviso: '[AVISO]',\n  debug: '[DEBUG]',\n  fase: '[>]',\n  passo: '[*]',\n  scan: '[SCAN]',\n  guardian: '[GUARD]',\n  pasta: '[DIR]'\n};\nfunction shouldSilence(): boolean {\n  // Modo JSON sempre silencia logs visuais\n  if (isJsonMode()) return true;\n  if (process.env.PROMETHEUS_FORCE_SILENT_JSON === '1') return true;\n  return config.REPORT_SILENCE_LOGS;\n}\nfunction shouldSuppressParcial(msg?: string): boolean {\n  try {\n    // Permite override rápido via variável de ambiente curta PROMETHEUS_SUPPRESS_PARCIAL=1\n    if (!config.SUPPRESS_PARCIAL_LOGS && process.env.PROMETHEUS_SUPPRESS_PARCIAL !== '1') return false;\n    if (!msg || typeof msg !== 'string') return false;\n    // Suprime quando substring 'parcial' (case-insensitive) aparece em qualquer lugar.\n    // Isso cobre 'parcial' e variações como 'parcialmente'.\n    return /parcial/i.test(msg);\n  } catch {\n    return false;\n  }\n}\nfunction isDebugMode(): boolean {\n  return config.DEV_MODE || process.env.PROMETHEUS_DEBUG === 'true';\n}\nfunction shouldLogLevel(nivel: Nivel): boolean {\n  const niveis = ['erro', 'aviso', 'info', 'debug'];\n  const nivelAtual = niveis.indexOf(config.LOG_LEVEL);\n  const nivelMensagem = niveis.indexOf(nivel);\n\n  // Erro e sucesso sempre são exibidos (high priority)\n  if (nivel === 'erro' || nivel === 'sucesso') return true;\n\n  // Debug só é exibido em modo debug ou se LOG_LEVEL=debug\n  if (nivel === 'debug') return isDebugMode() || config.LOG_LEVEL === 'debug';\n\n  // Para outros níveis, verifica se está dentro do threshold\n  return nivelMensagem <= nivelAtual;\n}\nfunction getTimestamp(): string {\n  const now = new Date().toLocaleTimeString('pt-BR', {\n    hour12: false,\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit'\n  });\n  return `[${now}]`;\n}\nfunction stripLeadingSimbolos(msg: string): string {\n  if (!msg) return msg;\n  const ansiRegex = /[\\u001B\\u009B][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g;\n  // Remove ANSI para avaliar início; manteremos saída sem estilos\n  let plain = msg.replace(ansiRegex, '');\n  // Normaliza quebras e espaços iniciais\n  plain = plain.replace(/^\\s+/, '');\n  // candidatos: símbolos do mapa + extras frequentes usados em mensagens\n  const extras: string[] = [];\n  const candidatos = Array.from(new Set([...Object.values(LOG_SIMBOLOS), ...extras])).filter(Boolean) as string[];\n\n  // Optimize: strip all matching prefixes in a single pass instead of while loop\n  let trimmed = plain.trimStart();\n  for (const s of candidatos) {\n    while (trimmed.startsWith(s)) {\n      trimmed = trimmed.slice(s.length);\n    }\n  }\n  // Espaços remanescentes após remoção\n  return trimmed.trimStart();\n}\n\n// Exportado para testes de formatação; uso interno no logger.\n\nexport function formatarLinha({\n  nivel,\n  mensagem,\n  sanitize = true\n}: FormatOptions): string {\n  const ts = getTimestamp();\n  const colNivelRaw = nivel.toUpperCase().padEnd(7);\n  // Resolver possíveis formas do 'chalk' (função ou objeto mockado com .bold)\n  const hasBold = (v: unknown): v is {\n    bold: StyleFn;\n  } => !!v && typeof (v as {\n    bold?: unknown;\n  }).bold === 'function';\n  const resolveStyle = (v: unknown): StyleFn => {\n    if (typeof v === 'function') return v as StyleFn;\n    if (hasBold(v)) return v.bold;\n    return (s: string) => String(s);\n  };\n  let cor: StyleFn = (s: string) => s;\n  switch (nivel) {\n    case 'info':\n      cor = resolveStyle(chalk.cyan);\n      break;\n    case 'sucesso':\n      cor = resolveStyle(chalk.green);\n      break;\n    case 'erro':\n      cor = resolveStyle(chalk.red);\n      break;\n    case 'aviso':\n      cor = resolveStyle(chalk.yellow);\n      break;\n    case 'debug':\n      cor = resolveStyle(chalk.magenta);\n      break;\n  }\n  const boldFn = resolveStyle(chalk.bold);\n  const colNivel = boldFn(colNivelRaw);\n  const corpo = sanitize ? stripLeadingSimbolos(mensagem) : mensagem;\n  // Colorimos mensagens de destaque (erro/aviso/sucesso) para reforçar visibilidade.\n  const corpoFmt = nivel === 'info' || nivel === 'debug' ? corpo : cor(corpo);\n  const grayFn: StyleFn = typeof chalk.gray === 'function' ? chalk.gray : (s: string) => String(s);\n  const linha = `${grayFn(ts)} ${colNivel} ${corpoFmt}`;\n  // Centraliza linhas soltas somente com opt-in explícito (PROMETHEUS_CENTER=1)\n  if (!process.env.VITEST && process.env.PROMETHEUS_CENTER === '1') {\n    try {\n      const cols = obterColunasTerm();\n      const out: tty.WriteStream | undefined = process.stdout && typeof (process.stdout as tty.WriteStream).isTTY !== 'undefined' ? process.stdout as tty.WriteStream : undefined;\n      const isTty = !!out && out.isTTY !== false;\n      if (isTty && cols && cols > 0) {\n        const ANSI_REGEX = /[\\u001B\\u009B][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g;\n        const visLen = (s: string) => (s || '').replace(ANSI_REGEX, '').length;\n        const pad = Math.floor(Math.max(0, cols - visLen(linha)) / 2);\n        if (pad > 0) return ' '.repeat(pad) + linha;\n      }\n    } catch {\n      // Se centralização falhar, retorna linha normal\n    }\n  }\n  return linha;\n}\n\n/**\n * Formata um bloco multi-linha com indentação consistente e moldura leve.\n * Útil para seções (fases) ou resumos compactos.\n */\n\nfunction obterColunasTerm(): number | undefined {\n  // Tenta obter largura do terminal de forma segura\n  try {\n    const out: tty.WriteStream | undefined = process.stdout && typeof (process.stdout as tty.WriteStream).columns !== 'undefined' ? process.stdout as tty.WriteStream : undefined;\n    const cols = out?.columns;\n    if (typeof cols === 'number' && cols > 0) return cols;\n  } catch {}\n  // Permite override explícito via env e fallback de variáveis comuns\n  const envOverride = Number(process.env.PROMETHEUS_FRAME_MAX_COLS || '0');\n  if (Number.isFinite(envOverride) && envOverride > 0) return envOverride;\n  const envCols = Number(process.env.COLUMNS || process.env.TERM_COLUMNS || '0');\n  return Number.isFinite(envCols) && envCols > 0 ? envCols : undefined;\n}\nfunction calcularLarguraInterna(titulo: string, linhas: string[], larguraMax?: number): {\n  width: number;\n  maxInner: number;\n  visLen: (s: string) => number;\n  ANSI_REGEX: RegExp;\n} {\n  const ANSI_REGEX = /[\\u001B\\u009B][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g;\n  const visLen = (s: string) => (s || '').replace(ANSI_REGEX, '').length;\n  // Largura desejada pelo conteúdo, com teto padrão (100) caso não especificado\n  const desejada = Math.min(100, Math.max(visLen(titulo) + 4, ...linhas.map(l => visLen(l) + 4), 20));\n  const preferida = typeof larguraMax === 'number' ? Math.max(20, Math.min(larguraMax, 120)) : desejada;\n  // Limite superior pela largura do terminal (responsivo)\n  const cols = obterColunasTerm();\n  const tetoTela = typeof cols === 'number' && cols > 0 ? Math.max(20, Math.min(cols, 120)) : 120;\n  const width = Math.max(20, Math.min(preferida, tetoTela));\n  const barraLen = Math.max(10, width - 2);\n  const maxInner = barraLen - 1;\n  return {\n    width,\n    maxInner,\n    visLen,\n    ANSI_REGEX\n  };\n}\nexport function formatarBloco(titulo: string, linhas: string[], corTitulo: StyleFn = typeof chalk.bold === 'function' ? chalk.bold : (s: string) => String(s), larguraMax?: number): string {\n  // Utilitários conscientes de ANSI para medir/compor por largura visível\n  const {\n    width,\n    maxInner,\n    visLen,\n    ANSI_REGEX\n  } = calcularLarguraInterna(titulo, linhas, larguraMax);\n  const padFimVisible = (s: string, target: number) => {\n    const diff = target - visLen(s);\n    return diff > 0 ? s + ' '.repeat(diff) : s;\n  };\n  const truncateVisible = (s: string, max: number) => {\n    if (visLen(s) <= max) return s;\n    // Preserva sequências ANSI, contando apenas largura visível\n    let out = '';\n    let count = 0;\n    let i = 0;\n    while (i < s.length && count < max - 1) {\n      const ch = s[i];\n      if (ch === '\\u001B' || ch === '\\u009B') {\n        // Copia sequência ANSI inteira\n        const m = s.slice(i).match(ANSI_REGEX);\n        if (m && m.index === 0) {\n          out += m[0];\n          i += m[0].length;\n          continue;\n        }\n      }\n      out += ch;\n      i++;\n      count++;\n    }\n    return `${out}…`;\n  };\n  const barra = '─'.repeat(Math.max(10, width - 2));\n  const topo = `┌${barra}┐`;\n  const base = `└${barra}┘`;\n  const normalizar = (s: string) => truncateVisible(s, maxInner);\n  const corpo = linhas.map(l => `│ ${padFimVisible(normalizar(l), maxInner)}│`).join('\\n');\n  const headTxt = `│ ${padFimVisible(normalizar(titulo), maxInner)}│`;\n  // Garantir que corTitulo funciona mesmo quando mockado como objeto\n  const corTituloFn = typeof corTitulo === 'function' ? corTitulo : (s: string) => String(s);\n  const gray: StyleFn = typeof chalk.gray === 'function' ? chalk.gray : (x: string) => String(x);\n  return [gray(topo), corTituloFn(headTxt), gray(corpo), gray(base)].filter(Boolean).join('\\n');\n}\n\n// Fallback opcional de moldura ASCII (evita mojibake em redirecionamentos no Windows)\n\nfunction deveUsarAsciiFrames(): boolean {\n  return process.env.PROMETHEUS_ASCII_FRAMES === '1';\n}\nfunction converterMolduraParaAscii(bloco: string): string {\n  return bloco.replaceAll('┌', '+').replaceAll('┐', '+').replaceAll('└', '+').replaceAll('┘', '+').replaceAll('─', '-').replaceAll('│', '|');\n}\nexport function fase(titulo: string): void {\n  if (shouldSilence()) return;\n  if (!shouldLogLevel('info')) return;\n  const bold: StyleFn = typeof chalk.bold === 'function' ? chalk.bold : (s: string) => String(s);\n  const cyan: StyleFn = typeof chalk.cyan === 'function' ? chalk.cyan : (s: string) => String(s);\n  console.log(formatarLinha({\n    nivel: 'info',\n    mensagem: bold(cyan(`${LOG_SIMBOLOS.fase} ${titulo}`)),\n    sanitize: false\n  }));\n}\nexport function passo(descricao: string): void {\n  if (shouldSilence()) return;\n  if (!shouldLogLevel('info')) return;\n  console.log(formatarLinha({\n    nivel: 'info',\n    mensagem: `${LOG_SIMBOLOS.passo} ${descricao}`,\n    sanitize: false\n  }));\n}\nexport const log = {\n  info(msg: string): void {\n    if (shouldSilence()) return;\n    if (shouldSuppressParcial(msg)) return;\n    if (!shouldLogLevel('info')) return;\n    console.log(formatarLinha({\n      nivel: 'info',\n      mensagem: msg\n    }));\n  },\n  // Variante de INFO que preserva estilos/cores inline (sem sanitização de símbolos),\n  // útil para alinhar colunas mantendo números coloridos.\n  infoSemSanitizar(msg: string): void {\n    if (shouldSilence()) return;\n    if (shouldSuppressParcial(msg)) return;\n    if (!shouldLogLevel('info')) return;\n    console.log(formatarLinha({\n      nivel: 'info',\n      mensagem: msg,\n      sanitize: false\n    }));\n  },\n  // Mensagem INFO com corpo estilizado (negrito + azul) e sem sanitização,\n  // preservando cores dentro do corpo. Útil para títulos curtos e resumos.\n  infoDestaque(msg: string): void {\n    if (shouldSilence()) return;\n    if (shouldSuppressParcial(msg)) return;\n    if (!shouldLogLevel('info')) return;\n    const bold: StyleFn = typeof chalk.bold === 'function' ? chalk.bold : (s: string) => String(s);\n    const cyan: StyleFn = typeof chalk.cyan === 'function' ? chalk.cyan : (s: string) => String(s);\n    console.log(formatarLinha({\n      nivel: 'info',\n      mensagem: bold(cyan(msg)),\n      sanitize: false\n    }));\n  },\n  sucesso(msg: string): void {\n    if (shouldSilence()) return;\n    if (shouldSuppressParcial(msg)) return;\n    if (!shouldLogLevel('sucesso')) return;\n    console.log(formatarLinha({\n      nivel: 'sucesso',\n      mensagem: msg\n    }));\n  },\n  erro(msg: string): void {\n    console.error(formatarLinha({\n      nivel: 'erro',\n      mensagem: msg\n    }));\n  },\n  aviso(msg: string): void {\n    if (shouldSilence()) return;\n    if (shouldSuppressParcial(msg)) return;\n    if (!shouldLogLevel('aviso')) return;\n    console.log(formatarLinha({\n      nivel: 'aviso',\n      mensagem: msg\n    }));\n  },\n  debug(msg: string): void {\n    if (!shouldLogLevel('debug')) return;\n    if (shouldSuppressParcial(msg)) return;\n    console.log(formatarLinha({\n      nivel: 'debug',\n      mensagem: msg\n    }));\n  },\n  fase,\n  passo,\n  bloco: formatarBloco,\n  calcularLargura(titulo: string, linhas: string[], larguraMax?: number): number {\n    return calcularLarguraInterna(titulo, linhas, larguraMax).width;\n  },\n  // Imprime um bloco moldurado diretamente (sem prefixo de logger) e com fallback ASCII opcional\n  imprimirBloco(titulo: string, linhas: string[], corTitulo: StyleFn = typeof chalk.bold === 'function' ? chalk.bold : (s: string) => String(s), larguraMax?: number): void {\n    if (shouldSilence()) return;\n    // Suprime blocos que contenham a palavra 'parcial' quando configurado\n    if (config.SUPPRESS_PARCIAL_LOGS) {\n      if (shouldSuppressParcial(titulo)) return;\n      for (const l of linhas) if (shouldSuppressParcial(l)) return;\n    }\n    const bloco = formatarBloco(titulo, linhas, corTitulo, larguraMax);\n    const out = deveUsarAsciiFrames() ? converterMolduraParaAscii(bloco) : bloco;\n    // Centraliza o bloco somente com opt-in explícito (PROMETHEUS_CENTER=1)\n    if (!process.env.VITEST && process.env.PROMETHEUS_CENTER === '1') {\n      try {\n        const lines = out.split('\\n');\n        if (!lines.length) {\n          return;\n        }\n        // mede largura visível da moldura (linha do topo)\n        const ANSI_REGEX = /[\\u001B\\u009B][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g;\n        const visibleLen = (s: string) => s.replace(ANSI_REGEX, '').length;\n        const frameWidth = Math.max(...lines.map(l => visibleLen(l)));\n        const cols = obterColunasTerm() || 0;\n        const outStream: tty.WriteStream | undefined = process.stdout && typeof (process.stdout as tty.WriteStream).isTTY !== 'undefined' ? process.stdout as tty.WriteStream : undefined;\n        const isTty = !!outStream && outStream.isTTY !== false;\n        if (isTty) {\n          const pad = Math.floor(Math.max(0, cols - frameWidth) / 2);\n          if (pad > 0) {\n            const pref = ' '.repeat(pad);\n            console.log(lines.map(l => pref + l).join('\\n'));\n            return;\n          }\n        }\n      } catch {\n        // Se centralização falhar, imprime normalmente\n      }\n    }\n  }\n};\n"]}