{"version":3,"file":"paths.js","sourceRoot":"","sources":["../../../src/core/registry/paths.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT\n/**\n * @fileoverview Gerenciamento centralizado de caminhos para arquivos JSON do Prometheus\n *\n * Este módulo define todos os caminhos de arquivos JSON usados pelo sistema,\n * evitando hardcoding espalhado e permitindo evolução consistente.\n *\n * Convenção de nomes:\n * - guardian.baseline.json: Snapshot de integridade do Guardian\n * - estrutura.baseline.json: Baseline da estrutura de diretórios\n * - estrutura.arquetipo.json: Arquétipo personalizado do repositório\n * - prometheus.config.json: Configuração do usuário (raiz do projeto)\n */\n\nimport path from 'node:path';\n\n// Diretório base do projeto (raiz) - usa CWD quando executado pelo CLI\nexport const PROJETO_RAIZ = process.cwd();\n\n/**\n * Diretórios principais do Prometheus\n */\nexport const PROMETHEUS_DIRS = {\n  /** Diretório de estado interno (.prometheus/) */\n  STATE: path.join(PROJETO_RAIZ, '.prometheus'),\n  /** Diretório de histórico de métricas (.prometheus/historico-metricas/) */\n  METRICS_HISTORY: path.join(PROJETO_RAIZ, '.prometheus', 'historico-metricas'),\n  /** Diretório de relatórios (relatorios/) */\n  REPORTS: path.join(PROJETO_RAIZ, 'relatorios'),\n  /** Diretório de performance baselines (docs/perf/) */\n  PERF: path.join(PROJETO_RAIZ, 'docs', 'perf')\n} as const;\n\n/**\n * Arquivos JSON do sistema\n *\n * Categoria 1: Configuração (leitura usuário)\n * Categoria 2: Estado interno (leitura/escrita sistema)\n * Categoria 3: Relatórios (escrita sistema)\n */\nexport const PROMETHEUS_ARQUIVOS = {\n  /* -------------------------- CONFIGURAÇÃO (raiz do projeto) -------------------------- */\n  /** Configuração principal do usuário (prometheus.config.json) */\n  CONFIG: path.join(PROJETO_RAIZ, 'prometheus.config.json'),\n  /** Configuração segura/alternativa (prometheus.config.safe.json) */\n  CONFIG_SAFE: path.join(PROJETO_RAIZ, 'prometheus.config.safe.json'),\n  /* -------------------------- ESTADO INTERNO (.prometheus/) -------------------------- */\n  /** Baseline de integridade do Guardian (.prometheus/guardian.baseline.json) */\n  GUARDIAN_BASELINE: path.join(PROMETHEUS_DIRS.STATE, 'guardian.baseline.json'),\n  /** Baseline de estrutura de diretórios (.prometheus/estrutura.baseline.json) */\n  ESTRUTURA_BASELINE: path.join(PROMETHEUS_DIRS.STATE, 'estrutura.baseline.json'),\n  /** Arquétipo personalizado do repo (.prometheus/estrutura.arquetipo.json) */\n  ESTRUTURA_ARQUETIPO: path.join(PROMETHEUS_DIRS.STATE, 'estrutura.arquetipo.json'),\n  /** Mapa de reversão de estrutura (.prometheus/mapa-reversao.json) */\n  MAPA_REVERSAO: path.join(PROMETHEUS_DIRS.STATE, 'mapa-reversao.json'),\n  /** Registros da Vigia Oculta (.prometheus/integridade.json) */\n  REGISTRO_VIGIA: path.join(PROMETHEUS_DIRS.STATE, 'integridade.json'),\n  /** Histórico de métricas (.prometheus/historico-metricas/metricas-historico.json) */\n  METRICAS_HISTORICO: path.join(PROMETHEUS_DIRS.METRICS_HISTORY, 'metricas-historico.json'),\n  /* -------------------------- ARQUIVOS LEGADOS (compatibilidade) -------------------------- */\n  /** @deprecated Use GUARDIAN_BASELINE - baseline.json antigo */\n  GUARDIAN_BASELINE_LEGACY: path.join(PROMETHEUS_DIRS.STATE, 'baseline.json'),\n  /** @deprecated Use ESTRUTURA_BASELINE - baseline-estrutura.json antigo */\n  ESTRUTURA_BASELINE_LEGACY: path.join(PROMETHEUS_DIRS.STATE, 'baseline-estrutura.json'),\n  /** @deprecated Movido para .prometheus/ - prometheus.repo.arquetipo.json na raiz */\n  ESTRUTURA_ARQUETIPO_LEGACY_ROOT: path.join(PROJETO_RAIZ, 'prometheus.repo.arquetipo.json')\n} as const;\n\n/**\n * Padrões de nomenclatura para relatórios dinâmicos\n */\nexport const REPORT_PADROES = {\n  /** Relatório de diagnóstico (prometheus-diagnostico-{timestamp}.md) */\n  DIAGNOSTICO: (timestamp: string) => path.join(PROMETHEUS_DIRS.REPORTS, `prometheus-diagnostico-${timestamp}.md`),\n  /** Relatório JSON resumo (prometheus-relatorio-summary-{timestamp}.json) */\n  SUMMARY_JSON: (timestamp: string) => path.join(PROMETHEUS_DIRS.REPORTS, `prometheus-relatorio-summary-${timestamp}.json`),\n  /** Relatório de análise async (async-analysis-report.json) */\n  ASYNC_ANALYSIS: path.join(PROMETHEUS_DIRS.REPORTS, 'async-analysis-report.json'),\n  /** Baseline de performance (docs/perf/baseline-{timestamp}.json) */\n  PERF_BASELINE: (timestamp: string) => path.join(PROMETHEUS_DIRS.PERF, `baseline-${timestamp}.json`),\n  /** Diff de performance (docs/perf/ultimo-diff.json) */\n  PERF_DIFF: path.join(PROMETHEUS_DIRS.PERF, 'ultimo-diff.json')\n} as const;\n\n/**\n * Mapeia nomes legados para novos caminhos (migração automática)\n */\nexport const MIGRACAO_MAPA = {\n  // Guardian: baseline.json → guardian.baseline.json\n  [PROMETHEUS_ARQUIVOS.GUARDIAN_BASELINE_LEGACY]: PROMETHEUS_ARQUIVOS.GUARDIAN_BASELINE,\n  // Estrutura: baseline-estrutura.json → estrutura.baseline.json\n  [PROMETHEUS_ARQUIVOS.ESTRUTURA_BASELINE_LEGACY]: PROMETHEUS_ARQUIVOS.ESTRUTURA_BASELINE,\n  // Arquétipo: prometheus.repo.arquetipo.json (raiz) → .prometheus/estrutura.arquetipo.json\n  [PROMETHEUS_ARQUIVOS.ESTRUTURA_ARQUETIPO_LEGACY_ROOT]: PROMETHEUS_ARQUIVOS.ESTRUTURA_ARQUETIPO\n} as const;\n\n/**\n * Retorna o caminho legado (se existir) ou o novo\n * @param newPath Caminho novo desejado\n * @returns Caminho do arquivo (prioriza legado se existir)\n */\nexport function resolveFilePath(newPath: string): string {\n  // Verifica se há entrada no mapa de migração reverso\n  const legacyCaminho = Object.entries(MIGRACAO_MAPA).find(([_, target]) => target === newPath)?.[0];\n  return legacyCaminho || newPath;\n}\n\n/**\n * Tipo para caminhos de arquivos do Prometheus\n */\nexport type PrometheusFilePath = (typeof PROMETHEUS_ARQUIVOS)[keyof typeof PROMETHEUS_ARQUIVOS];\nexport type PrometheusDirPath = (typeof PROMETHEUS_DIRS)[keyof typeof PROMETHEUS_DIRS];"]}