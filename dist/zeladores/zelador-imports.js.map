{"version":3,"file":"zelador-imports.js","sourceRoot":"","sources":["../../src/zeladores/zelador-imports.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT-0\n/**\n * Zelador de Imports\n *\n * Corrige automaticamente imports em arquivos TypeScript/JavaScript:\n * - Converte imports relativos para aliases (@core, @analistas, etc)\n * - Normaliza @types/<subpath> para @types/types\n * - Remove extensões .js desnecessárias em imports de tipos\n *\n * Migrado de:\n * - scripts/fix-alias-imports.mjs\n * - scripts/fix-tipos-imports.mjs\n */\n\nimport { promises as fs } from 'node:fs';\nimport path from 'node:path';\n\nimport { log } from '@core/messages/index.js';\nimport { ERROS_IMPORTS, gerarResumoImports, MENSAGENS_IMPORTS, PROGRESSO_IMPORTS } from '@core/messages/zeladores/zelador-messages.js';\n\nimport type { AliasConfig, ImportCorrecao, ImportCorrecaoArquivo, ImportCorrecaoOptions } from '@';\n\n/**\n * Configuração padrão de aliases baseada em tsconfig.json\n */\nconst PADRAO_ALIAS_CONFIGURACAO: AliasConfig = {\n  '@core': './core',\n  '@analistas': './analistas',\n  '@types': './types',\n  '@shared': './shared',\n  '@cli': './cli',\n  '@guardian': './guardian',\n  '@relatorios': './relatorios',\n  '@zeladores': './zeladores'\n};\n\n/**\n * Padrões de imports que devem ser corrigidos\n */\nconst PADROES = {\n  // @types/types.js → @types/types\n  tiposComExtensao: /@types\\/types\\.js\\b/g,\n  // Imports relativos que podem ser convertidos em aliases\n  importRelativo: /from\\s+(['\"])(\\.\\.[\\/\\\\].+?)\\1/g\n};\n\n/**\n * Caminha recursivamente por um diretório coletando arquivos\n */\nasync function* walkDirectory(dir: string): AsyncGenerator<string> {\n  try {\n    const entries = await fs.readdir(dir, {\n      withFileTypes: true\n    });\n    for (const entry of entries) {\n      const fullCaminho = path.join(dir, entry.name);\n      if (entry.isDirectory()) {\n        // Pular node_modules, dist, coverage, etc\n        if (['node_modules', 'dist', 'coverage', '.git'].includes(entry.name)) {\n          continue;\n        }\n        yield* walkDirectory(fullCaminho);\n      } else if (entry.isFile()) {\n        // Apenas arquivos TS/JS/JSX/TSX\n        if (/\\.(ts|tsx|js|jsx|mjs|cjs)$/.test(entry.name)) {\n          yield fullCaminho;\n        }\n      }\n    }\n  } catch (error) {\n    log.erro(ERROS_IMPORTS.lerDiretorio(dir, error));\n  }\n}\n\n/**\n * Corrige imports de @types com extensão .js ou subpaths\n */\nfunction corrigirImportsTipos(conteudo: string): {\n  conteudo: string;\n  correcoes: ImportCorrecao[];\n} {\n  const correcoes: ImportCorrecao[] = [];\n  let conteudoAtualizado = conteudo;\n\n  // Corrigir @types/types.js → @types/types\n  conteudoAtualizado = conteudoAtualizado.replace(PADROES.tiposComExtensao, (match, offset) => {\n    correcoes.push({\n      tipo: 'tipos-extensao',\n      de: match,\n      para: '@types/types',\n      linha: conteudo.substring(0, offset).split('\\n').length\n    });\n    return '@types/types';\n  });\n\n  // Corrigir @types/<subpath> → @types/types\n  // Importante: não deve \"corrigir\" o que já está em @types/types (evita duplicar correções).\n  const regex = /(['\"])@types\\/([^'\"\\n]+?)\\1/g;\n  conteudoAtualizado = conteudoAtualizado.replace(regex, (match, quote: string, subpath: string, offset: number) => {\n    const normalized = String(subpath || '').trim();\n\n    // Já correto: não gera correção nem altera texto.\n    if (normalized === 'types') return match;\n\n    // Caso ainda chegue aqui como types.js (por algum input estranho), não duplicar: trata como extensão.\n    if (normalized === 'types.js') {\n      const novoImport = `${quote}@types/types${quote}`;\n      correcoes.push({\n        tipo: 'tipos-extensao',\n        de: match,\n        para: novoImport,\n        linha: conteudo.substring(0, offset).split('\\n').length\n      });\n      return novoImport;\n    }\n    const novoImport = `${quote}@types/types${quote}`;\n    correcoes.push({\n      tipo: 'tipos-subpath',\n      de: match,\n      para: novoImport,\n      linha: conteudo.substring(0, offset).split('\\n').length\n    });\n    return novoImport;\n  });\n  return {\n    conteudo: conteudoAtualizado,\n    correcoes\n  };\n}\n\n/**\n * Detecta e corrige imports relativos que podem ser convertidos em aliases\n */\nfunction corrigirImportsRelativos(conteudo: string, _filePath: string, _projectRoot: string, _aliasConfig: AliasConfig): {\n  conteudo: string;\n  correcoes: ImportCorrecao[];\n} {\n  const correcoes: ImportCorrecao[] = [];\n  const conteudoAtualizado = conteudo;\n\n  // Implementação simplificada - não tenta converter relativos para aliases\n  // pois requer análise de paths complexa. Foco apenas em @types por enquanto.\n\n  return {\n    conteudo: conteudoAtualizado,\n    correcoes\n  };\n}\n\n/**\n * Processa um único arquivo corrigindo todos os imports\n */\nasync function processarArquivo(fileCaminho: string, options: ImportCorrecaoOptions): Promise<ImportCorrecaoArquivo> {\n  const resultado: ImportCorrecaoArquivo = {\n    arquivo: path.relative(options.projectRaiz, fileCaminho),\n    correcoes: [],\n    modificado: false\n  };\n  try {\n    const conteudoOriginal = await fs.readFile(fileCaminho, 'utf-8');\n    let conteudoAtualizado = conteudoOriginal;\n\n    // Aplicar correções de @types\n    if (options.corrigirTipos !== false) {\n      const {\n        conteudo,\n        correcoes\n      } = corrigirImportsTipos(conteudoAtualizado);\n      conteudoAtualizado = conteudo;\n      resultado.correcoes.push(...correcoes);\n    }\n\n    // Aplicar correções de imports relativos\n    if (options.corrigirRelativos !== false) {\n      const {\n        conteudo,\n        correcoes\n      } = corrigirImportsRelativos(conteudoAtualizado, fileCaminho, options.projectRaiz, options.aliasConfig || PADRAO_ALIAS_CONFIGURACAO);\n      conteudoAtualizado = conteudo;\n      resultado.correcoes.push(...correcoes);\n    }\n\n    // Escrever arquivo se houver mudanças\n    if (conteudoAtualizado !== conteudoOriginal) {\n      if (!options.dryRun) {\n        await fs.writeFile(fileCaminho, conteudoAtualizado, 'utf-8');\n      }\n      resultado.modificado = true;\n    }\n  } catch (error) {\n    resultado.erro = error instanceof Error ? error.message : String(error);\n  }\n  return resultado;\n}\n\n/**\n * Executa o zelador de imports em um diretório\n */\nexport async function executarZeladorImports(targetDirs: string[], options: Partial<ImportCorrecaoOptions> = {}): Promise<ImportCorrecaoArquivo[]> {\n  const projectRaiz = options.projectRaiz || process.cwd();\n  const fullOpcoes: ImportCorrecaoOptions = {\n    projectRaiz,\n    dryRun: options.dryRun ?? false,\n    verbose: options.verbose ?? false,\n    corrigirTipos: options.corrigirTipos ?? true,\n    corrigirRelativos: options.corrigirRelativos ?? false,\n    // Desabilitado por padrão\n    aliasConfig: options.aliasConfig || PADRAO_ALIAS_CONFIGURACAO\n  };\n  const resultados: ImportCorrecaoArquivo[] = [];\n  for (const dir of targetDirs) {\n    const fullCaminho = path.resolve(projectRaiz, dir);\n    try {\n      await fs.access(fullCaminho);\n    } catch {\n      if (fullOpcoes.verbose) {\n        log.aviso(PROGRESSO_IMPORTS.diretorioNaoEncontrado(dir));\n      }\n      continue;\n    }\n    for await (const fileCaminho of walkDirectory(fullCaminho)) {\n      const resultado = await processarArquivo(fileCaminho, fullOpcoes);\n      if (resultado.modificado || resultado.erro) {\n        resultados.push(resultado);\n        if (fullOpcoes.verbose) {\n          if (resultado.modificado) {\n            log.sucesso(PROGRESSO_IMPORTS.arquivoProcessado(resultado.arquivo, resultado.correcoes.length));\n          }\n          if (resultado.erro) {\n            log.erro(PROGRESSO_IMPORTS.arquivoErro(resultado.arquivo, resultado.erro));\n          }\n        }\n      }\n    }\n  }\n  return resultados;\n}\n\n/**\n * Gera relatório de correções aplicadas\n */\nexport function gerarRelatorioCorrecoes(resultados: ImportCorrecaoArquivo[]): string {\n  const modificados = resultados.filter(r => r.modificado);\n  const comErro = resultados.filter(r => r.erro);\n  const totalCorrecoes = modificados.reduce((sum, r) => sum + r.correcoes.length, 0);\n  const linhas: string[] = ['# Relatório de Correções de Imports\\n', `Arquivos processados: ${resultados.length}`, `Arquivos modificados: ${modificados.length}`, `Total de correções: ${totalCorrecoes}`, `Erros: ${comErro.length}\\n`];\n  if (modificados.length > 0) {\n    linhas.push('## Arquivos Modificados\\n');\n    for (const resultado of modificados) {\n      linhas.push(`### ${resultado.arquivo}`);\n      linhas.push(`**Correções:** ${resultado.correcoes.length}\\n`);\n      const porTipo = resultado.correcoes.reduce((acc: Record<string, number>, c: ImportCorrecao) => {\n        acc[c.tipo] = (acc[c.tipo] || 0) + 1;\n        return acc;\n      }, {} as Record<string, number>);\n      for (const [tipo, count] of Object.entries(porTipo)) {\n        linhas.push(`- ${tipo}: ${count}`);\n      }\n      linhas.push('');\n    }\n  }\n  if (comErro.length > 0) {\n    linhas.push('## Erros\\n');\n    for (const resultado of comErro) {\n      linhas.push(`- **${resultado.arquivo}**: ${resultado.erro}`);\n    }\n    linhas.push('');\n  }\n  return linhas.join('\\n');\n}\n\n/**\n * Função principal para uso via CLI ou programático\n */\nexport async function corrigirImports(dirs: string[] = ['src', 'tests'], options: Partial<ImportCorrecaoOptions> = {}): Promise<void> {\n  log.fase?.(MENSAGENS_IMPORTS.titulo);\n  console.log(); // linha vazia para espaçamento\n\n  const resultados = await executarZeladorImports(dirs, {\n    ...options,\n    verbose: true\n  });\n  const modificados = resultados.filter(r => r.modificado);\n  const totalCorrecoes = modificados.reduce((sum, r) => sum + r.correcoes.length, 0);\n  const comErro = resultados.filter(r => r.erro);\n  const resumo = gerarResumoImports({\n    processados: resultados.length,\n    modificados: modificados.length,\n    totalCorrecoes,\n    erros: comErro.length,\n    dryRun: options.dryRun ?? false\n  });\n  for (const linha of resumo) {\n    if (linha === '') {\n      console.log();\n    } else if (linha.includes('✅')) {\n      log.sucesso(linha);\n    } else if (linha.includes('⚠️')) {\n      log.aviso(linha);\n    } else {\n      log.info(linha);\n    }\n  }\n}"]}