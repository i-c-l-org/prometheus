{"version":3,"file":"filtro-inteligente.js","sourceRoot":"","sources":["../../src/relatorios/filtro-inteligente.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT-0\n// @prometheus-disable tipo-literal-inline-complexo\n// Justificativa: tipos locais para filtragem de relatórios\n// Sistema inteligente de filtragem e priorização de relatórios\n// Agrupa problemas similares e prioriza por impacto para evitar sobrecarga de informação\n\nimport { AGRUPAMENTOS_MENSAGEM, PRIORIDADES, RelatorioMensagens } from '@core/messages/index.js';\n\nimport type { Ocorrencia, OcorrenciaNivel, ProblemaAgrupado, RelatorioResumo } from '@';\n\n/**\n * Processa e filtra ocorrências para gerar um relatório resumido inteligente\n */\n\nexport function processarRelatorioResumo(ocorrencias: Ocorrencia[], limitePrioridade = 30): RelatorioResumo {\n  // Agrupar ocorrências por tipo e padrões de mensagem em uma só passagem\n  const gruposPorTipo = new Map<string, Ocorrencia[]>();\n  const gruposPorMensagem = new Map<string, Ocorrencia[]>();\n\n  for (const ocorrencia of ocorrencias) {\n    const tipo = String(ocorrencia.tipo || 'OUTROS');\n    if (!gruposPorTipo.has(tipo)) {\n      gruposPorTipo.set(tipo, []);\n    }\n    const grupoTipo = gruposPorTipo.get(tipo);\n    if (grupoTipo) grupoTipo.push(ocorrencia);\n\n    const mensagem = String(ocorrencia.mensagem || '');\n    let agrupado = false;\n    for (const grupo of AGRUPAMENTOS_MENSAGEM) {\n      if (grupo.padrao.test(mensagem)) {\n        if (!gruposPorMensagem.has(grupo.categoria)) {\n          gruposPorMensagem.set(grupo.categoria, []);\n        }\n        const grupoMsg = gruposPorMensagem.get(grupo.categoria);\n        if (grupoMsg) grupoMsg.push(ocorrencia);\n        agrupado = true;\n        break;\n      }\n    }\n    if (!agrupado) {\n      if (!gruposPorMensagem.has(tipo)) {\n        gruposPorMensagem.set(tipo, []);\n      }\n      const grupoFallback = gruposPorMensagem.get(tipo);\n      if (grupoFallback) grupoFallback.push(ocorrencia);\n    }\n  }\n\n  // Converter grupos em problemas agrupados\n  const problemasAgrupados: ProblemaAgrupado[] = [];\n\n  // Processar grupos por tipo\n  for (const [tipo, ocorrenciasTipo] of gruposPorTipo) {\n    const config = PRIORIDADES[tipo] || {\n      prioridade: 'baixa' as const,\n      icone: '??'\n    };\n\n    // Verificar se já existe agrupamento por mensagem\n    const jaAgrupado = Array.from(gruposPorMensagem.keys()).some(categoria => {\n      const ocorrenciasGrupo = gruposPorMensagem.get(categoria) || [];\n      return ocorrenciasGrupo.some(o => o.tipo === tipo);\n    });\n    if (!jaAgrupado && ocorrenciasTipo.length > 0) {\n      problemasAgrupados.push({\n        categoria: tipo,\n        prioridade: config.prioridade,\n        icone: config.icone,\n        titulo: formatarTituloTipo(tipo),\n        quantidade: ocorrenciasTipo.length,\n        ocorrencias: ocorrenciasTipo,\n        resumo: gerarResumoOcorrencias(ocorrenciasTipo)\n      });\n    }\n  }\n\n  // Processar grupos por mensagem (prioritários)\n  for (const agrupamento of AGRUPAMENTOS_MENSAGEM) {\n    const ocorrenciasGrupo = gruposPorMensagem.get(agrupamento.categoria) || [];\n    if (ocorrenciasGrupo.length > 0) {\n      problemasAgrupados.push({\n        categoria: agrupamento.categoria,\n        prioridade: 'critica',\n        // Grupos de mensagem são sempre prioritários\n        icone: '??',\n        titulo: agrupamento.titulo,\n        quantidade: ocorrenciasGrupo.length,\n        ocorrencias: ocorrenciasGrupo,\n        resumo: `${ocorrenciasGrupo.length} ocorrências detectadas`,\n        acaoSugerida: agrupamento.acaoSugerida\n      });\n    }\n  }\n\n  // Ordenar por prioridade e quantidade\n  problemasAgrupados.sort((a, b) => {\n    const prioridadeOrdem = {\n      critica: 0,\n      alta: 1,\n      media: 2,\n      baixa: 3\n    };\n    const prioA = prioridadeOrdem[a.prioridade];\n    const prioB = prioridadeOrdem[b.prioridade];\n    if (prioA !== prioB) return prioA - prioB;\n    return b.quantidade - a.quantidade; // Mais ocorrências primeiro\n  });\n\n  // Separar por n�veis de prioridade\n  const problemasCriticos = problemasAgrupados.filter(p => p.prioridade === 'critica');\n  const problemasAltos = problemasAgrupados.filter(p => p.prioridade === 'alta');\n  const problemasOutros = problemasAgrupados.filter(p => ['media', 'baixa'].includes(p.prioridade));\n\n  // Calcular estat�sticas\n  const arquivosAfetados = new Set(ocorrencias.map(o => o.relPath).filter(path => path && path !== 'undefined')).size;\n  const problemasPrioritarios = problemasCriticos.length + problemasAltos.length;\n  return {\n    problemasCriticos: problemasCriticos.slice(0, limitePrioridade / 3),\n    problemasAltos: problemasAltos.slice(0, limitePrioridade / 3),\n    problemasOutros: problemasOutros.slice(0, limitePrioridade / 3),\n    estatisticas: {\n      totalOcorrencias: ocorrencias.length,\n      arquivosAfetados,\n      problemasPrioritarios,\n      problemasAgrupados: problemasAgrupados.length\n    }\n  };\n}\n\n/**\n * Formata o título do tipo de problema para exibição\n */\n\nfunction formatarTituloTipo(tipo: string): string {\n  const titulos: Record<string, string> = {\n    PROBLEMA_SEGURANCA: 'Problemas de Segurança',\n    VULNERABILIDADE_SEGURANCA: 'Vulnerabilidades de Segurança',\n    CODIGO_FRAGIL: 'Código Frágil',\n    PROBLEMA_TESTE: 'Problemas de Teste',\n    PROBLEMA_DOCUMENTACAO: 'Problemas de Documentação',\n    CONSTRUCOES_SINTATICAS: 'Construções Sintáticas',\n    ANALISE_ARQUITETURA: 'Análise de Arquitetura',\n    CARACTERISTICAS_ARQUITETURA: 'Características de Arquitetura',\n    METRICAS_ARQUITETURA: 'Métricas de Arquitetura',\n    TODO_PENDENTE: 'TODOs Pendentes',\n    'padrao-ausente': 'Padrões Ausentes',\n    'estrutura-suspeita': 'Estrutura Suspeita',\n    'estrutura-config': 'Configuração de Estrutura',\n    'estrutura-entrypoints': 'Pontos de Entrada',\n    IDENTIFICACAO_PROJETO: 'Identificação do Projeto',\n    SUGESTAO_MELHORIA: 'Sugestões de Melhoria',\n    EVIDENCIA_CONTEXTO: 'Evidências de Contexto',\n    TECNOLOGIAS_ALTERNATIVAS: 'Tecnologias Alternativas'\n  };\n  return titulos[tipo] || tipo.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n}\n\n/**\n * Gera um resumo das ocorrências para exibição\n */\n\nfunction gerarResumoOcorrencias(ocorrencias: Ocorrencia[]): string {\n  if (ocorrencias.length === 0) return 'Nenhuma ocorrência';\n  const arquivos = new Set(ocorrencias.map(o => o.relPath).filter(Boolean));\n  const niveisFrequentes = ocorrencias.map(o => o.nivel).filter((nivel): nivel is OcorrenciaNivel => Boolean(nivel)).reduce((acc, nivel) => {\n    acc[nivel] = (acc[nivel] || 0) + 1;\n    return acc;\n  }, {} as Record<OcorrenciaNivel, number>);\n  const nivelMaisFrequente = Object.entries(niveisFrequentes).sort(([, a], [, b]) => (b as number) - (a as number))[0]?.[0];\n  let resumo = `${ocorrencias.length} ocorrências`;\n  if (arquivos.size > 1) {\n    resumo += ` em ${arquivos.size} arquivos`;\n  }\n  if (nivelMaisFrequente) {\n    resumo += ` (maioria: ${nivelMaisFrequente})`;\n  }\n  return resumo;\n}\n\n/**\n * Gera relatório Markdown resumido\n */\n\nexport async function gerarRelatorioMarkdownResumo(relatorioResumo: RelatorioResumo, outputCaminho: string): Promise<void> {\n  const {\n    problemasCriticos,\n    problemasAltos,\n    problemasOutros,\n    estatisticas\n  } = relatorioResumo;\n  const linhas: string[] = [];\n\n  // Cabeçalho usando mensagens centralizadas\n  linhas.push(`# ${RelatorioMensagens.resumo.titulo}`);\n  linhas.push('');\n  linhas.push(`> ${RelatorioMensagens.resumo.introducao}`);\n  linhas.push('');\n\n  // Estatisticas usando mensagens centralizadas\n  linhas.push(`## ${RelatorioMensagens.resumo.secoes.estatisticas.titulo}`);\n  linhas.push('');\n  linhas.push(`- **${RelatorioMensagens.resumo.secoes.estatisticas.totalOcorrencias}**: ${estatisticas.totalOcorrencias.toLocaleString()}`);\n  linhas.push(`- **${RelatorioMensagens.resumo.secoes.estatisticas.arquivosAfetados}**: ${estatisticas.arquivosAfetados.toLocaleString()}`);\n  linhas.push(`- **${RelatorioMensagens.resumo.secoes.estatisticas.problemasPrioritarios}**: ${estatisticas.problemasPrioritarios}`);\n  linhas.push(`- **${RelatorioMensagens.resumo.secoes.estatisticas.problemasAgrupados}**: ${estatisticas.problemasAgrupados}`);\n  linhas.push('');\n\n  // Problemas críticos usando mensagens centralizadas\n  if (problemasCriticos.length > 0) {\n    linhas.push(`## ${RelatorioMensagens.resumo.secoes.criticos.titulo}`);\n    linhas.push('');\n    for (const problema of problemasCriticos) {\n      linhas.push(`### ${problema.icone} ${problema.titulo}`);\n      linhas.push('');\n      linhas.push(`**${RelatorioMensagens.resumo.labels.quantidade}**: ${problema.quantidade} ocorrências`);\n      linhas.push(`**Resumo**: ${problema.resumo}`);\n      if (problema.acaoSugerida) {\n        linhas.push(`**${RelatorioMensagens.resumo.labels.acaoSugerida}**: ${problema.acaoSugerida}`);\n      }\n      linhas.push('');\n\n      // Mostrar algumas ocorrências de exemplo\n      const exemplos = problema.ocorrencias.slice(0, 3);\n      if (exemplos.length > 0) {\n        linhas.push(`**${RelatorioMensagens.resumo.labels.exemplos}:**`);\n        for (const exemplo of exemplos) {\n          const arquivo = exemplo.relPath || 'arquivo desconhecido';\n          const linha = exemplo.linha ? `:${exemplo.linha}` : '';\n          linhas.push(`- \\`${arquivo}${linha}\\`: ${exemplo.mensagem}`);\n        }\n        if (problema.quantidade > 3) {\n          linhas.push(`- ... e mais ${problema.quantidade - 3} ocorrências`);\n        }\n        linhas.push('');\n      }\n    }\n  }\n\n  // Problemas altos usando mensagens centralizadas\n  if (problemasAltos.length > 0) {\n    linhas.push(`## ${RelatorioMensagens.resumo.secoes.altos.titulo}`);\n    linhas.push('');\n    for (const problema of problemasAltos) {\n      linhas.push(`### ${problema.icone} ${problema.titulo}`);\n      linhas.push('');\n      linhas.push(`**${RelatorioMensagens.resumo.labels.quantidade}**: ${problema.quantidade} | **Resumo**: ${problema.resumo}`);\n      if (problema.acaoSugerida) {\n        linhas.push(`**${RelatorioMensagens.resumo.labels.acaoSugerida}**: ${problema.acaoSugerida}`);\n      }\n      linhas.push('');\n    }\n  }\n\n  // Outros problemas (resumo) usando mensagens centralizadas\n  if (problemasOutros.length > 0) {\n    linhas.push(`## ${RelatorioMensagens.resumo.secoes.outros.titulo}`);\n    linhas.push('');\n    linhas.push('| Categoria | Quantidade | Resumo |');\n    linhas.push('|-----------|------------|--------|');\n    for (const problema of problemasOutros) {\n      linhas.push(`| ${problema.icone} ${problema.titulo} | ${problema.quantidade} | ${problema.resumo} |`);\n    }\n    linhas.push('');\n  }\n\n  // Rodapé\n  linhas.push('---');\n  linhas.push('');\n  linhas.push('?? **Dica**: Para ver todos os detalhes, gere o relatório completo em modo normal.');\n  linhas.push('');\n  linhas.push(`**Relatório gerado em**: ${new Date().toLocaleString('pt-BR')}`);\n  const {\n    salvarEstado\n  } = await import('@shared/persistence/persistencia.js');\n  await salvarEstado(outputCaminho, linhas.join('\\n'));\n}\n\n/**\n * Gera resumo executivo mostrando apenas problemas críticos e de alta prioridade\n * Ideal para tomada de decisão e overview rápido\n */\n\nexport function gerarResumoExecutivo(ocorrencias: Ocorrencia[]): {\n  problemasCriticos: number;\n  problemasAltos: number;\n  vulnerabilidades: number;\n  quickFixes: number;\n  recomendacao: 'verde' | 'amarelo' | 'vermelho';\n  mensagem: string;\n  detalhes: ProblemaAgrupado[];\n} {\n  const relatorio = processarRelatorioResumo(ocorrencias);\n  const problemasCriticos = relatorio.problemasCriticos.reduce((sum: number, p: ProblemaAgrupado) => sum + p.quantidade, 0);\n  const problemasAltos = relatorio.problemasAltos.reduce((sum: number, p: ProblemaAgrupado) => sum + p.quantidade, 0);\n\n  // Contadores específicos\n  const vulnerabilidades = ocorrencias.filter(o => o.tipo === 'VULNERABILIDADE_SEGURANCA' || o.tipo === 'PROBLEMA_SEGURANCA').length;\n  const quickFixes = ocorrencias.filter(o => o.tipo === 'QUICK_FIX_DISPONIVEL').length;\n\n  // Determina recomendação baseada em prioridade\n  let recomendacao: 'verde' | 'amarelo' | 'vermelho';\n  let mensagem: string;\n  if (problemasCriticos > 10) {\n    recomendacao = 'vermelho';\n    mensagem = `?? CRÍTICO: ${problemasCriticos} problemas de segurança/estabilidade. Ação imediata necessária.`;\n  } else if (problemasCriticos > 0 || problemasAltos > 50) {\n    recomendacao = 'amarelo';\n    mensagem = `?? ATENÇÃO: ${problemasCriticos} críticos, ${problemasAltos} altos. Planeje correções.`;\n  } else {\n    recomendacao = 'verde';\n    mensagem = `? BOM: Apenas problemas menores. ${quickFixes} correções automáticas disponíveis.`;\n  }\n  return {\n    problemasCriticos,\n    problemasAltos,\n    vulnerabilidades,\n    quickFixes,\n    recomendacao,\n    mensagem,\n    detalhes: [...relatorio.problemasCriticos, ...relatorio.problemasAltos]\n  };\n}"]}