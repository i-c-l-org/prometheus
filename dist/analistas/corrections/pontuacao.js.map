{"version":3,"file":"pontuacao.js","sourceRoot":"","sources":["../../../src/analistas/corrections/pontuacao.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT-0\nimport type { Analista, ConfiguracaoPontuacaoZelador, IntlComDisplayNames, Ocorrencia, ProblemaPontuacao } from '@';\nimport { criarOcorrencia } from '@';\n\n// Constantes de limites e valores de threshold\nconst ASCII_EXTENDED_MIN = 128;\nconst LIMITE_CARACTERES_INCOMUNS_PADRAO = 10;\nconst ESPACAMENTO_CORRECAO_CONTAGEM = 1;\nconst CONTEXTO_TYPESCRIPT_LOOKBACK = 50;\nconst CONTEXTO_TYPESCRIPT_LOOKAHEAD = 50;\nconst CONFIANCA_UNICODE = 90;\nconst CONFIANCA_PONTUACAO = 95;\nconst CONFIANCA_ESPACAMENTO = 85;\nconst CONFIANCA_CARACTERES_INCOMUNS = 70;\nconst COMUM_SUBSTITUICOES: Record<string, string> = {\n  '\\u201c': '\"',\n  '\\u201d': '\"',\n  '\\u2018': \"'\",\n  '\\u2019': \"'\",\n  '\\u2013': '-',\n  '\\u2014': '-',\n  '\\u00A0': ' ',\n  '\\u00B4': \"'\"\n};\nconst REPEATABLE_TO_SINGLE = new Set([',', '.', '!', '?', ':', ';', '-', '_', '*']);\nconst MULTI_PUNCT_RE = /([,\\.!?:;_\\-\\*]){2,}/g;\nconst SPACE_BEFORE_PUNCT_RE = /\\s+([,.:;!?])/g;\nconst NO_SPACE_AFTER_PUNCT_RE = /([,.:;!?])([^\\s\\)\\]\\}])/g;\n\n/**\n * Verifica se a posi√ß√£o est√° em contexto TypeScript onde ':' √© sintaxe v√°lida\n */\nfunction isTypeScriptContext(src: string, index: number): boolean {\n  const before = src.substring(Math.max(0, index - CONTEXTO_TYPESCRIPT_LOOKBACK), index);\n  const after = src.substring(index, Math.min(src.length, index + CONTEXTO_TYPESCRIPT_LOOKAHEAD));\n\n  // Contextos TypeScript v√°lidos para ':' repetido ou pr√≥ximo\n  const tsPadroes = [/\\?\\s*:\\s*$/,\n  // Tern√°rio: a ? b :\n  /:\\s*\\?/,\n  // Tipo opcional: prop?: string\n  /\\(\\?\\s*:\\s*$/,\n  // Non-capturing group: (?:\n  /interface\\s+\\w+\\s*{/,\n  // Interface declaration\n  /type\\s+\\w+\\s*=/,\n  // Type alias\n  /<[^>]*$/ // Generics: Array<Type>\n  ];\n\n  // Verificar se est√° em contexto TypeScript\n  return tsPadroes.some(pattern => pattern.test(before) || pattern.test(after));\n}\n\n/**\n * Verifica se a posi√ß√£o est√° dentro de string ou coment√°rio\n */\nfunction isInStringOrComment(src: string, index: number): boolean {\n  const before = src.substring(0, index);\n\n  // Contar aspas para detectar se est√° em string\n  const singleQuotes = (before.match(/'/g) || []).length;\n  const doubleQuotes = (before.match(/\"/g) || []).length;\n  const backticks = (before.match(/`/g) || []).length;\n\n  // Se n√∫mero √≠mpar de aspas, est√° dentro de string\n  if (singleQuotes % 2 !== 0 || doubleQuotes % 2 !== 0 || backticks % 2 !== 0) {\n    return true;\n  }\n\n  // Verificar se est√° em coment√°rio de linha\n  const lastLineBreak = before.lastIndexOf('\\n');\n  const currentLine = before.substring(lastLineBreak + 1);\n  if (currentLine.includes('//')) {\n    return true;\n  }\n\n  // Verificar se est√° em coment√°rio de bloco\n  const lastBlockCommentInicio = before.lastIndexOf('/*');\n  const lastBlockCommentFim = before.lastIndexOf('*/');\n  if (lastBlockCommentInicio > lastBlockCommentFim) {\n    return true;\n  }\n  return false;\n}\nconst CONFIGURACAO_PADRAO: ConfiguracaoPontuacaoZelador = {\n  normalizarUnicode: true,\n  colapsarPontuacaoRepetida: true,\n  corrigirEspacamento: true,\n  balancearParenteses: false,\n  detectarCaracteresIncomuns: true,\n  limiteCaracteresIncomuns: LIMITE_CARACTERES_INCOMUNS_PADRAO\n};\nfunction normalizeUnicode(input: string): {\n  text: string;\n  changed: boolean;\n} {\n  let normalized = input.normalize('NFKC');\n  let changed = false;\n  for (const [pattern, replacement] of Object.entries(COMUM_SUBSTITUICOES)) {\n    if (normalized.includes(pattern)) {\n      normalized = normalized.split(pattern).join(replacement);\n      changed = true;\n    }\n  }\n  return {\n    text: normalized,\n    changed\n  };\n}\nfunction collapseRepeatedPunct(s: string): {\n  text: string;\n  changed: boolean;\n  count: number;\n} {\n  let count = 0;\n  let lastIndex = 0;\n  const parts: string[] = [];\n  MULTI_PUNCT_RE.lastIndex = 0;\n  let match: RegExpExecArray | null;\n  while ((match = MULTI_PUNCT_RE.exec(s)) !== null) {\n    const matchIndex = match.index;\n    const matchStr = match[0];\n    const ch = matchStr[0];\n\n    // üõ°Ô∏è PROTE√á√ÉO 1: N√£o modificar strings ou coment√°rios\n    if (isInStringOrComment(s, matchIndex)) {\n      parts.push(s.substring(lastIndex, matchIndex + matchStr.length));\n      lastIndex = matchIndex + matchStr.length;\n      continue;\n    }\n\n    // üõ°Ô∏è PROTE√á√ÉO 2: Verificar contexto TypeScript antes de colapsar ':'\n    if (ch === ':' && isTypeScriptContext(s, matchIndex)) {\n      parts.push(s.substring(lastIndex, matchIndex + matchStr.length));\n      lastIndex = matchIndex + matchStr.length;\n      continue;\n    }\n\n    // Adicionar texto antes do match\n    parts.push(s.substring(lastIndex, matchIndex));\n\n    // Colapsar pontua√ß√£o repetida\n    if (REPEATABLE_TO_SINGLE.has(ch)) {\n      parts.push(ch);\n      count++;\n    } else {\n      parts.push(matchStr);\n    }\n    lastIndex = matchIndex + matchStr.length;\n  } // Adicionar resto do texto\n  parts.push(s.substring(lastIndex));\n  const text = parts.join('');\n  return {\n    text,\n    changed: count > 0,\n    count\n  };\n}\nfunction fixSpacingAroundPunct(s: string): {\n  text: string;\n  changed: boolean;\n  count: number;\n} {\n  const t1 = s.replace(SPACE_BEFORE_PUNCT_RE, '$1');\n  const t2 = t1.replace(NO_SPACE_AFTER_PUNCT_RE, '$1 $2');\n  const changed = s !== t2;\n  const count = changed ? ESPACAMENTO_CORRECAO_CONTAGEM : 0;\n  return {\n    text: t2,\n    changed,\n    count\n  };\n}\nfunction detectUncommonChars(text: string, limite?: number): ProblemaPontuacao[] {\n  const issues: ProblemaPontuacao[] = [];\n  for (let i = 0; i < text.length && issues.length < (limite ?? Infinity); i++) {\n    const ch = text[i];\n    const code = ch.codePointAt(0) ?? 0;\n    if (code >= ASCII_EXTENDED_MIN) {\n      const name = (() => {\n        try {\n          if (typeof Intl !== 'undefined') {\n            const intlApi = Intl as IntlComDisplayNames;\n            const DisplayNomesCtor = intlApi.DisplayNames;\n            if (DisplayNomesCtor) {\n              const displayNomes = new DisplayNomesCtor(['en'], {\n                type: 'language'\n              });\n              return typeof displayNomes.of === 'function' ? displayNomes.of(ch) ?? '' : '';\n            }\n          }\n          return '';\n        } catch {\n          return '';\n        }\n      })();\n      issues.push({\n        tipo: 'caracteres-incomuns',\n        posicao: i,\n        comprimento: 1,\n        descricao: `Caractere incomum: ${ch} (${name || ch})`,\n        sugestao: 'Considere substituir por equivalente ASCII',\n        confianca: CONFIANCA_CARACTERES_INCOMUNS\n      });\n    }\n  }\n  return issues;\n}\nfunction analisarTexto(src: string, config: ConfiguracaoPontuacaoZelador = CONFIGURACAO_PADRAO): ProblemaPontuacao[] {\n  const problemas: ProblemaPontuacao[] = [];\n  if (config.normalizarUnicode) {\n    const norm = normalizeUnicode(src);\n    if (norm.changed) {\n      problemas.push({\n        tipo: 'unicode-invalido',\n        posicao: 0,\n        comprimento: src.length,\n        descricao: 'Texto cont√©m caracteres Unicode que podem ser normalizados',\n        sugestao: 'Aplicar normaliza√ß√£o Unicode NFKC',\n        confianca: CONFIANCA_UNICODE\n      });\n    }\n  }\n  if (config.colapsarPontuacaoRepetida) {\n    const collapsed = collapseRepeatedPunct(src);\n    if (collapsed.changed) {\n      problemas.push({\n        tipo: 'pontuacao-repetida',\n        posicao: 0,\n        comprimento: src.length,\n        descricao: `Encontrados ${collapsed.count} casos de pontua√ß√£o repetida`,\n        sugestao: 'Colapsar pontua√ß√£o repetida para caracteres √∫nicos',\n        confianca: CONFIANCA_PONTUACAO\n      });\n    }\n  }\n  if (config.corrigirEspacamento) {\n    const spacing = fixSpacingAroundPunct(src);\n    if (spacing.changed) {\n      problemas.push({\n        tipo: 'espacamento-incorreto',\n        posicao: 0,\n        comprimento: src.length,\n        descricao: `Encontrados ${spacing.count} problemas de espa√ßamento em pontua√ß√£o`,\n        sugestao: 'Corrigir espa√ßamento antes/depois de pontua√ß√£o',\n        confianca: CONFIANCA_ESPACAMENTO\n      });\n    }\n  }\n  if (config.detectarCaracteresIncomuns) {\n    const uncommon = detectUncommonChars(src, config.limiteCaracteresIncomuns ?? undefined);\n    problemas.push(...uncommon);\n  }\n  return problemas;\n}\nfunction calcularLinha(src: string, posOrIndex: number | undefined, match?: RegExpMatchArray): number {\n  if (typeof posOrIndex === 'number') {\n    const before = src.substring(0, posOrIndex);\n    return before.split('\\n').length;\n  }\n  if (match) {\n    const idx = (match as RegExpMatchArray & {\n      index?: number;\n    }).index;\n    if (typeof idx === 'number') {\n      const before = src.substring(0, idx);\n      return before.split('\\n').length;\n    }\n  }\n  return 1;\n}\nexport const analistaPontuacao: Analista = {\n  nome: 'pontuacao-fix',\n  categoria: 'formatacao',\n  descricao: 'Detecta problemas de pontua√ß√£o, caracteres estranhos e formata√ß√£o de texto',\n  test: (relPath: string): boolean => {\n    return /\\.(ts|js|tsx|jsx|mjs|cjs|md|txt|json)$/.test(relPath);\n  },\n  aplicar: (src: string, relPath: string): Ocorrencia[] => {\n    if (!src) return [];\n    const problemas = analisarTexto(src);\n    const ocorrencias: Ocorrencia[] = [];\n    for (const problema of problemas) {\n      const linha = calcularLinha(src, problema.posicao);\n      const linhas = src.split('\\n');\n      const contexto = linhas[linha - 1] || '';\n      const ocorrencia = criarOcorrencia({\n        tipo: problema.tipo,\n        nivel: (problema.confianca ?? 0) > 80 ? 'aviso' : 'info',\n        mensagem: problema.descricao,\n        relPath,\n        linha\n      });\n      const ocorrenciaExtendida = ocorrencia as Ocorrencia & {\n        sugestao?: string;\n        confianca?: number;\n        contexto?: string;\n      };\n      ocorrenciaExtendida.sugestao = problema.sugestao;\n      ocorrenciaExtendida.confianca = problema.confianca;\n      ocorrenciaExtendida.contexto = contexto;\n      ocorrencias.push(ocorrencia);\n    }\n    return ocorrencias;\n  }\n};\nexport default analistaPontuacao;"]}