{"version":3,"file":"pontuador.js","sourceRoot":"","sources":["../../../src/analistas/pontuadores/pontuador.ts"],"names":[],"mappings":"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","sourcesContent":["// SPDX-License-Identifier: MIT-0\n// @prometheus-disable PROBLEMA_PERFORMANCE\n// Justificativa: pontuador que processa cÃ³digo - loops sÃ£o esperados\nimport { grafoDependencias } from '@analistas/detectores/detector-dependencias.js';\nimport { ARQUETIPOS, normalizarCaminho } from '@analistas/estrategistas/arquetipos-defs.js';\n\nimport type { ArquetipoDeteccaoAnomalia, ArquetipoEstruturaDef, ResultadoDeteccaoArquetipo, SinaisProjetoAvancados } from '@';\n\nconst PENALIDADE_MISSING_REQUIRED = 20;\nconst PESO_OPTIONAL = 5;\nconst PESO_REQUIRED = 10;\nconst PESO_DEPENDENCIA = 10;\nconst PESO_PADRAO = 5;\nconst PENALIDADE_FORBIDDEN = 20;\nexport function scoreArquetipo(def: ArquetipoEstruturaDef, arquivos: string[]): ResultadoDeteccaoArquetipo {\n  const norm = arquivos.map(f => String(normalizarCaminho(f)));\n  const required = def.requiredDirs || [];\n  const matchedRequired = required.filter((d: string) => norm.some(f => f.startsWith(`${d}/`) || f === d));\n  const missingRequired = required.filter((d: string) => !matchedRequired.includes(d));\n  const optional = def.optionalDirs || [];\n  const matchedOptional = optional.filter((d: string) => norm.some(f => f.startsWith(`${d}/`) || f === d));\n  // Verifica dependÃªncias sugeridas no grafo global (qualquer arquivo pode importar)\n  // OtimizaÃ§Ã£o: materializa um Set Ãºnico de todas as dependÃªncias para lookup O(1)\n  const allDependencies = new Set<string>();\n  for (const set of grafoDependencias.values()) {\n    for (const dep of set) {\n      allDependencies.add(dep);\n    }\n  }\n  function hasDependencyGlobal(dep: string): boolean {\n    return allDependencies.has(dep);\n  }\n  const dependencyMatches = (def.dependencyHints || []).filter((dep: string) => hasDependencyGlobal(dep));\n  const filePadraoMatches = (def.filePresencePatterns || []).filter((pat: string) => norm.some(f => f.includes(pat)));\n  const forbiddenPresent = (def.forbiddenDirs || []).filter((d: string) => norm.some(f => f.startsWith(`${d}/`) || f === d));\n  let score = (def.pesoBase || 1) * 10;\n  score += matchedRequired.length * PESO_REQUIRED;\n  score -= missingRequired.length * PENALIDADE_MISSING_REQUIRED;\n  score += matchedOptional.length * PESO_OPTIONAL;\n  score += dependencyMatches.length * PESO_DEPENDENCIA;\n  score += filePadraoMatches.length * PESO_PADRAO;\n  score -= forbiddenPresent.length * PENALIDADE_FORBIDDEN;\n  let explicacaoSimilaridade = '';\n  let candidatoExtra: string | undefined;\n  if (def.nome === 'fullstack') {\n    const temPages = matchedRequired.includes('pages');\n    const temApi = matchedRequired.includes('api');\n    const temPrisma = matchedRequired.includes('prisma');\n    const temControllers = norm.some(f => f.includes('src/controllers'));\n    const temExpress = grafoDependencias.has('express');\n    const isHibridoCompleto = temPages && temApi && temPrisma && temControllers && temExpress;\n    if (isHibridoCompleto) {\n      score += 40;\n      explicacaoSimilaridade = 'Estrutura hÃ­brida: fullstack + api-rest-express. Projeto combina frontend (pages/api/prisma) e backend Express/controllers.';\n      candidatoExtra = 'api-rest-express';\n      explicacaoSimilaridade += '\\nOutros candidatos potenciais detectados: fullstack, api-rest-express.';\n    } else if (temPages && temApi && temPrisma) {\n      score += 20;\n      explicacaoSimilaridade = 'Estrutura segue o padrÃ£o fullstack (pages/api/prisma).';\n      explicacaoSimilaridade += '\\nOutros candidatos potenciais detectados: fullstack, api-rest-express.';\n    }\n  }\n  if (def.nome === 'api-rest-express' && grafoDependencias.has('express')) {\n    if (norm.some(f => f.includes('pages')) && norm.some(f => f.includes('prisma')) && norm.some(f => f.includes('api'))) {\n      score += 40;\n      if (score > 100) score = 100;\n      explicacaoSimilaridade = 'Estrutura hÃ­brida: api-rest-express + fullstack. Projeto combina backend Express/controllers e frontend (pages/prisma/api).';\n      explicacaoSimilaridade += '\\nOutros candidatos potenciais detectados: fullstack, api-rest-express.';\n    } else if (norm.some(f => f.includes('pages')) && norm.some(f => f.includes('prisma'))) {\n      score += 40;\n      if (score > 100) score = 100;\n      explicacaoSimilaridade = 'Estrutura hÃ­brida: api-rest-express + fullstack. Projeto combina backend Express/controllers e frontend (pages/prisma).';\n      explicacaoSimilaridade += '\\nOutros candidatos potenciais detectados: fullstack, api-rest-express.';\n    }\n  }\n  if (def.nome === 'api-rest-express') {\n    const temControllers = matchedRequired.includes('src/controllers');\n    const temExpress = dependencyMatches.includes('express');\n    if (temControllers && temExpress) {\n      score += 50;\n    } else if (temControllers) {\n      score += 25;\n    } else if (temExpress) {\n      score += 15;\n    }\n    if (norm.some(f => /api|rest/i.test(f))) {\n      score += 10;\n    }\n    if (score >= 100) {\n      explicacaoSimilaridade = 'Estrutura segue o padrÃ£o oficial api-rest-express.';\n    } else if (score >= 70) {\n      // Para simplificar a validaÃ§Ã£o em testes, adotamos uma formulaÃ§Ã£o curta prÃ³xima do \"padrÃ£o oficial\"\n      explicacaoSimilaridade = 'Estrutura segue o padrÃ£o api-rest-express com pequenas diferenÃ§as.';\n    } else if (score >= 40) {\n      explicacaoSimilaridade = 'Estrutura parcialmente compatÃ­vel com o padrÃ£o api-rest-express. Recomenda-se padronizar src/controllers, dependÃªncia express e rotas api/rest.';\n    } else {\n      explicacaoSimilaridade = 'Estrutura personalizada, mas o padrÃ£o mais prÃ³ximo Ã© api-rest-express. Recomenda-se seguir boas prÃ¡ticas para facilitar manutenÃ§Ã£o.';\n    }\n  }\n\n  // ExplicaÃ§Ã£o genÃ©rica quando hÃ¡ penalidades/ausÃªncias e ainda nÃ£o foi preenchida\n  if (!explicacaoSimilaridade) {\n    const partes: string[] = [];\n    if (missingRequired.length > 0) {\n      partes.push(`DiretÃ³rios obrigatÃ³rios ausentes/faltantes: ${missingRequired.join(', ')}.`);\n    }\n    if (forbiddenPresent.length > 0) {\n      partes.push(`DiretÃ³rios nÃ£o permitidos/proibidos presentes: ${forbiddenPresent.join(', ')}.`);\n    }\n    if (partes.length > 0) {\n      explicacaoSimilaridade = `${partes.join(' ')} Estrutura parcialmente compatÃ­vel, personalizada ou com diferenÃ§as.`;\n    }\n  }\n\n  // Importante: manter score negativo quando penalidades superam acertos,\n  // pois alguns testes validam score <= 0 para cenÃ¡rios de penalizaÃ§Ã£o.\n  const maxPossible = (def.pesoBase || 1) * 10 + (def.requiredDirs?.length || 0) * PESO_REQUIRED + (def.optionalDirs?.length || 0) * PESO_OPTIONAL + (def.dependencyHints?.length || 0) * PESO_DEPENDENCIA + (def.filePresencePatterns?.length || 0) * PESO_PADRAO + 30;\n  const confidence = maxPossible > 0 ? Math.min(100, Math.round(score / maxPossible * 100)) : 0;\n  const raizArquivos = norm.filter(p => typeof p === 'string' && !p.includes('/'));\n  const allowed = new Set([...(def.rootFilesAllowed || [])]);\n  const anomalias: ArquetipoDeteccaoAnomalia[] = [];\n  for (const rf of raizArquivos) {\n    if (typeof rf === 'string' && rf.trim() !== '' && !allowed.has(rf)) {\n      anomalias.push({\n        path: rf,\n        motivo: 'Arquivo na raiz nÃ£o permitido para este arquÃ©tipo'\n      });\n    }\n  }\n  let sugestaoPadronizacao = '';\n  if (def.nome === 'api-rest-express') {\n    if (!matchedRequired.includes('src/controllers')) {\n      sugestaoPadronizacao += 'SugestÃ£o: adicione o diretÃ³rio src/controllers para seguir o padrÃ£o api-rest-express.\\n';\n    }\n    if (!dependencyMatches.includes('express')) {\n      sugestaoPadronizacao += 'SugestÃ£o: adicione express nas dependÃªncias para seguir o padrÃ£o api-rest-express.\\n';\n    }\n    if (!norm.some(f => /api|rest/i.test(f))) {\n      sugestaoPadronizacao += 'SugestÃ£o: utilize nomes de arquivos e rotas que incluam \"api\" ou \"rest\" para reforÃ§ar o padrÃ£o.\\n';\n    }\n  }\n  return {\n    nome: def.nome,\n    score,\n    confidence,\n    matchedRequired,\n    missingRequired,\n    matchedOptional,\n    dependencyMatches,\n    filePadraoMatches,\n    forbiddenPresent,\n    anomalias,\n    sugestaoPadronizacao,\n    explicacaoSimilaridade,\n    descricao: def.descricao || '',\n    candidatoExtra\n  };\n}\nexport function pontuarTodos(arquivos: string[]): ResultadoDeteccaoArquetipo[] {\n  const resultados: ResultadoDeteccaoArquetipo[] = [];\n  for (const def of ARQUETIPOS) {\n    const resultado = scoreArquetipo(def, arquivos);\n    resultados.push(resultado);\n    if (resultado.candidatoExtra) {\n      const extra = ARQUETIPOS.find((a: ArquetipoEstruturaDef) => a.nome === resultado.candidatoExtra);\n      if (extra) {\n        const extraResultado = scoreArquetipo(extra, arquivos);\n        if (!resultados.some(x => x.nome === extraResultado.nome)) resultados.push(extraResultado);\n      }\n    }\n  }\n  // Filtro: manter apenas candidatos que apresentem algum sinal (match/forbidden/pattern/dep)\n  return resultados.filter(resultado => (resultado.matchedRequired?.length || 0) > 0 || (resultado.matchedOptional?.length || 0) > 0 || (resultado.dependencyMatches?.length || 0) > 0 || (resultado.filePadraoMatches?.length || 0) > 0 || (resultado.forbiddenPresent?.length || 0) > 0);\n}\n\n// VersÃ£o avanÃ§ada do scoreArquetipo com anÃ¡lise de sinais do projeto\n\nexport function scoreArquetipoAvancado(def: ArquetipoEstruturaDef, arquivos: string[], sinaisAvancados?: SinaisProjetoAvancados): ResultadoDeteccaoArquetipo {\n  // Usa a implementaÃ§Ã£o base\n  const resultadoBase = scoreArquetipo(def, arquivos);\n\n  // Se nÃ£o hÃ¡ sinais avanÃ§ados, retorna resultado base\n  if (!sinaisAvancados) {\n    return resultadoBase;\n  }\n\n  // Clona o resultado base para adicionar anÃ¡lises avanÃ§adas\n  let score = resultadoBase.score;\n  let explicacao = resultadoBase.explicacaoSimilaridade || '';\n  const frameworks = sinaisAvancados.frameworksDetectados || [];\n  const deps = sinaisAvancados.dependencias || [];\n  const scripts = sinaisAvancados.scripts || [];\n  const detalhes = sinaisAvancados.detalhes || {};\n\n  // BONUS INTELIGENTE: Considerar sinais avanÃ§ados para pontuaÃ§Ã£o contextual\n  score += calcularBonusContextual(def, sinaisAvancados);\n\n  // AnÃ¡lise especÃ­fica por arquÃ©tipo\n  switch (def.nome) {\n    case 'next-js':\n      if (frameworks.includes('Next.js') || deps.includes('next')) {\n        score += 30;\n        explicacao += '\\nâœ“ Framework Next.js detectado via dependÃªncias e anÃ¡lise de cÃ³digo.';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('pages') || sinaisAvancados.pastasPadrao?.includes('app')) {\n        score += 20;\n        explicacao += '\\nâœ“ Estrutura de roteamento Next.js (pages ou app dir) confirmada.';\n      }\n      // BÃ´nus por tecnologias detectadas\n      if (sinaisAvancados.tecnologiasDominantes.includes('frontend-framework')) {\n        score += 15;\n      }\n      break;\n    case 'fullstack':\n      // DetecÃ§Ã£o especÃ­fica para Next.js fullstack\n      if (frameworks.includes('Next.js') || deps.includes('next')) {\n        score += 35;\n        explicacao += '\\nâœ“ Framework Next.js detectado - aplicaÃ§Ã£o fullstack moderna.';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('api')) {\n        score += 25;\n        explicacao += '\\nâœ“ API routes Next.js detectadas - backend integrado.';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('pages')) {\n        score += 20;\n        explicacao += '\\nâœ“ PÃ¡ginas Next.js (Pages Router) detectadas.';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('app')) {\n        score += 25;\n        explicacao += '\\nâœ“ App Router Next.js detectado - arquitetura moderna.';\n      }\n      if (deps.includes('prisma') || deps.includes('@prisma/client')) {\n        score += 20;\n        explicacao += '\\nâœ“ Prisma ORM detectado - banco de dados integrado.';\n      }\n      if (sinaisAvancados.tecnologiasDominantes.includes('frontend-framework')) {\n        score += 15;\n        explicacao += '\\nâœ“ Tecnologias frontend modernas detectadas.';\n      }\n      if (sinaisAvancados.tecnologiasDominantes.includes('backend-api')) {\n        score += 15;\n        explicacao += '\\nâœ“ APIs backend detectadas no fullstack.';\n      }\n      break;\n    case 'vite':\n      if (frameworks.includes('Vite') || deps.includes('vite')) {\n        score += 30;\n        explicacao += '\\nâœ“ Build tool Vite detectado.';\n      }\n      if (sinaisAvancados.arquivosConfiguracao?.some(f => f.includes('vite.config'))) {\n        score += 15;\n        explicacao += '\\nâœ“ Arquivo de configuraÃ§Ã£o Vite presente.';\n      }\n      break;\n    case 'api-rest-express':\n      if (frameworks.includes('Express') || deps.includes('express')) {\n        score += 25;\n        explicacao += '\\nâœ“ Framework Express detectado.';\n      }\n      if (frameworks.includes('Fastify') || deps.includes('fastify')) {\n        score += 25;\n        explicacao += '\\nâœ“ Framework Fastify detectado - alta performance.';\n      }\n      if (frameworks.includes('NestJS') || deps.includes('@nestjs/core')) {\n        score += 30;\n        explicacao += '\\nâœ“ Framework NestJS detectado - arquitetura enterprise.';\n      }\n      if (frameworks.includes('Koa') || deps.includes('koa')) {\n        score += 20;\n        explicacao += '\\nâœ“ Framework Koa detectado.';\n      }\n      if (frameworks.includes('Hapi') || deps.includes('@hapi/hapi')) {\n        score += 20;\n        explicacao += '\\nâœ“ Framework Hapi detectado.';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('routes') || sinaisAvancados.pastasPadrao?.includes('api') || sinaisAvancados.pastasPadrao?.includes('controllers')) {\n        score += 15;\n        explicacao += '\\nâœ“ Estrutura de rotas/controllers API detectada.';\n      }\n      if (deps.includes('cors') || deps.includes('helmet') || deps.includes('@fastify/cors')) {\n        score += 10;\n        explicacao += '\\nâœ“ Middleware de seguranÃ§a/CORS presente.';\n      }\n      if (deps.includes('joi') || deps.includes('@hapi/joi')) {\n        score += 10;\n        explicacao += '\\nâœ“ ValidaÃ§Ã£o de dados detectada.';\n      }\n      if (deps.includes('prisma') || deps.includes('mongoose') || deps.includes('typeorm')) {\n        score += 15;\n        explicacao += '\\nâœ“ ORM/Database layer detectado.';\n      }\n      // BÃ´nus por padrÃµes arquiteturais\n      if (sinaisAvancados.padroesArquiteturais.includes('repository-service')) {\n        score += 10;\n        explicacao += '\\nâœ“ PadrÃ£o Repository/Service compatÃ­vel com APIs REST.';\n      }\n      if (sinaisAvancados.tecnologiasDominantes.includes('backend-api')) {\n        score += 20;\n        explicacao += '\\nâœ“ Foco em desenvolvimento backend/API confirmado.';\n      }\n      break;\n    case 'vue-spa':\n      // DetecÃ§Ã£o especÃ­fica para Vue.js SPA\n      if (frameworks.includes('Vue') || deps.includes('vue')) {\n        score += 30;\n        explicacao += '\\nâœ“ Framework Vue.js detectado - SPA moderna.';\n      }\n      if (deps.includes('vue-router')) {\n        score += 20;\n        explicacao += '\\nâœ“ Vue Router detectado - roteamento SPA.';\n      }\n      if (deps.includes('vuex') || deps.includes('pinia')) {\n        score += 20;\n        explicacao += '\\nâœ“ State management detectado (Vuex/Pinia).';\n      }\n      if (deps.includes('@vue/cli-service') || deps.includes('vite')) {\n        score += 15;\n        explicacao += '\\nâœ“ Build tool Vue detectado (CLI/Vite).';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('src/components')) {\n        score += 15;\n        explicacao += '\\nâœ“ Estrutura de componentes Vue detectada.';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('src/composables')) {\n        score += 15;\n        explicacao += '\\nâœ“ Composables Vue 3 detectados - arquitetura moderna.';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('src/views')) {\n        score += 10;\n        explicacao += '\\nâœ“ Estrutura de views/pages detectada.';\n      }\n      if (deps.includes('nuxt') || deps.includes('nuxt3')) {\n        score += 25;\n        explicacao += '\\nâœ“ Nuxt.js detectado - SSR/SSG framework.';\n      }\n      if (sinaisAvancados.tecnologiasDominantes.includes('frontend-framework')) {\n        score += 15;\n        explicacao += '\\nâœ“ Foco em desenvolvimento frontend confirmado.';\n      }\n      break;\n    case 'react-app':\n      if (frameworks.includes('React') || deps.includes('react')) {\n        score += 30;\n        explicacao += '\\nâœ“ Framework React detectado.';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('components') || sinaisAvancados.pastasPadrao?.includes('src')) {\n        score += 15;\n        explicacao += '\\nâœ“ Estrutura React tÃ­pica com components detectada.';\n      }\n      // BÃ´nus por tecnologias detectadas\n      if (sinaisAvancados.tecnologiasDominantes.includes('frontend-framework')) {\n        score += 15;\n      }\n      break;\n    case 'vue-app':\n      if (frameworks.includes('Vue') || deps.includes('vue')) {\n        score += 30;\n        explicacao += '\\nâœ“ Framework Vue detectado.';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('components') || sinaisAvancados.arquivosPadrao?.some(f => f.endsWith('.vue'))) {\n        score += 15;\n        explicacao += '\\nâœ“ Estrutura Vue com components detectada.';\n      }\n      break;\n    case 'typescript-lib':\n      if (sinaisAvancados.tipos?.length > 0) {\n        score += 20;\n        explicacao += `\\nâœ“ Tipos TypeScript detectados (${sinaisAvancados.tipos.length} tipos).`;\n      }\n      if (deps.includes('typescript') || sinaisAvancados.arquivosConfiguracao?.some(f => f.includes('tsconfig'))) {\n        score += 15;\n        explicacao += '\\nâœ“ ConfiguraÃ§Ã£o TypeScript presente.';\n      }\n      if (scripts.includes('build') || scripts.includes('compile')) {\n        score += 10;\n        explicacao += '\\nâœ“ Scripts de build detectados.';\n      }\n      // BÃ´nus por TypeScript avanÃ§ado\n      if (sinaisAvancados.tecnologiasDominantes.includes('typescript-advanced')) {\n        score += 20;\n        explicacao += '\\nâœ“ Uso avanÃ§ado de TypeScript detectado.';\n      }\n      break;\n    case 'monorepo':\n      if (sinaisAvancados.arquivosConfiguracao?.some(f => f.includes('lerna.json') || f.includes('pnpm-workspace'))) {\n        score += 25;\n        explicacao += '\\nâœ“ ConfiguraÃ§Ã£o de monorepo detectada (Lerna ou pnpm).';\n      }\n      if (sinaisAvancados.pastasPadrao?.includes('packages') || sinaisAvancados.pastasPadrao?.includes('apps')) {\n        score += 20;\n        explicacao += '\\nâœ“ Estrutura de workspaces/packages detectada.';\n      }\n      // BÃ´nus por complexidade alta\n      if (sinaisAvancados.complexidadeEstrutura === 'alta') {\n        score += 20;\n        explicacao += '\\nâœ“ Complexidade estrutural alta compatÃ­vel com monorepo.';\n      }\n      break;\n    case 'cli':\n      if (sinaisAvancados.pastasPadrao?.includes('bin') || sinaisAvancados.pastasPadrao?.includes('cli')) {\n        score += 20;\n        explicacao += '\\nâœ“ Estrutura de CLI detectada (bin ou cli).';\n      }\n      if (deps.includes('commander') || deps.includes('yargs') || deps.includes('inquirer')) {\n        score += 15;\n        explicacao += '\\nâœ“ Biblioteca de CLI detectada (commander/yargs/inquirer).';\n      }\n      // BÃ´nus por padrÃµes CLI\n      if (sinaisAvancados.padroesArquiteturais.includes('cli-patterns')) {\n        score += 25;\n        explicacao += '\\nâœ“ PadrÃµes especÃ­ficos de CLI detectados.';\n      }\n      // Penalizar se tem estrutura web\n      if (sinaisAvancados.tecnologiasDominantes.includes('frontend-framework')) {\n        score -= 30;\n        explicacao += '\\nâœ— Estrutura web detectada, incompatÃ­vel com CLI.';\n      }\n      break;\n  }\n\n  // AnÃ¡lises genÃ©ricas aplicÃ¡veis a todos os arquÃ©tipos\n  if (detalhes.testRunner) {\n    score += 5;\n    explicacao += `\\nâœ“ Test runner detectado: ${detalhes.testRunner}.`;\n  }\n  if (detalhes.linter) {\n    score += 3;\n    explicacao += `\\nâœ“ Linter configurado: ${detalhes.linter}.`;\n  }\n  if (detalhes.bundler && !['vite', 'webpack', 'rollup'].includes(def.nome)) {\n    score += 5;\n    explicacao += `\\nâœ“ Bundler detectado: ${detalhes.bundler}.`;\n  }\n\n  // Detectar complexidade do projeto baseado nos sinais\n  const complexidade = (sinaisAvancados.funcoes || 0) + (sinaisAvancados.classes || 0) + (sinaisAvancados.variaveis || 0);\n  if (complexidade > 100) {\n    explicacao += `\\nğŸ“Š Projeto de complexidade alta (${complexidade} elementos).`;\n  } else if (complexidade > 50) {\n    explicacao += `\\nğŸ“Š Projeto de complexidade mÃ©dia (${complexidade} elementos).`;\n  }\n\n  // Recalcular confidence baseado no novo score\n  const maxPossible = (def.pesoBase || 1) * 10 + (def.requiredDirs?.length || 0) * PESO_REQUIRED + (def.optionalDirs?.length || 0) * PESO_OPTIONAL + (def.dependencyHints?.length || 0) * PESO_DEPENDENCIA + (def.filePresencePatterns?.length || 0) * PESO_PADRAO + 100; // Adiciona margem para anÃ¡lise avanÃ§ada\n\n  const confidence = maxPossible > 0 ? Math.min(100, Math.round(score / maxPossible * 100)) : 0;\n  return {\n    ...resultadoBase,\n    score,\n    confidence,\n    explicacaoSimilaridade: explicacao.trim()\n  };\n}\nfunction calcularBonusContextual(def: ArquetipoEstruturaDef, sinais: SinaisProjetoAvancados): number {\n  let bonus = 0;\n\n  // BÃ´nus baseado na complexidade da estrutura\n  if (def.nome === 'monorepo' && sinais.complexidadeEstrutura === 'alta') {\n    bonus += 20;\n  }\n\n  // Penalizar estruturas simples para arquetipos complexos\n  if ((def.nome === 'fullstack' || def.nome === 'monorepo') && sinais.complexidadeEstrutura === 'baixa') {\n    bonus -= 15;\n  }\n\n  // BÃ´nus por alinhamento de padrÃµes arquiteturais\n  if (def.nome === 'api-rest-express' && sinais.padroesArquiteturais.includes('repository-service')) {\n    bonus += 15;\n  }\n  if (def.nome === 'cli' && sinais.padroesArquiteturais.includes('cli-patterns')) {\n    bonus += 20;\n  }\n\n  // Penalizar incompatibilidades tecnolÃ³gicas\n  if (def.nome === 'cli' && sinais.tecnologiasDominantes.includes('frontend-framework')) {\n    bonus -= 25;\n  }\n  if (def.nome === 'typescript-lib' && sinais.tecnologiasDominantes.includes('frontend-framework')) {\n    bonus -= 20;\n  }\n  return bonus;\n}\nexport function pontuarTodosAvancado(arquivos: string[], sinaisAvancados?: SinaisProjetoAvancados): ResultadoDeteccaoArquetipo[] {\n  const resultados: ResultadoDeteccaoArquetipo[] = [];\n  for (const def of ARQUETIPOS) {\n    const resultado = scoreArquetipoAvancado(def, arquivos, sinaisAvancados);\n    resultados.push(resultado);\n    if (resultado.candidatoExtra) {\n      const extra = ARQUETIPOS.find((a: ArquetipoEstruturaDef) => a.nome === resultado.candidatoExtra);\n      if (extra) {\n        const extraResultado = scoreArquetipoAvancado(extra, arquivos, sinaisAvancados);\n        if (!resultados.some(x => x.nome === extraResultado.nome)) resultados.push(extraResultado);\n      }\n    }\n  }\n  // Filtro: manter apenas candidatos que apresentem algum sinal (match/forbidden/pattern/dep)\n  return resultados.filter(resultado => (resultado.matchedRequired?.length || 0) > 0 || (resultado.matchedOptional?.length || 0) > 0 || (resultado.dependencyMatches?.length || 0) > 0 || (resultado.filePadraoMatches?.length || 0) > 0 || (resultado.forbiddenPresent?.length || 0) > 0);\n}"]}